(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1353:function(t,e,a){"use strict";a.r(e);var n=a(3090),o=a(1862);for(var r in o)"default"!==r&&function(t){a.d(e,t,(function(){return o[t]}))}(r);var i=a(0),l=a(2705),u=a.n(l),c=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof u.a&&u()(c),e.default=c.exports},1486:function(t,e,a){"use strict";var n=a(10),o=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.doPackageAction=e.importPackages=e.exportPackages=e.deletePackages=e.updatePackage=e.getPackage=e.getPackages=void 0;var r=o(a(2)),i=o(a(30)),l=n(a(1547)),u=n(a(6));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var s=i.default.get({id:"USER_PACKAGES",url:"/CMD_MANAGE_USER_PACKAGES",params:{bytes:!0},pagination:!0,after:function(t){return t.toTable(t.mapArrayProps({bandwidth:t.convert.toAppLimit,quota:t.convert.toAppLimit}))}});e.getPackages=s;var d=i.default.get({id:"USER_PACKAGE",url:"/CMD_SHOW_USER_PACKAGE",params:{bytes:!0},schema:{package:i.default.OPTIONAL_STRING},mapResponse:{features:l.getFeatures,limits:l.getLimits,homeOverride:l.getHomeOverride,language:l.getLanguage,skin:l.getSkin,customItems:l.getCustomItems,featureSets:l.getFeatureSets,email_daily_limit:function(t){var e=t.email_daily_limit;return void 0!==e&&{disabled:"yes"===e.disabled,unlimited:"unlimited"===e.value,value:"unlimited"===e.value?"":e.value}},pluginRules:u.prop("plugins")}});e.getPackage=d;var f=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",params:{add:!0},schema:{bandwidth:i.default.OPTIONAL_STRING,ubandwidth:i.default.OPTIONAL_BOOL,quota:i.default.OPTIONAL_STRING,uquota:i.default.OPTIONAL_BOOL,inode:i.default.OPTIONAL_STRING,uinode:i.default.OPTIONAL_BOOL,vdomains:i.default.OPTIONAL_STRING,uvdomains:i.default.OPTIONAL_BOOL,nsubdomains:i.default.OPTIONAL_STRING,unsubdomains:i.default.OPTIONAL_BOOL,nemails:i.default.OPTIONAL_STRING,unemails:i.default.OPTIONAL_BOOL,nemailf:i.default.OPTIONAL_STRING,unemailf:i.default.OPTIONAL_BOOL,nemailml:i.default.OPTIONAL_STRING,unemailml:i.default.OPTIONAL_BOOL,nemailr:i.default.OPTIONAL_STRING,unemailr:i.default.OPTIONAL_BOOL,mysql:i.default.OPTIONAL_STRING,umysql:i.default.OPTIONAL_BOOL,domainptr:i.default.OPTIONAL_STRING,udomainptr:i.default.OPTIONAL_BOOL,ftp:i.default.OPTIONAL_STRING,uftp:i.default.OPTIONAL_BOOL,aftp:i.default.OPTIONAL_STRING,cgi:i.default.OPTIONAL_STRING,php:i.default.OPTIONAL_STRING,spam:i.default.OPTIONAL_STRING,catchall:i.default.OPTIONAL_STRING,ssl:i.default.OPTIONAL_STRING,ssh:i.default.OPTIONAL_STRING,cron:i.default.OPTIONAL_STRING,sysinfo:i.default.OPTIONAL_STRING,login_keys:i.default.OPTIONAL_STRING,dnscontrol:i.default.OPTIONAL_STRING,suspend_at_limit:i.default.OPTIONAL_STRING,language:i.default.OPTIONAL_STRING,skin:i.default.OPTIONAL_STRING,packagename:i.default.OPTIONAL_STRING}});e.updatePackage=f;var p=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",before:function(t){return t.select.reduce((function(t,e,a){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){(0,r.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t,(0,r.default)({},"delete".concat(a),e))}),{delete:!0})},schema:{select:i.default.ROWS}});e.deletePackages=p;var m=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{select:i.default.ROWS},params:{export:!0}});e.exportPackages=m;var O=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{import:i.default.REQUIRED_STRING},params:{action:"import"}});e.importPackages=O;var _=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{action:i.default.REQUIRED_STRING,from:i.default.REQUIRED_STRING,to:i.default.REQUIRED_STRING},before:function(t){return{from:null,to:null,old_package:t.from,new_package:t.to}}});e.doPackageAction=_},1507:function(t,e,a){"use strict";a.r(e);var n=a(1508),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=o.a},1508:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{text:""}}}},1509:function(t,e,a){"use strict";a.r(e);var n=a(1510),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=o.a},1510:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(1486);var n={props:{pkgListId:{type:String,required:!0}},data:function(){return{from:"",to:"",type:"rename"}},computed:{packageList:function(){var t=this.$state.commands[this.pkgListId].response;return t?t.rows.map((function(t){return t.package})):[]}},methods:{submit:function(){this.$valid("package-action")&&(this.$emit("action",{action:this.type,from:this.from,to:this.to}),this.$dialog("PACKAGE_ACTION_DIALOG").close())},validateName:function(t){return!t||!this.packageList.includes(t)},setData:function(t){Object.assign(this,t)}}};e.default=n},1547:function(t,e,a){"use strict";a.r(e),a.d(e,"getCustomItems",(function(){return r})),a.d(e,"getHomeOverride",(function(){return i})),a.d(e,"getFeatures",(function(){return l})),a.d(e,"toPackageLimit",(function(){return c})),a.d(e,"getLimits",(function(){return s})),a.d(e,"getSkin",(function(){return d})),a.d(e,"getLanguage",(function(){return f})),a.d(e,"getFeatureSets",(function(){return p}));var n=a(6),o=a(35),r=function(t){return n.values(t.custom_items||{}).map(o.customItems.fromObject)},i=function(t){return Object(o.toSelectData)(t.create_user_home_override||{})},l=function(t){var e;return{aftp:Object(o.toBoolean)(t.aftp.checked),catchall:Object(o.toBoolean)(t.catchall.checked),cgi:Object(o.toBoolean)(t.cgi.checked),cron:Object(o.toBoolean)(t.cron.checked),dnscontrol:Object(o.toBoolean)(t.dnscontrol.checked),login_keys:Object(o.toBoolean)(t.login_keys.checked),php:Object(o.toBoolean)(t.php.checked),spam:Object(o.toBoolean)(t.spam.checked),ssh:Object(o.toBoolean)(t.ssh.checked),ssl:Object(o.toBoolean)(t.ssl.checked),suspend_at_limit:Object(o.toBoolean)(t.suspend_at_limit.checked),sysinfo:Object(o.toBoolean)(t.sysinfo.checked),jail:Object(o.toBoolean)((null===(e=t.jail)||void 0===e?void 0:e.checked)||"no")}},u=n.pipe(Number,n.complement(Number.isFinite)),c=function(t){var e=t.value;return{unlimited:u(e),value:u(e)?"":e}},s=n.pipe(n.pick(["bandwidth","domainptr","ftp","inode","mysql","nemailf","nemailml","nemailr","nemails","nsubdomains","quota","vdomains"]),n.mapObjIndexed(c)),d=function(t){var e=t.skin;return Object(o.toSelectData)(e)},f=function(t){var e=t.language;return Object(o.toSelectData)(e)},p=function(t){var e=t.feature_sets;return{options:n.map(n.prop("name"),e),values:n.keys(n.filter(n.propEq("checked","yes"),e))}}},1704:function(t,e,a){"use strict";a.r(e);var n=a(2316),o=a(1507);for(var r in o)"default"!==r&&function(t){a.d(e,t,(function(){return o[t]}))}(r);var i=a(0),l=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);e.default=l.exports},1705:function(t,e,a){"use strict";a.r(e);var n=a(2317),o=a(1509);for(var r in o)"default"!==r&&function(t){a.d(e,t,(function(){return o[t]}))}(r);var i=a(0),l=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);e.default=l.exports},1862:function(t,e,a){"use strict";a.r(e);var n=a(1863),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=o.a},1863:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(1486),r=n(a(1704)),i=n(a(1705)),l={preload:o.getPackages,commands:{getPackages:o.getPackages},components:{ImportPackagesDialog:r.default,PackageActionDialog:i.default},data:function(){return{select:[]}},methods:{deleteItems:function(){(0,o.deletePackages)({select:this.select}).then(this.$reloadApiTable)},exportPackages:function(){(0,o.exportPackages)({select:this.select})},importPackages:function(t){(0,o.importPackages)({import:t}).then(this.$reloadApiTable)},rowClick:function(t){var e=t.item;this.$router.push({name:"reseller/user-packages/view",params:{package:e.package}})},openActionDialog:function(t,e){this.$dialog("PACKAGE_ACTION_DIALOG").open(),this.$refs.actionDialog.setData({type:t,from:e.package,to:""})},doPackageAction:function(t){(0,o.doPackageAction)(t).then(this.$reloadApiTable)}}};e.default=l},2316:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ui-dialog",{attrs:{id:"IMPORT_PACKAGES_DIALOG",size:"normal"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Import packages\n    ")]),t._v(" "),a("input-textarea",{staticClass:"width:100%",attrs:{slot:"content"},slot:"content",model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary",disabled:!t.text},on:{click:function(e){return t.$emit("import",t.text)}},slot:"buttons"},[a("translate",[t._v("Import")])],1)],1)},o=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}))},2317:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ui-dialog",{attrs:{id:"PACKAGE_ACTION_DIALOG"}},[a("template",{slot:"title"},[t._v("\n        "+t._s("rename"===t.type?t.$gettext("Rename Package"):t.$gettext("Copy Package"))+"\n    ")]),t._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Old Package Name\n            ")]),t._v(" "),a("input-text",{attrs:{slot:"content",value:t.from,disabled:""},slot:"content"})],1),t._v(" "),a("ui-form-element",{attrs:{group:"package-action",vertical:"",validators:{required:!0,validateName:t.validateName,regex:/^[a-zA-Z0-9\-\_]+$/,maxLength:20}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                New Package Name\n            ")]),t._v(" "),a("input-text",{attrs:{slot:"content",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},slot:"content",model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),t._v(" "),a("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[t._v("\n                Package name should not contain special characters\n            ")]),t._v(" "),a("translate",{attrs:{slot:"error:validateName"},slot:"error:validateName"},[t._v("\n                Package already exists\n            ")])],1)],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"package-action"},on:{click:t.submit},slot:"buttons"},[a("translate",[t._v("Rename")])],1)],2)},o=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}))},2705:function(t,e){},3090:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"reseller/user-packages/create"},slot:"header:buttons"},[a("translate",[t._v("Add Package")])],1),t._v(" "),a("app-page-section",[a("ui-api-table",t._b({on:{"action:remove":function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()},"action:export":t.exportPackages,"table:rowClick":t.rowClick},scopedSlots:t._u([{key:"col:package",fn:function(e){var n=e.package;return a("ui-link",{attrs:{name:"reseller/user-packages/view",params:{package:n}}},[t._v("\n                "+t._s(n)+"\n            ")])}},{key:"col:bandwidth",fn:function(e){var n=e.bandwidth;return[n===1/0?a("translate",[t._v("\n                    Unlimited\n                ")]):[t._v("\n                    "+t._s(t._f("humanReadableSize")(n))+"\n                ")]]}},{key:"col:quota",fn:function(e){var n=e.quota;return[n===1/0?a("translate",[t._v("\n                    Unlimited\n                ")]):[t._v("\n                    "+t._s(t._f("humanReadableSize")(n))+"\n                ")]]}},{key:"row:actions",fn:function(e){var n=e.item;return a("ui-actions",{},[a("ui-link",{on:{click:function(e){return t.openActionDialog("rename",n)}}},[a("translate",[t._v("Rename")])],1),t._v(" "),a("ui-link",{on:{click:function(e){return t.openActionDialog("copy",n)}}},[a("translate",[t._v("Copy")])],1)],1)}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{command:t.$commands.getPackages,rowID:"package",columns:{package:{label:t.$gettext("Package"),grow:!0},bandwidth:t.$gettext("Bandwidth"),quota:t.$gettext("Disk Usage")},actions:{remove:t.$gettext("Delete"),export:t.$gettext("Export")},verticalLayout:t.$_Client.isPhone},!1))],1),t._v(" "),a("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("user package","user packages",t.select.length)},on:{"click:confirm":t.deleteItems}}),t._v(" "),a("import-packages-dialog",{on:{import:t.importPackages}}),t._v(" "),a("package-action-dialog",{ref:"actionDialog",attrs:{"pkg-list-id":"USER_PACKAGES"},on:{action:t.doPackageAction}}),t._v(" "),a("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("IMPORT_PACKAGES_DIALOG").open()}},slot:"bottom:links"},[a("translate",[t._v("Import Packages")])],1)],1)},o=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}))}}]);