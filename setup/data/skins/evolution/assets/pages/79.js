(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1401:function(t,e,n){"use strict";n.r(e);var a=n(3137),i=n(2166);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(2915);var s=n(0),o=n(2917),l=n.n(o),c=Object(s.a)(i.default,a.a,a.b,!1,null,"03683c7c",null);"function"==typeof l.a&&l()(c),e.default=c.exports},1528:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFiles=e.checkExistsMultiple=e.download=e.checkExists=e.getArchive=e.extract=e.copy=e.rename=e.create=e.save=e.read=void 0;var i=n(11),r=a(n(30)),s=n(7),o="/CMD_FILE_MANAGER",l=r.default.get({url:o,id:"FILE_CONTENT",params:{action:"edit"},schema:{path:r.default.REQUIRED_STRING},after:function(t){return t.flow(t.moveProp({DIRECTORY:"dir",FILENAME:"filename",TEXT:"text"}),t.mapProp("text",t.convert.toAppText),t.deleteProp("BODY"))}});e.read=l;var c=r.default.post({url:o,noQueryArg:!0,params:{action:"edit",json:!0},schema:{path:r.default.REQUIRED_STRING,filename:r.default.REQUIRED_STRING,text:r.default.REQUIRED_STRING}});e.save=c;var u=c.extend({params:{text:""}});e.create=u;var f=r.default.post({url:o,params:{action:"rename"},schema:{old:r.default.REQUIRED_STRING,filename:r.default.REQUIRED_STRING,path:r.default.REQUIRED_STRING}});e.rename=f;var d=f.extend({params:{action:"copy",json:!0},schema:{overwrite:r.default.REQUIRED_BOOL}});e.copy=d;var p=r.default.post({url:o,params:{action:"extract",page:2},schema:{path:r.default.REQUIRED_STRING,directory:r.default.REQUIRED_STRING}});e.extract=p;var h=r.default.get({id:"ARCHIVE",url:o,params:{action:"extract",json:!0},schema:{path:r.default.REQUIRED_STRING},response:[],after:function(t){return t.flow(t.getProp("output"),t.convert.toLines,t.filter(t.notEmpty))}});e.getArchive=h;var m=r.default.get({url:o,id:"FILE_EXISTS",response:!1,params:{action:"exists"},schema:{path:r.default.REQUIRED_STRING},after:function(t){return t.flow(t.getProp("exists"),t.isEqual("1"))}});e.checkExists=m;e.download=function(t){var e=(0,i.State)("app.tokens.SESSION_ID"),n="".concat(o).concat(t.truepath,"?noredirect=true&X-DirectAdmin-Session-ID=").concat(e);(0,s.openInNewTab)(n,t.name)};var v=r.default.get({url:o,id:"FILES_EXISTS",params:{action:"multiple_exist"},schema:{file:r.default.ROWS},response:[],mapResponse:function(t){var e=t.paths;return Object.keys(e).filter((function(t){return"1"===e[t].exists}))}});e.checkExistsMultiple=v;var E=r.default.post({url:"/CMD_FILE_MANAGER",params:{action:"upload"},schema:{file:{required:!0},path:r.default.REQUIRED_STRING},transport:FormData,continous:!0});e.uploadFiles=E},2166:function(t,e,n){"use strict";n.r(e);var a=n(2167),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=i.a},2167:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r,s=a(n(17)),o=a(n(15)),l=a(n(16)),c=n(1528),u=a(n(1485)),f={components:{FileExistsConfirmationDialog:a(n(2312)).default,InputTextEditor:u.default},beforeRouteEnter:(r=(0,l.default)(o.default.mark((function t(e,n,a){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.read)({path:e.query.path});case 3:a(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),function(t,e,n){return r.apply(this,arguments)}),api:[{command:c.read,bind:"file"}],data:function(){return{content:"",filename:""}},created:function(){this.content=this.file.text.trim(),this.filename=this.file.filename},computed:{file:function(){return this.$api.file},path:function(){return"/"===this.file.path[this.file.path.length-1]?this.file.path.slice(0,-1):this.file.path},editorMode:function(){var t=this.file.filename.split(".");return{html:"html",js:"javascript",css:"css",php:"php",pl:"perl",ini:"ini",sql:"sql",json:"json"}[(0,s.default)(t,2)[1]]||"text"}},methods:{save:(i=(0,l.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.file.filename!==this.filename,!t.t0){t.next=5;break}return t.next=4,this.checkFileExists();case 4:t.t0=t.sent;case 5:t.t0?this.$dialog("FILE_EXISTS_CONFIRMATION_DIALOG").open():this.confirmedSave();case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),confirmedSave:function(){(0,c.save)({path:this.file.path,filename:this.filename,text:this.content})},checkFileExists:function(){return(0,c.checkExists)({path:"".concat(this.path,"/").concat(this.filename)})}}};e.default=f},2168:function(t,e,n){var a=n(2916);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("7bb2bb3c",a,!0,{})},2312:function(t,e,n){"use strict";n.r(e);var a=n(0),i=Object(a.a)({},(function(t,e){var n=e._c;return n("ui-dialog",{attrs:{id:"FILE_EXISTS_CONFIRMATION_DIALOG",theme:"danger",noCloseBtn:"",noCloseIcon:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Confirm File Save")]),e._v(" "),n("translate",{attrs:{slot:"content","translate-params":{filename:e.props.filename}},slot:"content"},[e._v("\n        File %{ filename } already exists. Confirm overwrite?\n    ")]),e._v(" "),n("template",{slot:"buttons"},[n("ui-button",{attrs:{theme:"danger"},on:{click:e.listeners.overwrite}},[n("translate",[e._v("Yes")])],1),e._v(" "),n("ui-button",{attrs:{theme:"neutral"},on:{click:e.listeners.discard}},[n("translate",[e._v("No")])],1)],1)],2)}),[],!0,null,null,null);e.default=i.exports},2915:function(t,e,n){"use strict";var a=n(2168);n.n(a).a},2916:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,"textarea[data-v-03683c7c]{width:100%;min-height:60vh}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/filemanager/edit.vue"],names:[],mappings:"AAmIA,0BACI,WACA,eAAgB,CAAA",file:"edit.vue?vue&type=style&index=0&id=03683c7c&scoped=true&lang=css&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntextarea {\n    width: 100%;\n    min-height: 60vh;\n}\n"],sourceRoot:""}])},2917:function(t,e){},3137:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Save As\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}},[n("ui-button",{attrs:{slot:"additions:right",theme:"safe"},on:{click:t.save},slot:"additions:right"},[n("translate",[t._v("Save")])],1)],1)],1),t._v(" "),n("input-text-editor",{attrs:{mode:t.editorMode},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[n("template",{slot:"header"},[t._v("\n                "+t._s(t.path)+"/"+t._s(t.file.filename)+"\n            ")])],2)],1),t._v(" "),n("file-exists-confirmation-dialog",{on:{overwrite:t.confirmedSave,discard:function(e){t.$dialog("FILE_EXISTS_CONFIRMATION_DIALOG").close()}}})],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))}}]);