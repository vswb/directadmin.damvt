(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1424:function(t,e,n){"use strict";n.r(e);var s=n(3160),i=n(2237);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o=n(0),u=n(2969),l=n.n(u),r=Object(o.a)(i.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(r),e.default=r.exports},2237:function(t,e,n){"use strict";n.r(e);var s=n(2238),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e.default=i.a},2238:function(t,e,n){"use strict";var s=n(10),i=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o,u=i(n(15)),l=i(n(16)),r=s(n(2466)),c=i(n(2966)),d={preload:r.getSettings,api:r.getSettings,commands:r,components:{AddSecurityQuestionDialog:c.default},data:function(){return{activeQuestion:{},newAnswer:"",select:[],settings:{security_questions:!1,api_with_password:!1,notify_on_all_question_failures:!1,max_attempts:"5"}}},computed:{table:function(){return this.$api.table},questions:function(){return this.$api.questions}},created:function(){Object.assign(this.settings,this.$api.settings)},methods:{handleQuestionEdit:function(t){this.activeQuestion=t,this.$dialog("EDIT_QUESTION_DIALOG").open()},handleAnswerSave:(o=(0,l.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.updateQuestion({select:[this.activeQuestion.id],value:this.newAnswer});case 2:t.sent&&(this.$reloadApiTable(),this.activeQuestion={},this.newAnswer="");case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),enable:function(){this.settings.security_questions=!0,this.saveSettings()},disable:function(){this.settings.security_questions=!1,this.saveSettings()},saveSettings:function(){r.updateSettings({action:"settings",version:"1",security_questions:this.settings.security_questions||null,api_with_password:this.settings.api_with_password||null,notify_on_all_question_failures:this.settings.notify_on_all_question_failures||null,save:"Save"}).then(r.getSettings)},deleteCheckedQuestions:(a=(0,l.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.deleteQuestions(this.$get("select")).then(this.$reloadApiTable);case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}};e.default=d},2239:function(t,e,n){"use strict";n.r(e);var s=n(2240),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e.default=i.a},2240:function(t,e,n){"use strict";var s=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=s(n(15)),o=s(n(16)),u=n(2466),l={data:function(){return{type:"included",question:"",value:""}},api:[{command:u.getSettings,bind:{"response.questions":"questions"}}],watch:{type:function(){this.question=""}},methods:{addQuestion:(i=(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,u.addQuestion)({type:this.type,question:this.question,value:this.value}).then(u.getSettings),this.$emit("update");case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}};e.default=l},2241:function(t,e,n){var s=n(2968);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(5).default)("664d1ce2",s,!0,{})},2466:function(t,e,n){"use strict";var s=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.submitAnswer=e.updateQuestion=e.deleteQuestions=e.addQuestion=e.updateSettings=e.getSettings=void 0;var i=s(n(30)),a="/CMD_SECURITY_QUESTIONS",o=i.default.get({id:"SECURITY_SETTINGS",url:a,after:function(t){return t.flow(t.project({questions:"new_questions","table.rows":"questions","settings.api_with_password":"SECURITY_QUESTIONS_ON_API_CHECKED","settings.notify_on_all_question_failures":"NOTIFY_ON_ALL_FAILURES_CHECKED","settings.security_questions":"SECURITY_QUESTIONS_CHECKED","settings.max_attempts":"MAX_ATTEMPTS"}),t.mapProps({table:t.flow(t.processTableInfo("rows"),t.mapProp("rows",t.flow(t.toArray,t.mapArrayProps({q:t.convert.toAppString})))),settings:t.mapProps({notify_on_all_question_failures:t.isEqual("checked"),api_with_password:t.isEqual("checked"),security_questions:t.isEqual("checked")})}))}});e.getSettings=o;var u=i.default.post({url:a,params:{action:"settings",version:"1",save:"Save",json:null},schema:{security_questions:i.default.REQUIRED_BOOL,api_with_password:i.default.REQUIRED_BOOL,notify_on_all_question_failures:i.default.REQUIRED_BOOL}});e.updateSettings=u;var l=i.default.post({url:a,params:{action:"add"},schema:{type:i.default.REQUIRED_STRING,question:i.default.OPTIONAL_STRING,value:i.default.REQUIRED_STRING},before:function(t){var e=t.type,n=t.question;return{custom_question:"custom"===e?n:null,question:"custom"===e?null:n}}});e.addQuestion=l;var r=i.default.select({url:a,params:{delete:!0}});e.deleteQuestions=r;var c=i.default.select({url:a,params:{set:!0},schema:{value:i.default.REQUIRED_STRING}});e.updateQuestion=c;var d=i.default.post({url:"/CMD_ASK_SECURITY_QUESTION",params:{action:"submit",referer:window.location.href},schema:{answer:i.default.REQUIRED_STRING}});e.submitAnswer=d},2966:function(t,e,n){"use strict";n.r(e);var s=n(3276),i=n(2239);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n(2967);var o=n(0),u=Object(o.a)(i.default,s.a,s.b,!1,null,"94b6c176",null);e.default=u.exports},2967:function(t,e,n){"use strict";var s=n(2241);n.n(s).a},2968:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,"#ADD_SECURITY_QUESTION_DIALOG .select[data-v-94b6c176],#ADD_SECURITY_QUESTION_DIALOG input[type=text][data-v-94b6c176]{width:100%}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/_components/add-security-question-dialog.vue"],names:[],mappings:"AAkGA,uHAEQ,UAAW,CAAA",file:"add-security-question-dialog.vue?vue&type=style&index=0&id=94b6c176&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#ADD_SECURITY_QUESTION_DIALOG {\n    .select, input[type=text] {\n        width: 100%;\n    }\n}\n"],sourceRoot:""}])},2969:function(t,e){},3160:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[t.$api.settings.security_questions?t._e():n("app-page-section",[n("translate",{staticClass:"txt:bold",attrs:{tag:"p"}},[t._v("\n            This feature is not turned on.\n        ")]),t._v(" "),t.table.rows.length?t._e():n("translate",{attrs:{tag:"p"}},[t._v("\n            Add one or more Security Question, and then enable it in the options at the bottom of the page.\n        ")])],1),t._v(" "),t.table.rows.length?n("template",{slot:"header:buttons"},[t.$api.settings.security_questions?n("ui-button",{key:"disable-button",attrs:{theme:"danger"},on:{click:t.disable}},[n("translate",[t._v("Disable")])],1):n("ui-button",{key:"enable-button",attrs:{theme:"safe"},on:{click:t.enable}},[n("translate",[t._v("Enable")])],1)],1):t._e(),t._v(" "),n("app-page-section",[n("ui-api-table",t._b({on:{"action:del":t.deleteCheckedQuestions},scopedSlots:t._u([{key:"row:actions",fn:function(e){var s=e.item;return n("ui-link",{staticClass:"wrap:nowrap",on:{click:function(e){return t.handleQuestionEdit(s)}}},[n("ui-icon",{attrs:{id:"pencil",size:"medium"}}),t._v(" "),t.$_Client.isPhone?t._e():n("translate",[t._v("\n                    Change Answer\n                ")])],1)}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{command:t.$commands.getSettings,property:"table",rowID:"id",columns:{id:t.$gettext("ID"),q:{label:t.$gettext("Security Question"),grow:!0}},actions:{del:t.$gettext("Delete")},verticalLayout:t.$_Client.isPhone},!1))],1),t._v(" "),n("template",{slot:"bottom:links"},[n("ui-link",{attrs:{bullet:""},on:{click:function(e){t.$dialog("ADD_SECURITY_QUESTION_DIALOG").open()}}},[n("translate",[t._v("Add new Security Question")])],1),t._v(" "),n("ui-link",{attrs:{bullet:""},on:{click:function(e){t.$dialog("SECURITY_QUESTIONS_SETTINGS_DIALOG").open()}}},[n("translate",[t._v("Security Questions options")])],1)],1),t._v(" "),n("add-security-question-dialog",{on:{update:function(e){t.select=[]}}}),t._v(" "),n("ui-dialog",{attrs:{id:"EDIT_QUESTION_DIALOG",theme:"safe"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Edit question\n        ")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                New answer:\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.newAnswer,callback:function(e){t.newAnswer=e},expression:"newAnswer"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe",disabled:!t.newAnswer},on:{click:t.handleAnswerSave},slot:"buttons"},[n("translate",[t._v("Save")])],1)],1),t._v(" "),n("ui-dialog",{attrs:{id:"SECURITY_QUESTIONS_SETTINGS_DIALOG",theme:"primary",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Security Questions options\n        ")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.settings.api_with_password,callback:function(e){t.$set(t.settings,"api_with_password",e)},expression:"settings.api_with_password"}},[n("translate",[t._v("\n                        Allow API logins with the current User/password. Login Keys and Session Keys are always allowed.\n                    ")])],1)],1),t._v(" "),n("ui-form-element",[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.settings.notify_on_all_question_failures,callback:function(e){t.$set(t.settings,"notify_on_all_question_failures",e)},expression:"settings.notify_on_all_question_failures"}},[n("translate",{attrs:{"translate-params":{count:t.settings.max_attempts}}},[t._v("\n                        Notify me on all failed question attempts. Disabling this option will still notify you after %{ count } failed attempts.\n                    ")])],1)],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:t.saveSettings},slot:"buttons"},[n("translate",[t._v("Save")])],1)],2)],2)},i=[];n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i}))},3276:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"ADD_SECURITY_QUESTION_DIALOG",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Add Security Question")]),t._v(" "),n("ui-tabs",{attrs:{slot:"content",radio:"",tabs:[{id:"included",label:t.$gettext("Included")},{id:"custom",label:t.$gettext("Custom")}],selected:t.type},on:{"update:selected":function(e){t.type=e}},slot:"content"},[n("ui-form-element",{attrs:{slot:"tab:included",group:"securityQuestion",validators:{required:!0},underline:!1},slot:"tab:included"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Question")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.$api.questions},slot:"content",model:{value:t.question,callback:function(e){t.question=e},expression:"question"}})],1),t._v(" "),n("ui-form-element",{attrs:{slot:"tab:custom",group:"securityQuestion",validators:{required:!0},underline:!1},slot:"tab:custom"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Question")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.question,callback:function(e){t.question=e},expression:"question"}})],1)],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",group:"securityQuestion",validators:{required:!0,maxLength:64},underline:!1},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Answer")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"securityQuestion"},on:{click:t.addQuestion},slot:"buttons"},[n("translate",[t._v("Add")])],1)],1)},i=[];n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i}))}}]);