(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1404:function(t,e,a){"use strict";a.r(e);var r=a(3140),s=a(2175);for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);var o=a(0),i=a(2921),u=a.n(i),d=Object(o.a)(s.default,r.a,r.b,!1,null,null,null);"function"==typeof u.a&&u()(d),e.default=d.exports},1442:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.validateIPRangeList=e.validateDomain=e.validatePassword=e.validateSubdomain=e.validateUsername=e.validateDBUser=e.validateDatabase=e.validateDNSName=e.validateMXValue=e.validateDNSValue=e.validateFTP=e.validateEmail=e.validateForwarder=void 0;var s=r(a(30)),n=r(a(36)),o=r(a(1443)),i=s.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:s.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:o.default.isValid,message:o.default.getMessage}}),u=i.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});e.validateForwarder=u;var d=i.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});e.validateEmail=d;var c=i.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});e.validateFTP=c;var l=i.extend({params:{type:"dns"},domain:!0,schema:{record:s.default.REQUIRED_STRING}}),p=l.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:s.default.REQUIRED_STRING}});e.validateDNSValue=p;var f=p.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(t){return{value:"10",mx_value:t.value}}});e.validateMXValue=f;var m=l.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:s.default.REQUIRED_STRING,value:null}});e.validateDNSName=m;var v=i.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});e.validateDatabase=v;var _=i.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});e.validateDBUser=_;var A=i.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});e.validateUsername=A;var g=i.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});e.validateSubdomain=g;var h=i.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});e.validatePassword=h;var E=i.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(t){var e=t.value;return{value:n.default.toASCII(e)}}});e.validateDomain=E;var T=i.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});e.validateIPRangeList=T},1443:function(t,e,a){"use strict";a.r(e);var r=a(35);e.default={isValid:function(t){return void 0===t.error},getMessage:function(t){return Object(r.toAppHtml)(t.error||"")}}},1494:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.changePassword=e.updateSettings=e.getSettings=e.deleteAccounts=e.unsuspendAccounts=e.suspendAccounts=e.updateAccount=e.createAccount=e.getAccounts=e.getAccount=void 0;var s=r(a(2)),n=r(a(30));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var i=n.default.get({id:"FTP_ACCOUNT",url:"/CMD_FTP_SHOW",domain:!0,schema:{user:n.default.REQUIRED_STRING}});e.getAccount=i;var u=n.default.get({id:"FTP_ACCOUNTS",url:"/CMD_FTP",response:[],params:{full_json:!0},domain:!0,after:function(t){return t.flow(t.project({accounts:"users",anonLogin:"ANONLOGIN"}),t.mapProp("accounts",t.flow(t.mapValues((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){(0,s.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({login:e},t)})),t.toArray,t.mapArrayProps({suspended:t.convert.toAppBoolean}))))}});e.getAccounts=u;var d=n.default.post({url:"/CMD_FTP",params:{action:"create"},domain:!0,schema:{user:n.default.REQUIRED_STRING,passwd:n.default.REQUIRED_STRING,passwd2:n.default.REQUIRED_STRING,type:n.default.REQUIRED_STRING,custom_val:n.default.OPTIONAL_STRING},notifySuccess:!1});e.createAccount=d;var c=d.extend({params:{action:"modify"},schema:{passwd:n.default.OPTIONAL_STRING,passwd2:n.default.OPTIONAL_STRING}});e.updateAccount=c;var l=n.default.select({url:"/CMD_FTP",domain:!0,params:{action:"delete"},notifySuccess:!1,notifyError:!1}),p=l.extend({params:{suspend:!0}});e.suspendAccounts=p;var f=l.extend({params:{unsuspend:!0}});e.unsuspendAccounts=f;var m=l.extend({params:{delete:!0}});e.deleteAccounts=m;var v=n.default.get({id:"FTP_SETTINGS",url:"/CMD_FTP_SETTINGS",domain:!0,after:function(t){return function(e){return{access:t.convert.toAppBoolean(e.Anonymous),upload:t.convert.toAppBoolean(e.AnonymousUpload),message:t.flow(t.convert.toAppString,t.convert.toAppText)(e.message)}}}});e.getSettings=v;var _=n.default.post({url:"/CMD_FTP_SETTINGS",params:{action:"modify"},domain:!0,schema:{anon:n.default.REQUIRED_BOOL,anonup:n.default.REQUIRED_BOOL,message:n.default.REQUIRED_STRING}});e.updateSettings=_;var A=n.default.post({url:"/CMD_CHANGE_FTP_PASSWORD",schema:{ftp:n.default.REQUIRED_STRING,password1:n.default.REQUIRED_STRING,password2:n.default.REQUIRED_STRING}});e.changePassword=A},2175:function(t,e,a){"use strict";a.r(e);var r=a(2176),s=a.n(r);for(var n in r)"default"!==n&&function(t){a.d(e,t,(function(){return r[t]}))}(n);e.default=s.a},2176:function(t,e,a){"use strict";var r=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(a(15)),n=r(a(16)),o=r(a(2)),i=a(1494),u=a(1442),d=a(44),c=a(7),l=a(656);function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}window.getFolderTree=l.getFolderTree;var f,m={preload:[i.getAccounts,l.getFolderTree],api:[{command:i.getAccounts,bind:"ftp"},{command:l.getFolderTree,bind:"folderTree"}],commands:{validateFTP:u.validateFTP,validatePassword:u.validatePassword},data:function(){return{username:"",password:"",type:"domain",customDir:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){(0,o.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({existingUsers:function(){return this.$api.ftp.accounts.map((function(t){return t.user}))},folders:function(){return this.$api.folderTree.map((function(t){return t.path.replace(/^\//,"")}))}},(0,c.mapTokens)({ftpsep:"FTP_SEP",customDirPrefix:function(t){return"".concat(t.HOME_DIR,"/")}}),{ftpOptions:function(){return[{id:"domain",label:this.$gettext("Domain"),desc:this.$gettext("FTP account with the root directory in the domains home directory (one up from the public_html)")},{id:"ftp",label:this.$gettext("FTP"),desc:this.$gettext("FTP account with the root directory in the domains public_ftp directory")},{id:"user",label:this.$gettext("User"),desc:this.$gettext("FTP account with the root directory as the user name in the public_html directory")},{id:"custom",label:this.$gettext("Custom"),desc:this.$gettext("Please provide custom directory in the field below")}]}}),methods:{createFtpAccount:(f=(0,n.default)(s.default.mark((function t(){var e,a,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.createAccount)({user:this.username,passwd:this.password,passwd2:this.password,type:this.type,custom_val:"".concat(this.customDirPrefix).concat(this.customDir)});case 2:(e=t.sent)instanceof Error||(a=this.$gettext('<table class="table-elem"><tr><td>Login:</td><td>%{ login }</td></tr><tr><td>Password:</td><td>%{ passwd }</td></tr><tr><td>Path:</td><td>%{ path }</td></tr></table>'),r={title:this.$gettext("FTP account created"),content:this.$gettextInterpolate(a,e),extended:!0},this.$notifications.success(r),c.emitter.emit("request:results",r),this.$router.push({name:"user/ftp-accounts"}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),isUserExists:function(t){return!this.existingUsers.includes(t)},copyPassword:function(){var t=this;(0,d.toClipboard)(this.password)&&this.$nextTick((function(){t.$notifications.success({title:"Password copied!"})}))}}};e.default=m},2921:function(t,e){},3140:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"createFtpAccount"},on:{click:t.createFtpAccount},slot:"footer:buttons"},[a("translate",[t._v("Create")])],1),t._v(" "),a("app-page-section",[a("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,isUserExists:t.isUserExists,regex:/^[a-z0-9\-]+$/i,api:t.$commands.validateFTP},vertical:t.$_Client.isPhone}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                FTP Username\n            ")]),t._v(" "),a("input-text",{attrs:{slot:"content",suffix:""+t.ftpsep+t.$p6e.toU(t.$domain)},slot:"content",model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("translate",{attrs:{slot:"error:isUserExists"},slot:"error:isUserExists"},[t._v("\n                User already exists\n            ")]),t._v(" "),a("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[t._v("\n                Wrong username format\n            ")])],1),t._v(" "),a("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,api:t.$commands.validatePassword},vertical:t.$_Client.isPhone}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Enter Password\n            ")]),t._v(" "),a("input-password",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],ref:"password",attrs:{slot:"content","show-generator":""},slot:"content",model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("ui-form-element",{attrs:{underline:!1}},[a("template",{slot:"content"},[a("ui-tabs",{attrs:{radio:"",tabs:t.ftpOptions,selected:t.type},on:{"update:selected":function(e){t.type=e}}},[a("ui-form-element",{attrs:{slot:"tab:custom",underline:!1,"hide-title":t.$_Client.isPhone},slot:"tab:custom"},[t.$_Client.isPhone?t._e():a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Directory\n                        ")]),t._v(" "),a("ui-input-group",{attrs:{slot:"content"},slot:"content"},[a("ui-button",{attrs:{slot:"additions:left",disabled:"disabled"},slot:"additions:left"},[t._v("\n                                "+t._s(t.customDirPrefix)+"\n                            ")]),t._v(" "),a("input-autocomplete",{attrs:{slot:"input",values:t.folders,"suggest-after":3},slot:"input",model:{value:t.customDir,callback:function(e){t.customDir=e},expression:"customDir"}})],1)],1)],1)],1)],2)],1)],1)},s=[];a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}))}}]);