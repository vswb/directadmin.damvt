(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{1397:function(t,e,n){"use strict";n.r(e);var a=n(3133),r=n(2093);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n(2864);var i=n(0),s=n(2866),l=n.n(s),c=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(c),e.default=c.exports},1561:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.validateVacationAccount=e.getVacation=e.deleteVacations=e.modifyVacation=e.createVacation=e.getVacationDefaults=e.getVacations=void 0;var r=a(n(23)),o=a(n(30)),i=function(t){return t.mapProps({custom_reply_headers:t.isEqual("1"),reply_content_types:t.toSelect,reply_encodings:t.toSelect,reply_once_select:t.toSelect})},s=o.default.get({id:"VACATIONS",url:"/CMD_EMAIL_VACATION",domain:!0,pagination:!0,after:function(t){return t.flow((function(t){return{rows:t}}),t.processTableInfo("rows"),t.mapProp("rows",t.flow(t.toArray,t.mapArray(t.flow(t.project({user:"user",start:"time.start_timestamp",end:"time.end_timestamp"}),t.mapProps({start:t.convert.toAppDate,end:t.convert.toAppDate}))))))}});e.getVacations=s;var l=o.default.get({id:"VACATION_DEFAULTS",url:"/CMD_EMAIL_VACATION_CREATE",domain:!0,after:function(t){return t.flow(t.mapProps({ENDDAY:t.toSelect,ENDMONTH:t.toSelect,ENDYEAR:t.toSelect,ENDTIME:t.toSelect,STARTDAY:t.toSelect,STARTMONTH:t.toSelect,STARTYEAR:t.toSelect,STARTTIME:t.toSelect,poplist:t.toSelect}),t.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),t.mapProps({end:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},start:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},headers:i(t)}))}});e.getVacationDefaults=l;var c=o.default.post({url:"/CMD_EMAIL_VACATION",params:{action:"create"},domain:!0,schema:{user:o.default.REQUIRED_STRING,starttime:o.default.REQUIRED_STRING,startday:o.default.REQUIRED_STRING,startmonth:o.default.REQUIRED_STRING,startyear:o.default.REQUIRED_STRING,endtime:o.default.REQUIRED_STRING,endday:o.default.REQUIRED_STRING,endmonth:o.default.REQUIRED_STRING,endyear:o.default.REQUIRED_STRING}});e.createVacation=c;var u=c.extend({params:{action:"modify"}});e.modifyVacation=u;var d=o.default.select({url:"/CMD_EMAIL_VACATION",params:{action:"delete",delete:!0},domain:!0});e.deleteVacations=d;var p=o.default.get({id:"VACATION",url:"/CMD_EMAIL_VACATION_MODIFY",domain:!0,schema:{user:o.default.REQUIRED_STRING},after:function(t){return t.flow(t.mapProps({ENDDAY:t.toSelect,ENDMONTH:t.toSelect,ENDYEAR:t.toSelect,ENDTIME:t.toSelect,STARTDAY:t.toSelect,STARTMONTH:t.toSelect,STARTYEAR:t.toSelect,STARTTIME:t.toSelect}),t.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),t.mapProps({end:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},start:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},text:t.convert.toAppText,headers:i(t)}))}});e.getVacation=p;var f=o.default.get({id:"VACATION_VALIDATION",domain:!0,url:"/CMD_EMAIL_VACATION",schema:{user:o.default.REQUIRED_STRING},before:function(t){return{user:null,comparison1:"equals",value1:t.user}},response:!1,mapResponse:function(t){return"object"!==(0,r.default)(t[0])}});e.validateVacationAccount=f},2093:function(t,e,n){"use strict";n.r(e);var a=n(2094),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e.default=r.a},2094:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(15)),o=a(n(16)),i=a(n(2)),s=n(1561),l=a(n(604)),c=a(n(2095));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var d,p={preload:s.getVacationDefaults,api:[{command:s.getVacationDefaults,bind:"defaults"}],components:{"input-date":c.default},computed:{sameDay:function(){return this.start.getDate()===this.end.getDate()&&this.start.getYear()===this.end.getYear()&&this.start.getMonth()===this.end.getMonth()}},data:function(){return{user:"",text:"",start:new Date,starttime:"",end:new Date,endtime:"",subjectPrefix:"",contentType:"",encoding:"",onceSelect:""}},created:function(){var t=this;Object.assign(this,{user:this.$api.defaults.poplist.value,start:this.$api.defaults.start.date,end:this.$api.defaults.end.date,starttime:this.$api.defaults.start.time.value,endtime:this.$api.defaults.end.time.value}),this.$api.defaults.headers&&this.$api.defaults.headers.custom_reply_headers&&(this.contentType=this.$api.defaults.headers.reply_content_types.value,this.encoding=this.$api.defaults.headers.reply_encodings.value,this.onceSelect=this.$api.defaults.headers.reply_once_select.value),this.$watch("start",(function(e){e>t.end&&(t.end=e)})),this.$watch("starttime",(function(e){t.sameDay&&t.compareTime(e,t.endtime)&&(t.endtime=e),t.$refs.endinput.$validate(t.end)})),this.$watch("endtime",(function(e){t.sameDay&&t.compareTime(t.starttime,e)&&(t.starttime=e),t.$refs.endinput.$validate(t.end)}))},methods:{compareTime:function(t,e){var n=function(t){return{morning:1,afternoon:2,evening:3}[t]};return n(t)>n(e)},toAPIDate:function(t){var e,n=this[t];return e={},(0,i.default)(e,"".concat(t,"time"),this["".concat(t,"time")]),(0,i.default)(e,"".concat(t,"day"),(0,l.default)(n,"dd",{awareOfUnicodeTokens:!0})),(0,i.default)(e,"".concat(t,"month"),(0,l.default)(n,"MM")),(0,i.default)(e,"".concat(t,"year"),(0,l.default)(n,"yyyy",{awareOfUnicodeTokens:!0})),e},requestData:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({user:this.user,text:this.text},this.toAPIDate("start"),{},this.toAPIDate("end"));return this.$api.defaults.headers&&this.$api.defaults.headers.custom_reply_headers&&(t.subject=this.subjectPrefix,t.reply_encoding=this.encoding,t.reply_content_type=this.contentType,t.reply_once_time=this.onceSelect),t},createVacation:(d=(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.createVacation)(this.requestData());case 2:if(!(t.sent instanceof Error)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,(0,s.getVacations)();case 7:this.$router.push({name:"user/email/vacations"});case 8:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),validateTime:function(){return!this.sameDay||this.compareTime(this.endtime,this.starttime)},validateVacationAccount:function(t){return!t||(0,s.validateVacationAccount)({user:t})}}};e.default=p},2099:function(t,e,n){var a=n(2865);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("7c8ecf98",a,!0,{})},2864:function(t,e,n){"use strict";var a=n(2099);n.n(a).a},2865:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,"@media (max-width:767px){.vdp-datepicker__calendar{width:calc(100vw - 4rem);right:0}}","",{version:3,sources:["/home/evo/evolution/node_modules/breakpoint-sass/stylesheets/_breakpoint.scss","/home/evo/evolution/src/js/pages/user/email/vacations/create.vue"],names:[],mappings:"AAgEI,yBCgNJ,0BAEQ,yBACA,OAAQ,CAEf,CAAA",file:"create.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["//////////////////////////////\n// Default Variables\n//////////////////////////////\n$Breakpoint-Settings: (\n  'default media': all,\n  'default feature': min-width,\n  'default pair': width,\n\n  'force all media type': false,\n  'to ems': false,\n  'transform resolutions': true,\n\n  'no queries': false,\n  'no query fallbacks': false,\n\n  'base font size': 16px,\n\n  'legacy syntax': false\n);\n\n$breakpoint: () !default;\n\n//////////////////////////////\n// Imports\n//////////////////////////////\n@import \"breakpoint/settings\";\n@import 'breakpoint/context';\n@import 'breakpoint/helpers';\n@import 'breakpoint/parsers';\n@import 'breakpoint/no-query';\n\n@import 'breakpoint/respond-to';\n\n@import \"breakpoint/legacy-settings\";\n\n//////////////////////////////\n// Breakpoint Mixin\n//////////////////////////////\n\n@mixin breakpoint($query, $no-query: false) {\n  @include legacy-settings-warning;\n\n  // Reset contexts\n  @include private-breakpoint-reset-contexts();\n\n  $breakpoint: breakpoint($query, false);\n\n  $query-string: map-get($breakpoint, 'query');\n  $query-fallback: map-get($breakpoint, 'fallback');\n\n  $private-breakpoint-context-holder: map-get($breakpoint, 'context holder') !global;\n  $private-breakpoint-query-count: map-get($breakpoint, 'query count') !global;\n\n  // Allow for an as-needed override or usage of no query fallback.\n  @if $no-query != false {\n    $query-fallback: $no-query;\n  }\n\n  @if $query-fallback != false {\n    $context-setter: private-breakpoint-set-context('no-query', $query-fallback);\n  }\n\n  // Print Out Query String\n  @if not breakpoint-get('no queries') {\n    @media #{$query-string} {\n      @content;\n    }\n  }\n\n  @if breakpoint-get('no query fallbacks') != false or breakpoint-get('no queries') == true {\n\n    $type: type-of(breakpoint-get('no query fallbacks'));\n    $print: false;\n\n    @if ($type == 'bool') {\n      $print: true;\n    }\n    @else if ($type == 'string') {\n      @if $query-fallback == breakpoint-get('no query fallbacks') {\n        $print: true;\n      }\n    }\n    @else if ($type == 'list') {\n      @each $wrapper in breakpoint-get('no query fallbacks') {\n        @if $query-fallback == $wrapper {\n          $print: true;\n        }\n      }\n    }\n\n    // Write Fallback\n    @if ($query-fallback != false) and ($print == true) {\n      $type-fallback: type-of($query-fallback);\n\n      @if ($type-fallback != 'bool') {\n        #{$query-fallback} & {\n          @content;\n        }\n      }\n      @else {\n        @content;\n      }\n    }\n  }\n\n  @include private-breakpoint-reset-contexts();\n}\n\n\n@mixin mq($query, $no-query: false) {\n  @include breakpoint($query, $no-query) {\n    @content;\n  }\n}\n",'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import "framework";\n\n.vdp-datepicker__calendar {\n    @include phone {\n        width: calc(100vw - 4rem);\n        right: 0;\n    }\n}\n'],sourceRoot:""}])},2866:function(t,e){},3133:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("ui-form-element",{attrs:{group:"vacation",validators:{validateVacationAccount:t.validateVacationAccount}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Account:")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.$api.defaults.poplist.options},slot:"content",model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[n("template",{slot:"additions:right"},[t._v("@"+t._s(t.$domainUnicode))])],2),t._v(" "),n("translate",{attrs:{slot:"error:validateVacationAccount"},slot:"error:validateVacationAccount"},[t._v("\n                Already exists\n            ")])],1),t._v(" "),t.contentType?[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Subject Prefix")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:t.$gettext(": original subject")},slot:"content",model:{value:t.subjectPrefix,callback:function(e){t.subjectPrefix=e},expression:"subjectPrefix"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Encoding")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.$api.defaults.headers.reply_encodings.options},slot:"content",model:{value:t.encoding,callback:function(e){t.encoding=e},expression:"encoding"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Content-Type")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.$api.defaults.headers.reply_content_types.options},slot:"content",model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Frequency")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.$api.defaults.headers.reply_once_select.options},slot:"content",model:{value:t.onceSelect,callback:function(e){t.onceSelect=e},expression:"onceSelect"}})],1)]:t._e(),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Start")]),t._v(" "),n("input-date",{attrs:{slot:"content",min:new Date},slot:"content",model:{value:t.start,callback:function(e){t.start=e},expression:"start"}},[n("input-select",{style:{minWidth:"12rem"},attrs:{slot:"additions:left",options:t.$api.defaults.start.time.options,novalidate:""},nativeOn:{focusin:function(t){t.stopPropagation()}},slot:"additions:left",model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}})],1)],1),t._v(" "),n("ui-form-element",{attrs:{group:"vacation",validators:{validateTime:t.validateTime}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation End")]),t._v(" "),n("input-date",{ref:"endinput",attrs:{slot:"content",min:t.start},slot:"content",model:{value:t.end,callback:function(e){t.end=e},expression:"end"}},[n("input-select",{style:{minWidth:"12rem"},attrs:{slot:"additions:left",options:t.$api.defaults.end.time.options,novalidate:""},nativeOn:{focusin:function(t){t.stopPropagation()}},slot:"additions:left",model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}})],1),t._v(" "),n("translate",{attrs:{slot:"error:validateTime"},slot:"error:validateTime"},[t._v("\n                End time should be larger than start time\n            ")])],1),t._v(" "),n("ui-form-element",{attrs:{group:"vacation",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Message:")]),t._v(" "),n("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Current Server Time:")]),t._v(" "),n("template",{slot:"content"},[t._v("\n                "+t._s(t.$api.defaults.servertime)+"\n            ")])],2)],2),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary",disabled:!t.$valid("vacation")},on:{click:t.createVacation},slot:"footer:buttons"},[n("translate",[t._v("Create")])],1)],1)},r=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}))}}]);