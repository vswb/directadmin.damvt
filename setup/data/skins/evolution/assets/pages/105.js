(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{1412:function(e,t,n){"use strict";n.r(t);var r=n(3148),a=n(2192);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n(2931);var s=n(0),l=n(2933),u=n.n(l),i=Object(s.a)(a.default,r.a,r.b,!1,null,"24dcb4b0",null);"function"==typeof u.a&&u()(i),t.default=i.exports},1562:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getUsageLog=t.resetUses=t.deleteKeys=t.getKey=t.getKeyDefaults=t.modifyKey=t.createUrl=t.createKey=t.getKeys=void 0;var a=r(n(2)),o=r(n(30));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l="/CMD_LOGIN_KEYS",u=o.default.get({id:"LOGIN_KEYS",url:l,pagination:!0,after:function(e){return e.flow(e.moveProp("login_keys","rows"),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArrayProps({expiry:function(t){return"0"!==t?e.convert.toAppDate(t):"never"},uses:e.mapProps({max_uses:e.convert.toAppNumber,uses:e.convert.toAppNumber}),log:e.convert.toAppBoolean}))))}});t.getKeys=u;var i=o.default.post({url:l,schema:{keyname:o.default.REQUIRED_STRING,key:o.default.REQUIRED_STRING,key2:o.default.REQUIRED_STRING,never_expires:o.default.REQUIRED_BOOL,hour:o.default.REQUIRED_STRING,minute:o.default.REQUIRED_STRING,month:o.default.REQUIRED_STRING,day:o.default.REQUIRED_STRING,year:o.default.REQUIRED_STRING,max_uses:o.default.REQUIRED_STRING,clear_key:o.default.REQUIRED_BOOL,allow_htm:o.default.REQUIRED_BOOL,select_allow:o.default.ROWS,select_deny:o.default.ROWS,ips:o.default.OPTIONAL_STRING,passwd:o.default.REQUIRED_STRING}}),c=i.extend({params:{action:"create",type:"key"}});t.createKey=c;var f=o.default.post({url:l,params:{action:"create",type:"one_time_url"},schema:{max_uses:o.default.REQUIRED_STRING,clear_key:o.default.REQUIRED_BOOL,allow_htm:o.default.REQUIRED_BOOL,select_allow:o.default.ROWS,select_deny:o.default.ROWS,ips:o.default.OPTIONAL_STRING,passwd:o.default.REQUIRED_STRING},notifySuccess:!1});t.createUrl=f;var p=i.extend({params:{action:"modify"}});t.modifyKey=p;var y=o.default.get({id:"LOGIN_KEY_DEFAULTS",url:l,params:{action:"show_create"},after:function(e){return e.flow((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table)})}),e.mapProps({allow_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))})),deny_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))})),expiry:e.mapProps({day:e.toSelect,hour:e.toSelect,minute:e.toSelect,month:e.toSelect,year:e.toSelect})}))}});t.getKeyDefaults=y;var d=o.default.get({id:"LOGIN_KEY",url:l,params:{action:"show_modify"},schema:{keyname:o.default.REQUIRED_STRING},after:function(e){return e.flow((function(t){return{values:{allow_htm:e.convert.toAppBoolean(t.data.allow_htm),clear_key:e.convert.toAppBoolean(t.data.clear_key),never_expires:"0"===t.data.expiry,max_uses:t.data.max_uses,allow:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))}))(t.allow_table),deny:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))}))(t.deny_table),hour:e.toSelect(t.expiry.hour).value,minute:e.toSelect(t.expiry.minute).value,day:e.toSelect(t.expiry.day).value,month:e.toSelect(t.expiry.month).value,year:e.toSelect(t.expiry.year).value,ips:t.ips.join("\r\n")},commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table),expiry:{hour:e.toSelect(t.expiry.hour).options,minute:e.toSelect(t.expiry.minute).options,day:e.toSelect(t.expiry.day).options,month:e.toSelect(t.expiry.month).options,year:e.toSelect(t.expiry.year).options}}}))}});t.getKey=d;var m=o.default.select({url:l,params:{delete:!0}});t.deleteKeys=m;var _=o.default.select({url:l,params:{reset:!0}});t.resetUses=_;var v=o.default.get({id:"LOGIN_KEY_USAGE_LOG",url:l,params:{action:"log"},schema:{keyname:o.default.REQUIRED_STRING},after:function(e){return e.flow(e.toArray,e.mapArrayProps({command:function(e){return e.replace("/","")},timestamp:e.convert.toAppDate}))}});t.getUsageLog=v},2192:function(e,t,n){"use strict";n.r(t);var r=n(2193),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=a.a},2193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1562),a={preload:r.getKeys,commands:{getKeys:r.getKeys},data:function(){return{select:[]}},methods:{deleteKeys:function(){(0,r.deleteKeys)({select:this.select}).then(r.getKeys).then(this.$reset)},resetUses:function(){(0,r.resetUses)({select:this.select}).then(r.getKeys).then(this.$reset)}}};t.default=a},2194:function(e,t,n){var r=n(2932);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(5).default)("ebff6384",r,!0,{})},2931:function(e,t,n){"use strict";var r=n(2194);n.n(r).a},2932:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"li[data-v-24dcb4b0]{list-style-type:none}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/login-keys/index.vue"],names:[],mappings:"AAwJA,oBAAK,oBAAqB,CAAA",file:"index.vue?vue&type=style&index=0&id=24dcb4b0&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nli { list-style-type: none; }\n"],sourceRoot:""}])},2933:function(e,t){},3148:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("template",{slot:"header:buttons"},[n("ui-button-link",{attrs:{theme:"primary",name:"user/login-keys/create"}},[n("translate",[e._v("Create")])],1)],1),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({on:{"action:reset":e.resetUses,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:name",fn:function(t){var r=t.name;return n("ui-link",{attrs:{name:"user/login-keys/modify",params:{keyname:r}}},[e._v("\n                "+e._s(r)+"\n            ")])}},{key:"col:expiry",fn:function(t){var r=t.expiry;return["never"===r?n("translate",[e._v("\n                    Never\n                ")]):[e._v("\n                    "+e._s(e._f("date")(r))+"\n                ")]]}},{key:"col:uses",fn:function(t){var r=t.uses;return[r.uses||0===r.uses?[e._v("\n                    "+e._s(r.uses)+" / "+e._s(r.max_uses?r.max_uses:e.$gettext("Unlimited"))+"\n                ")]:r.max_uses?e._e():n("translate",[e._v("\n                    Unlimited\n                ")])]}},{key:"col:allow",fn:function(e){var t=e.allow;return[t.length?n("ui-list",{attrs:{items:t,maxItemsVisible:5}}):n("span")]}},{key:"col:deny",fn:function(e){var t=e.deny;return[t.length?n("ui-list",{attrs:{items:t,maxItemsVisible:5}}):n("span")]}},{key:"col:ips",fn:function(t){var r=t.ips;return n("ul",{},e._l(r,(function(t){return n("li",{domProps:{textContent:e._s(t)}})})),0)}},{key:"row:actions",fn:function(t){var r=t.item;return r.log?n("ui-button-link",{attrs:{theme:"light",size:"small",name:"user/login-keys/log",params:{keyname:r.name}}},[n("translate",[e._v("Log")])],1):e._e()}}],null,!0),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getKeys,rowID:"name",columns:{name:{label:e.$gettext("Key Name"),grow:!0},expiry:e.$gettext("Expiry"),uses:e.$gettext("Uses"),allow:e.$gettext("Allow"),deny:e.$gettext("Deny"),ips:e.$gettext("IPs")},actions:{reset:e.$gettext("Reset Uses"),del:e.$gettext("Delete")},updateOn:["RESET_LOGIN_KEYS_USES","DELETE_LOGIN_KEYS"],verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),n("p",{attrs:{slot:"footer:text"},slot:"footer:text"},[n("translate",[e._v("Login keys allow you to create extra passwords for your account.")]),n("br"),e._v(" "),n("translate",[e._v("However, these passwords have attributes, such as the ability to expire, usage limit, and can be limited to certain functions.")]),n("br"),e._v(" "),n("translate",[e._v("Note that the Login Keys are one-way encrypted, just like passwords. They cannot be retrieved if you forget them.")]),n("br"),e._v(" "),n("translate",[e._v("The login username used will still be your normal DA username.")])],1),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("key","keys",e.select.length)},on:{"click:confirm":e.deleteKeys}})],2)},a=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))}}]);