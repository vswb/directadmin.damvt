(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1324:function(e,t,n){"use strict";n.r(t);var r=n(3063),i=n(1716);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var a=n(0),o=n(2605),l=n.n(o),c=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);"function"==typeof l.a&&l()(c),t.default=c.exports},1716:function(e,t,n){"use strict";n.r(t);var r=n(1717),i=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t.default=i.a},1717:function(e,t,n){"use strict";var r=n(1),i=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(n(2458)),a=i(n(6)),o=r(n(2603)),l=r(n(2604)),c={components:{InfoDialog:o.default,SettingsDialog:l.default},preload:s.getData,api:[{command:s.getData,bind:{"response.domains":"domains","response.settings":"settings"}}],data:function(){return{select:[],currentItem:null,filters:{domain:"",username:"",issuer:""}}},methods:{getData:function(){return this.select.length=0,s.getData()},showInfo:function(e){var t=this;this.currentItem=e,this.$nextTick((function(){return t.$dialog("SSL_INFO_DIALOG").open()}))},hideInfo:function(){this.currentItem=null},makeRequest:function(){s.makeRequest(this.checkedDomains).then(this.getData)}},computed:{sortBy:function(){return function(e){return"issuer"===e?function(e){return e.certificate_info.issuer_simple||""}:a.prop(e)}},usernames:function(){return a.uniq(a.map(a.prop("username"),this.$api.domains))},checkedDomains:function(){return{select:this.select.map(a.prop("domain"))}},domains:function(){var e=this,t=a.when((function(){return a.contains(a.toLower(e.filters.username),e.usernames)}),a.filter((function(t){return a.equals(a.toLower(e.filters.username),a.toLower(t.username))}))),n=a.when((function(){return e.filters.domain}),a.filter((function(t){return a.contains(a.toLower(e.filters.domain),a.toLower(t.domain))}))),r=a.when((function(){return e.filters.issuer}),a.filter((function(t){return a.contains(a.toLower(e.filters.issuer),a.toLower(t.certificate_info.issuer_simple||""))})));return a.pipe(t,n,r)(this.$api.domains)}}};t.default=c},1718:function(e,t,n){"use strict";n.r(t);var r=n(1719),i=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t.default=i.a},1719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={props:{domain:{type:String,required:!0},SSLCACertificateFile:{type:String,required:!1},SSLCertificateFile:{type:String,required:!0},SSLCertificateKeyFile:{type:String,required:!0},certificate_domains:{type:Array,required:!1,default:function(){return[]}},certificate_info:{type:Object,required:!1,default:function(){return{}}}},computed:{hasDomains:function(){return Boolean(this.certificate_domains.length)},hasInfo:function(){return Boolean(Object.keys(this.certificate_info).length)}}};t.default=r},1720:function(e,t,n){"use strict";n.r(t);var r=n(1721),i=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t.default=i.a},1721:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2458)),s={api:[{command:i.getData,bind:{"response.settings":"settings"}}],data:function(){return{admin_ssl_replace_all_expired_invalid:!1,letsencrypt_disable_renew_after_renew_failure:!1,letsencrypt_renewal_error_to_users:!1,letsencrypt_renewal_failure_notice_after_attempt:"5",letsencrypt_renewal_notice_to_admins:!1,letsencrypt_renewal_success_notice:!1,renew_letsencrypt_on_suspended_domain:!1}},methods:{updateSettings:function(){i.saveSettings(this.$data)}},mounted:function(){Object.assign(this,this.$api.settings)}};t.default=s},2458:function(e,t,n){"use strict";var r=n(10),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.makeRequest=t.saveSettings=t.getData=void 0;var s=i(n(2)),a=i(n(17)),o=r(n(6)),l=i(n(30));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u="/CMD_ADMIN_SSL",_=o.equals("1"),f=function(e){return e?"1":"0"},d=l.default.get({id:"ADMIN_SSL_DATA",url:u,mapResponse:{settings:o.pipe(o.prop("settings"),o.evolve({letsencrypt_disable_renew_after_renew_failure:_,letsencrypt_renewal_error_to_users:_,letsencrypt_renewal_notice_to_admins:_,letsencrypt_renewal_success_notice:_,renew_letsencrypt_on_suspended_domain:_,admin_ssl_replace_all_expired_invalid:_})),domains:o.pipe(o.prop("domains"),o.toPairs,o.map((function(e){var t=(0,a.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({domain:t[0]},t[1])})),o.map(o.evolve({ssl:o.equals("ON"),defaultdomain:o.equals("yes"),active:o.equals("yes"),server:o.equals("yes")})))}});t.getData=d;var p=l.default.post({url:u,params:{action:"settings"},schema:{letsencrypt_renewal_notice_to_admins:l.default.REQUIRED_BOOL,letsencrypt_renewal_error_to_users:l.default.REQUIRED_BOOL,renew_letsencrypt_on_suspended_domain:l.default.REQUIRED_BOOL,letsencrypt_renewal_success_notice:l.default.REQUIRED_BOOL,letsencrypt_disable_renew_after_renew_failure:l.default.REQUIRED_BOOL,letsencrypt_renewal_failure_notice_after_attempt:l.default.REQUIRED_STRING,admin_ssl_replace_all_expired_invalid:l.default.REQUIRED_BOOL},before:o.evolve({letsencrypt_renewal_notice_to_admins:f,letsencrypt_renewal_error_to_users:f,renew_letsencrypt_on_suspended_domain:f,letsencrypt_renewal_success_notice:f,letsencrypt_disable_renew_after_renew_failure:f,admin_ssl_replace_all_expired_invalid:f})});t.saveSettings=p;var m=l.default.select({url:u,params:{action:"multiple",request:!0}});t.makeRequest=m},2603:function(e,t,n){"use strict";n.r(t);var r=n(3192),i=n(1718);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var a=n(0),o=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);t.default=o.exports},2604:function(e,t,n){"use strict";n.r(t);var r=n(3193),i=n(1720);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var a=n(0),o=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);t.default=o.exports},2605:function(e,t){},3063:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(t){e.$dialog("ADMIN_SSL_SETTINGS_DIALOG").open()}},slot:"header:buttons"},[n("translate",[e._v("Settings")])],1),e._v(" "),n("app-page-section",[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Show only domains containing")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.filters.domain,callback:function(t){e.$set(e.filters,"domain",t)},expression:"filters.domain"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Filter domains by username: ")]),e._v(" "),n("input-autocomplete",{attrs:{slot:"content",values:e.usernames},slot:"content",model:{value:e.filters.username,callback:function(t){e.$set(e.filters,"username",t)},expression:"filters.username"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Filter domains by issuer:")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.filters.issuer,callback:function(t){e.$set(e.filters,"issuer",t)},expression:"filters.issuer"}})],1),e._v(" "),n("ui-r-table",{attrs:{rows:e.domains,columns:[{id:"domain",label:e.$gettext("Domain")},{id:"username",label:e.$gettext("Username")},{id:"creator",label:e.$gettext("Creator")},{id:"issuer",label:e.$gettext("Issuer")},{id:"active",label:e.$gettext("Active")},{id:"ssl",label:e.$gettext("SSL")}],sortBy:e.sortBy,checkedRows:e.select,disablePagination:""},on:{"update:checkedRows":function(t){e.select=t},"update:checked-rows":function(t){e.select=t}},scopedSlots:e._u([{key:"col:domain",fn:function(t){var r=t.item,i=t.domain;return[n("ui-link",{attrs:{slot:"trigger"},on:{click:function(t){return e.showInfo(r)}},slot:"trigger"},[e._v("\n                    "+e._s(e.$p6e.toU(i))+"\n                ")])]}},{key:"col:username",fn:function(t){var r=t.username;t.active;return[n("ui-link",{attrs:{name:"reseller/users/view",params:{user:r}}},[e._v("\n                    "+e._s(r)+"\n                ")])]}},{key:"col:active",fn:function(t){return[t.active?n("ui-badge",{key:"activeYes",attrs:{theme:"safe"}},[n("translate",[e._v("Yes")])],1):n("ui-badge",{key:"activeNo",attrs:{theme:"danger"}},[n("translate",[e._v("No")])],1)]}},{key:"col:issuer",fn:function(t){return[e._v("\n                "+e._s(t.certificate_info.issuer_simple||"")+"\n            ")]}},{key:"col:ssl",fn:function(t){return[t.ssl?n("ui-badge",{key:"sslOn",attrs:{theme:"safe"}},[n("translate",[e._v("On")])],1):n("ui-badge",{key:"sslOff",attrs:{theme:"danger"}},[n("translate",[e._v("Off")])],1)]}}])},[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:e.makeRequest},slot:"table:actions"},[n("translate",[e._v("Make Request")])],1)],1)],1),e._v(" "),e.currentItem?n("info-dialog",e._b({on:{close:e.hideInfo}},"info-dialog",e.currentItem,!1)):e._e(),e._v(" "),n("settings-dialog")],1)},i=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},3192:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"SSL_INFO_DIALOG",size:"normal",noCloseBtn:""},on:{"dialog:close":function(t){return e.$emit("close")}}},[n("span",{attrs:{slot:"title"},domProps:{textContent:e._s(e.domain)},slot:"title"}),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-table",{attrs:{transposed:"",items:[{ca:e.SSLCACertificateFile,cert:e.SSLCertificateFile,key:e.SSLCertificateKeyFile,domains:e.certificate_domains,issuer:e.certificate_info.Issuer,subject:e.certificate_info.Subject,start:e.certificate_info["Not Before"],end:e.certificate_info["Not After"]}]}},[e.SSLCACertificateFile?n("ui-column",{attrs:{id:"ca",label:e.$gettext("CA Root Certificate")}}):e._e(),e._v(" "),n("ui-column",{attrs:{id:"cert",label:e.$gettext("Certificate")}}),e._v(" "),n("ui-column",{attrs:{id:"key",label:e.$gettext("Certificate Key")}}),e._v(" "),e.hasDomains?n("ui-column",{attrs:{id:"domains",label:e.$gettext("Domains")}},[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{\n                    dir: 'column',\n                }"}]},e._l(e.certificate_domains,(function(t){return n("span",{key:t,domProps:{textContent:e._s(e.$p6e.toU(t))}})})),0)]):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"issuer",label:e.$gettext("Issuer")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"subject",label:e.$gettext("Subject")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"start",label:e.$gettext("Not Before")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"end",label:e.$gettext("Not After")}}):e._e()],1)],1)])},i=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},3193:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"ADMIN_SSL_SETTINGS_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Options")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_notice_to_admins,callback:function(t){e.letsencrypt_renewal_notice_to_admins=t},expression:"letsencrypt_renewal_notice_to_admins"}},[n("translate",[e._v("Notify administrator account on certificate request failures")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_error_to_users,callback:function(t){e.letsencrypt_renewal_error_to_users=t},expression:"letsencrypt_renewal_error_to_users"}},[n("translate",[e._v("Notify users on certificate request failures")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.renew_letsencrypt_on_suspended_domain,callback:function(t){e.renew_letsencrypt_on_suspended_domain=t},expression:"renew_letsencrypt_on_suspended_domain"}},[n("translate",[e._v("Renew certificates on suspended domains")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_success_notice,callback:function(t){e.letsencrypt_renewal_success_notice=t},expression:"letsencrypt_renewal_success_notice"}},[n("translate",[e._v("Notify user on certificate request success")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_disable_renew_after_renew_failure,callback:function(t){e.letsencrypt_disable_renew_after_renew_failure=t},expression:"letsencrypt_disable_renew_after_renew_failure"}},[n("translate",[e._v("Disable auto-renew after certificate request failure")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Number of auto-renew certificate request failures before disabling it")]),e._v(" "),n("input-text",{attrs:{slot:"content",number:"",disabled:!e.letsencrypt_disable_renew_after_renew_failure},slot:"content",model:{value:e.letsencrypt_renewal_failure_notice_after_attempt,callback:function(t){e.letsencrypt_renewal_failure_notice_after_attempt=t},expression:"letsencrypt_renewal_failure_notice_after_attempt"}})],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.admin_ssl_replace_all_expired_invalid,callback:function(t){e.admin_ssl_replace_all_expired_invalid=t},expression:"admin_ssl_replace_all_expired_invalid"}},[n("translate",[e._v("Replace expired/invalid certificates with Let's Encrypt ones")]),e._v(" "),n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("This could replace paid EV certificates")])],1)],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.updateSettings},slot:"buttons"},[e._v("\n        Update\n    ")])],2)},i=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))}}]);