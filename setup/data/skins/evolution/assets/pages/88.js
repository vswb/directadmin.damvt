(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1315:function(n,e,t){"use strict";t.r(e);var r=t(3054),o=t(1691);for(var s in o)"default"!==s&&function(n){t.d(e,n,(function(){return o[n]}))}(s);t(2581);var a=t(0),i=t(2583),l=t.n(i),c=Object(a.a)(o.default,r.a,r.b,!1,null,"6d1d5ed0",null);"function"==typeof l.a&&l()(c),e.default=c.exports},1691:function(n,e,t){"use strict";t.r(e);var r=t(1692),o=t.n(r);for(var s in r)"default"!==s&&function(n){t.d(e,n,(function(){return r[n]}))}(s);e.default=o.a},1692:function(n,e,t){"use strict";var r=t(10),o=t(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(t(17)),a=o(t(15)),i=o(t(16)),l=o(t(2)),c=r(t(2580)),u=t(14),d=o(t(1533));function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function f(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){(0,l.default)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var v,m,h,_={preload:c.getInfo,api:[{command:c.getInfo,bind:"info"}],components:{InputIp:d.default},data:function(){return{checkedRows:[],servers:[],passwd:"",newServer:{ip:"",port:"2222",ssl:!1,user:"",passwd:""}}},computed:{info:function(){return this.$api.info},requestData:function(){var n=this.checkedRows.reduce((function(n,e){var t;return f({},n,(t={},(0,l.default)(t,"port-".concat(e.id),e.port),(0,l.default)(t,"user-".concat(e.id),e.user),(0,l.default)(t,"ssl-".concat(e.id),e.ssl),(0,l.default)(t,"dns-".concat(e.id),e.dns),(0,l.default)(t,"domain_check-".concat(e.id),e.domain_check),(0,l.default)(t,"user_check-".concat(e.id),e.user_check),(0,l.default)(t,"email-".concat(e.id),e.email),(0,l.default)(t,"show_all_users-".concat(e.id),e.show_all_users),t))}),{});return f({passwd:this.passwd,select:this.checkedRows.map((function(n){return n.id}))},n)},actions:function(){return{dns:this.$gettext("Zone Transfer"),domain_check:this.$gettext("Domain Check"),user_check:this.$gettext("User Check"),email:this.$gettext("Email Accounts"),show_all_users:this.$gettext("Show All Users")}}},created:function(){this.servers=u._.cloneDeep(this.info.servers)},methods:{toggleAll:function(){this.checkedRows=this.checkedAll?[]:this.servers.map((function(n){return n.id}))},reloadInfo:(h=(0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.getInfo();case 2:this.servers=u._.cloneDeep(this.info.servers),this.checkedRows=[];case 4:case"end":return n.stop()}}),n,this)}))),function(){return h.apply(this,arguments)}),turnOn:function(){c.turnOn().then(this.reloadInfo)},turnOff:function(){c.turnOff().then(this.reloadInfo)},doAction:(m=(0,i.default)(a.default.mark((function n(e){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.action(f((0,l.default)({},e,!0),this.requestData)).then(this.reloadInfo);case 1:case"end":return n.stop()}}),n,this)}))),function(n){return m.apply(this,arguments)}),addServer:(v=(0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.addServer(this.newServer);case 2:n.sent&&(this.$reset(),this.reloadInfo());case 4:case"end":return n.stop()}}),n,this)}))),function(){return v.apply(this,arguments)}),getActions:function(n){var e=Object.keys(this.actions);return Object.entries(n).filter((function(n){var t=(0,s.default)(n,2),r=t[0],o=t[1];return e.includes(r)&&o})).map((function(n){return(0,s.default)(n,1)[0]}))}}};e.default=_},1693:function(n,e,t){var r=t(2582);"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);(0,t(5).default)("04e67ee8",r,!0,{})},2580:function(n,e,t){"use strict";var r=t(1);Object.defineProperty(e,"__esModule",{value:!0}),e.addServer=e.action=e.turnOff=e.turnOn=e.getInfo=void 0;var o=r(t(2)),s=r(t(30));function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var i="/CMD_MULTI_SERVER",l=s.default.get({id:"MULTI_SERVER",url:i,after:function(n){return n.flow(n.moveProp("CLUSTER_ON","enabled"),n.mapProp("servers",n.flow(n.mapValues(n.flow((function(n,e){return function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){(0,o.default)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n,{id:e})}),n.mapProps({email:n.convert.toAppBoolean,ssl:n.convert.toAppBoolean,dns:n.convert.toAppBoolean,domain_check:n.convert.toAppBoolean,user_check:n.convert.toAppBoolean,show_all_users:n.flow(n.setDefault("no"),n.convert.toAppBoolean)}))),n.toArray)),n.mapProp("enabled",n.convert.toAppBoolean))}});e.getInfo=l;var c=s.default.post({url:i,params:{action:"onoff",on:!0}});e.turnOn=c;var u=s.default.post({url:i,params:{action:"onoff",off:!0}});e.turnOff=u;var d=s.default.post({url:i,params:{action:"multiple"},schema:{passwd:s.default.OPTIONAL_STRING}});e.action=d;var p=s.default.post({url:i,params:{action:"add"},schema:{ip:s.default.REQUIRED_STRING,port:s.default.REQUIRED_STRING,ssl:s.default.REQUIRED_BOOL,user:s.default.REQUIRED_STRING,passwd:s.default.REQUIRED_STRING}});e.addServer=p},2581:function(n,e,t){"use strict";var r=t(1693);t.n(r).a},2582:function(n,e,t){(n.exports=t(4)(!0)).push([n.i,"#multi-server .table-actions[data-v-6d1d5ed0]{font-weight:600}#multi-server .formElement[data-v-6d1d5ed0]{border-bottom-width:0}#multi-server input[type=number][data-v-6d1d5ed0]{width:75px;text-align:center;padding-right:0}#ADD_NEW_SERVER input[type=password][data-v-6d1d5ed0],#ADD_NEW_SERVER input[type=text][data-v-6d1d5ed0]{width:180px}#ADD_NEW_SERVER .inputGroup[data-v-6d1d5ed0]{min-width:16rem}","",{version:3,sources:["/home/evo/evolution/src/js/pages/admin/multi-server.vue"],names:[],mappings:"AAmaA,8CAEQ,eAAgB,CAFxB,4CAKQ,qBAAsB,CAL9B,kDAQQ,WACA,kBACA,eAAgB,CACnB,wGAMG,WAAY,CAHpB,6CAMQ,eAAgB,CAAA",file:"multi-server.vue?vue&type=style&index=0&id=6d1d5ed0&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#multi-server {\n    .table-actions {\n        font-weight: 600;\n    }\n    .formElement {\n        border-bottom-width: 0;\n    }\n    input[type='number'] {\n        width: 75px;\n        text-align: center;\n        padding-right: 0;\n    }\n}\n\n#ADD_NEW_SERVER {\n    input[type='password'],\n    input[type='text'] {\n        width: 180px;\n    }\n    .inputGroup {\n        min-width: 16rem;\n    }\n}\n"],sourceRoot:""}])},2583:function(n,e){},3054:function(n,e,t){"use strict";var r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("app-page",{attrs:{id:"multi-server"}},[t("template",{slot:"header:buttons"},[n.info.enabled?t("ui-button",{attrs:{theme:"safe"},on:{click:function(e){n.$dialog("OFF_CONFIRMATION_DIALOG").open()}}},[t("translate",[n._v("Turn off")])],1):t("ui-button",{attrs:{theme:"safe"},on:{click:n.turnOn}},[t("translate",[n._v("Turn on")])],1),n._v(" "),t("ui-button",{attrs:{theme:"primary"},on:{click:function(e){n.$dialog("ADD_NEW_SERVER").open()}}},[t("translate",[n._v("Add New Server")])],1)],1),n._v(" "),t("app-page-section",[t("ui-r-table",{attrs:{columns:[{id:"id",label:n.$gettext("IP"),grow:!0},{id:"port",label:n.$gettext("Port")},{id:"user",label:n.$gettext("Login")},{id:"ssl",label:n.$gettext("SSL Connection")}],rows:n.servers,"checked-rows":n.checkedRows,"hide-table-actions":"",editable:!1,"vertical-layout":n.$_Client.isPhone},on:{"update:checkedRows":function(e){n.checkedRows=e},"update:checked-rows":function(e){n.checkedRows=e}},scopedSlots:n._u([{key:"col:id",fn:function(e){var t=e.id,r=e.ip;return[r?[n._v("\n                    "+n._s(r)+" ("+n._s(n._f("p6eUnicode")(t))+")\n                ")]:[n._v("\n                    "+n._s(n._f("p6eUnicode")(t))+"\n                ")]]}},{key:"col:port",fn:function(e){var r=e.item;return t("input-text",{attrs:{number:""},model:{value:r.port,callback:function(e){n.$set(r,"port",e)},expression:"item.port"}})}},{key:"col:user",fn:function(e){var r=e.item;return t("input-text",{model:{value:r.user,callback:function(e){n.$set(r,"user",e)},expression:"item.user"}})}},{key:"col:ssl",fn:function(e){var r=e.item;return t("input-checkbox",{model:{value:r.ssl,callback:function(e){n.$set(r,"ssl",e)},expression:"item.ssl"}},[t("translate",[n._v("SSL")])],1)}},{key:"row:actions",fn:function(e){var r=e.item;return t("input-checkable-select",{attrs:{values:n.getActions(r),options:{dns:n.$gettext("Zone Transfer"),domain_check:n.$gettext("Domain Check"),user_check:n.$gettext("User Check"),email:n.$gettext("Email Accounts"),show_all_users:n.$gettext("Show All Users")},"show-toggle-all":!1},on:{check:function(n){r[n.value]=n.state}}},[t("translate",{attrs:{slot:"label"},slot:"label"},[n._v("\n                    Actions\n                ")])],1)}}])},[n._v(" "),n._v(" "),n._v(" "),n._v(" "),n._v(" "),n.checkedRows.length?t("div",{directives:[{name:"flex",rawName:"v-flex",value:{main:"end",cross:"center"},expression:"{ main: 'end', cross: 'center' }"}],staticClass:"table-actions",attrs:{slot:"table:after"},slot:"table:after"},[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("ui-form-element",[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                            With Selected\n                        ")]),n._v(" "),t("input-password",{attrs:{slot:"content",placeholder:n.$gettext("Set Password (optional)")},slot:"content",model:{value:n.passwd,callback:function(e){n.passwd=e},expression:"passwd"}})],1),n._v(" "),t("ui-form-element",[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{main:"end"},expression:"{ main: 'end' }"},{name:"gutter",rawName:"v-gutter",value:[null,.5],expression:"[null, 0.5]"}],attrs:{slot:"content"},slot:"content"},[t("ui-button",{attrs:{theme:"safe"},on:{click:function(e){return n.doAction("save")}}},[t("translate",[n._v("Save")])],1),n._v(" "),t("ui-button",{attrs:{theme:"primary"},on:{click:function(e){return n.doAction("test")}}},[t("translate",{attrs:{"translate-n":n.checkedRows.length,"translate-plural":"Test Connections"}},[n._v("\n                                    Test Connection\n                                ")])],1),n._v(" "),t("ui-button",{attrs:{theme:"danger"},on:{click:function(e){n.$dialog("DELETE_SERVERS_DIALOG").open()}}},[t("translate",[n._v("Delete")])],1)],1)])],1)]):n._e()])],1),n._v(" "),n.info.enabled?n._e():t("app-page-section",[t("translate",[n._v("\n            Multi Server is currently turned OFF\n        ")])],1),n._v(" "),t("ui-dialog-confirm",{attrs:{id:"OFF_CONFIRMATION_DIALOG"},on:{"click:confirm":n.turnOff}},[t("translate",[n._v("\n            Are you sure you want to disable this feature?\n        ")])],1),n._v(" "),t("ui-dialog-delete-items",{attrs:{id:"DELETE_SERVERS_DIALOG",subject:n.$ngettext("server","server",n.checkedRows.length)},on:{"click:confirm":function(e){return n.doAction("delete")}}}),n._v(" "),t("ui-dialog",{attrs:{id:"ADD_NEW_SERVER"}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n            Add New Server\n        ")]),n._v(" "),t("div",{attrs:{slot:"content"},slot:"content"},[t("ui-tabs",{attrs:{tabs:[{id:"ip",desc:"IP Address"},{id:"domain",desc:"Domain"}]},on:{"update:selected":function(e){n.newServer.ip=""}}},[t("ui-form-element",{key:"tab:ip",attrs:{slot:"tab:ip",vertical:"",group:"server",validators:{required:!0,regex:n.regexps.ip}},slot:"tab:ip"},[t("input-ip",{attrs:{slot:"content"},slot:"content",model:{value:n.newServer.ip,callback:function(e){n.$set(n.newServer,"ip",e)},expression:"newServer.ip"}}),n._v(" "),t("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[n._v("\n                        Should be a valid IP Address\n                    ")])],1),n._v(" "),t("ui-form-element",{key:"tab:domain",attrs:{slot:"tab:domain",vertical:"",group:"server",validators:{required:!0,domain:!0}},slot:"tab:domain"},[t("input-text",{attrs:{slot:"content"},slot:"content",model:{value:n.newServer.ip,callback:function(e){n.$set(n.newServer,"ip",e)},expression:"newServer.ip"}})],1)],1),n._v(" "),t("ui-form-element",{attrs:{vertical:"",group:"server",validators:{required:!0,regex:n.regexps.port}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                    Port\n                ")]),n._v(" "),t("ui-input-group",{attrs:{slot:"content"},slot:"content"},[t("input-text",{attrs:{slot:"input"},slot:"input",model:{value:n.newServer.port,callback:function(e){n.$set(n.newServer,"port",e)},expression:"newServer.port"}}),n._v(" "),t("ui-button",{attrs:{slot:"additions:right"},on:{click:function(e){n.newServer.ssl=!n.newServer.ssl}},slot:"additions:right"},[t("input-checkbox",{model:{value:n.newServer.ssl,callback:function(e){n.$set(n.newServer,"ssl",e)},expression:"newServer.ssl"}},[t("translate",[n._v("SSL")])],1)],1)],1),n._v(" "),t("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[n._v("\n                    Should be a valid port number\n                ")])],1),n._v(" "),t("ui-form-element",{attrs:{vertical:"",group:"server",validators:{required:!0,regex:/^[a-zA-Z]+\w*$/}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                    Username\n                ")]),n._v(" "),t("input-text",{attrs:{slot:"content"},slot:"content",model:{value:n.newServer.user,callback:function(e){n.$set(n.newServer,"user",e)},expression:"newServer.user"}}),n._v(" "),t("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[n._v("\n                    Invalid username\n                ")])],1),n._v(" "),t("ui-form-element",{attrs:{vertical:"",group:"server",validators:{required:!0}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                    Password\n                ")]),n._v(" "),t("input-password",{attrs:{slot:"content",type:"text"},slot:"content",model:{value:n.newServer.passwd,callback:function(e){n.$set(n.newServer,"passwd",e)},expression:"newServer.passwd"}})],1)],1),n._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"safe",disabled:!n.$valid("server")},on:{click:n.addServer},slot:"buttons"},[t("translate",[n._v("Add")])],1)],1)],2)},o=[];t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return o}))}}]);