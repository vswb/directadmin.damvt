(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1376:function(e,t,a){"use strict";a.r(t);var n=a(3112),i=a(2018);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var r=a(0),s=a(2811),l=a.n(s),u=Object(r.a)(i.default,n.a,n.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},1442:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateIPRangeList=t.validateDomain=t.validatePassword=t.validateSubdomain=t.validateUsername=t.validateDBUser=t.validateDatabase=t.validateDNSName=t.validateMXValue=t.validateDNSValue=t.validateFTP=t.validateEmail=t.validateForwarder=void 0;var i=n(a(30)),o=n(a(36)),r=n(a(1443)),s=i.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:i.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:r.default.isValid,message:r.default.getMessage}}),l=s.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=l;var u=s.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=u;var d=s.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=d;var c=s.extend({params:{type:"dns"},domain:!0,schema:{record:i.default.REQUIRED_STRING}}),m=c.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:i.default.REQUIRED_STRING}});t.validateDNSValue=m;var f=m.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=f;var p=c.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:i.default.REQUIRED_STRING,value:null}});t.validateDNSName=p;var v=s.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=v;var _=s.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=_;var D=s.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=D;var A=s.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=A;var b=s.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=b;var E=s.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:o.default.toASCII(t)}}});t.validateDomain=E;var g=s.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=g},1443:function(e,t,a){"use strict";a.r(t);var n=a(35);t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return Object(n.toAppHtml)(e.error||"")}}},2018:function(e,t,a){"use strict";a.r(t);var n=a(2019),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},2019:function(e,t,a){"use strict";var n=a(10),i=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(2)),r=n(a(2462)),s=a(7),l=i(a(2810));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var d={preload:r.getPointers,components:{CreateDomainPointerDialog:l.default},commands:r,api:[{command:r.getPointers,bind:"pointers"}],data:function(){return{select:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,s.mapTokens)({dnsControl:"USERDNSCONTROL"}),{pointersCount:function(){return this.$api.pointers.rowsCount}}),watch:{$domain:function(){r.getPointers()}},methods:{submitCommand:function(e){e({select:this.select}).then(this.$reloadApiTable)},deletePointers:function(){this.submitCommand(r.deletePointers)},setRemote:function(){this.submitCommand(r.setRemote)},setLocal:function(){this.submitCommand(r.setLocal)}}};t.default=d},2020:function(e,t,a){"use strict";a.r(t);var n=a(2021),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},2021:function(e,t,a){"use strict";var n=a(10),i=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=i(a(15)),s=i(a(16)),l=n(a(2462)),u={data:function(){return{from:"",alias:!0}},commands:{validateDomain:a(1442).validateDomain},methods:{createDomainPointer:(o=(0,s.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.$p6e.toA(this.from))!==this.from&&this.$notifications.info({title:this.$gettext("Source domain name punycoded"),content:this.$gettext("Source domain name has been automatically converted to punycode format. Punycode is used to encode internationalized domain names (IDN) by converting Unicode characters to ASCII.")}),e.next=4,l.createPointer({from:t,alias:this.alias});case 4:e.sent&&(this.$reset(),this.$emit("create"));case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}};t.default=u},2462:function(e,t,a){"use strict";a.r(t),a.d(t,"getAppPointers",(function(){return s})),a.d(t,"getPointers",(function(){return l})),a.d(t,"createPointer",(function(){return u})),a.d(t,"deletePointers",(function(){return d})),a.d(t,"setLocal",(function(){return c})),a.d(t,"setRemote",(function(){return m}));var n=a(30),i=a.n(n),o=a(6),r=a(35),s=o.pipe(o.prop("domain_pointers"),Object(r.toTable)((function(e){return{domain_pointer:e.domain_pointer,type:e.type,mail:"yes"===e.local_mail?"local":"remote"}}))),l=i.a.get({id:"DOMAIN_POINTERS",url:"/CMD_DOMAIN_POINTER",domain:!0,pagination:!0,mapResponse:s}),u=i.a.post({url:"/CMD_DOMAIN_POINTER",params:{action:"add"},domain:!0,schema:{from:i.a.REQUIRED_STRING,alias:i.a.REQUIRED_BOOL}}),d=i.a.select({url:"/CMD_DOMAIN_POINTER",params:{action:"delete"},domain:!0}),c=d.extend({params:{local_mail:!0}}),m=d.extend({params:{remote_mail:!0}})},2810:function(e,t,a){"use strict";a.r(t);var n=a(3237),i=a(2020);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var r=a(0),s=Object(r.a)(i.default,n.a,n.b,!1,null,null,null);t.default=s.exports},2811:function(e,t){},3112:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",theme:"safe",token:"USERPOINTERSMAX",usage:e.pointersCount},on:{click:function(t){e.$dialog("CREATE_DOMAIN_POINTER_DIALOG").open()}},slot:"header:buttons"},[a("translate",[e._v("Create Domain Pointer")]),e._v(" "),a("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n            Pointers limit reached\n        ")])],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({ref:"table",attrs:{editable:!1,"vertical-layout":e.$_Client.isPhone},on:{"action:del":function(t){e.$dialog("DELETE_DOMAIN_POINTERS").open()},"action:setLocal":e.setLocal,"action:setRemote":e.setRemote},scopedSlots:e._u([{key:"col:type",fn:function(t){var n=t.type;return a("ui-badge",{attrs:{theme:"primary",size:"small"}},[e._v("\n                "+e._s("alias"===n?e.$gettext("Alias"):e.$gettext("Pointer"))+"\n            ")])}},{key:"col:mail",fn:function(t){var a=t.mail;return[e._v("\n                "+e._s("local"===a?e.$gettext("Yes"):e.$gettext("No"))+"\n            ")]}},{key:"col:dns",fn:function(t){var n=t.domain_pointer;return e.dnsControl?a("ui-link",{attrs:{name:"user/dns",query:{pointer:n}}},[e._v("\n                "+e._s("user"===e.$state.app.user.level?e.$gettext("View"):e.$gettext("Manage"))+"\n            ")]):e._e()}}],null,!0),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getPointers,rowID:"domain_pointer",columns:{domain_pointer:{label:e.$gettext("Domain Pointer"),filter:"p6eUnicode"},type:e.$gettext("Type"),mail:e.$gettext("Local Mail"),dns:e.$gettext("DNS")},actions:{del:e.$gettext("Delete"),setLocal:e.$gettext("Set Local Mail"),setRemote:e.$gettext("Set Remote Mail")}},!1))],1),e._v(" "),a("create-domain-pointer-dialog",{on:{create:e.$reloadApiTable}}),e._v(" "),a("ui-dialog-delete-items",{attrs:{id:"DELETE_DOMAIN_POINTERS",subject:e.$ngettext("Domain Pointer","Domain Pointers",e.select.length)},on:{"click:confirm":e.deletePointers}})],1)},i=[];a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))},3237:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"CREATE_DOMAIN_POINTER_DIALOG",theme:"safe"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add New Domain Pointer")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"domainPointer",validators:{required:!0,api:e.$commands.validateDomain},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Source Domain")]),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("eg. sourcedomain.com")]),e._v(" "),a("input-text",{attrs:{slot:"content",prefix:"http://www."},slot:"content",model:{value:e.from,callback:function(t){e.from=t},expression:"from"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Target Domain")]),e._v(" "),a("input-text",{attrs:{slot:"content",disabled:"",value:e.$domainUnicode},slot:"content"})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.alias,callback:function(t){e.alias=t},expression:"alias"}},[a("translate",[e._v("Create as an Alias")])],1)],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"domainPointer"},on:{click:e.createDomainPointer},slot:"buttons"},[a("translate",[e._v("Create")])],1)],2)},i=[];a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))}}]);