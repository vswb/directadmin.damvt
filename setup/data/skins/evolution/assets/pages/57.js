(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1320:function(e,t,n){"use strict";n.r(t);var a=n(3059),r=n(1706);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);var i=n(0),o=n(2594),l=n.n(o),u=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},1470:function(e,t,n){"use strict";n.r(t);var a=n(1471),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},1471:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),s=n(1478),i=n(14);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={api:[{command:s.getPackage,bind:"package"}],props:{package:{type:String,required:!1,default:"newpackage"}},data:function(){return{limits:[],features:[],customItems:[],dns:"OFF",serverip:!0,ips:"0",homeOverride:{value:"",options:{}}}},computed:{processedData:function(){return l({},i._.reduce(this.limits,(function(e,t,n){var a;return l({},e,(a={},(0,r.default)(a,n,["bandwidth","quota"].includes(n)?String(t.value/Math.pow(2,20)):t.value),(0,r.default)(a,"u".concat(n),t.unlimited||null),a))}),{}),{},i._.reduce(this.customItems,(function(e,t){return l({},e,(0,r.default)({},t.name,!0===t.value?"ON":t.value))}),{}),{},i._.mapValues(this.features,(function(e){return e?"ON":null})),{serverip:this.serverip?"ON":null,dns:this.dns,ips:this.ips,create_user_home_override:this.canOverrideHome?this.homeOverride.value:null})},canOverrideHome:function(){return this.homeOverride&&!!Object.keys(this.homeOverride.options).length}},methods:{checkEmptyness:function(e){e.value||(e.unlimited=!0)}},watch:{processedData:function(e){this.$emit("update",e)}},created:function(){this.limitLabels={bandwidth:this.$gettext("Bandwidth"),quota:this.$gettext("Disk Space"),inode:this.$state.app.tokens.HAVE_INODE?this.$gettext("Inode"):void 0,vdomains:this.$gettext("Domains"),nsubdomains:this.$gettext("Sub-Domains"),nemails:this.$gettext("E-mail Accounts"),nemailf:this.$gettext("E-mail Forwarders"),nemailml:this.$gettext("Mailing Lists"),nemailr:this.$gettext("Autoresponders"),mysql:this.$gettext("MySQL Databases"),domainptr:this.$gettext("Domain Pointers"),ftp:this.$gettext("FTP Accounts"),nusers:this.$gettext("User Accounts")},this.featureLabels={aftp:this.$gettext("Anonymous FTP Accounts"),cgi:this.$gettext("CGI Access"),php:this.$gettext("PHP Access"),spam:this.$gettext("SpamAssassin"),catchall:this.$gettext("Catch-All E-mail"),ssl:this.$gettext("SSL Access"),ssh:this.$gettext("SSH Access"),userssh:this.$gettext("SSH Access for Users"),oversell:this.$gettext("Allow Overselling"),cron:this.$gettext("Cron Jobs"),sysinfo:this.$gettext("System Info"),login_keys:this.$gettext("Login Keys"),dnscontrol:this.$gettext("DNS Control")};var e=this.$api.package;this.limits=i._.cloneDeep(e.limits),this.features=i._.cloneDeep(e.features),this.customItems=i._.cloneDeep(e.customItems),this.ips=e.ips||0,this.homeOverride=i._.cloneDeep(e.homeOverride),this.serverip=e.features.serverip,this.dns=e.dns,null===this.package&&(this.limits.bandwidth.value*=Math.pow(2,20),this.limits.quota.value*=Math.pow(2,20))}};t.default=u},1472:function(e,t,n){var a=n(1550);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5).default)("24b7c642",a,!0,{})},1478:function(e,t,n){"use strict";var a=n(10),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.doPackageAction=t.updatePackage=t.getPackage=t.importPackages=t.exportPackages=t.deletePackages=t.getPackages=void 0;var s=r(n(2)),i=r(n(30));a(n(6));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u="/CMD_MANAGE_RESELLER_PACKAGES",c=i.default.get({id:"RESELLER_PACKAGES",url:u,params:{bytes:!0},pagination:!0,after:function(e){return e.toTable(e.mapArrayProps({bandwidth:e.convert.toAppLimit,quota:e.convert.toAppLimit,ips:function(t){return e.convert.toAppNumber(t||"0")}}))}});t.getPackages=c;var d=i.default.post({url:u,schema:{select:i.default.ROWS},before:function(e){return e.select.reduce((function(e,t,n){return l({},e,(0,s.default)({},"delete".concat(n),t))}),{delete:!0})}});t.deletePackages=d;var p=i.default.post({url:u,params:{export:!0},schema:{select:i.default.ROWS}});t.exportPackages=p;var f=i.default.post({url:u,params:{action:"import"},schema:{import:i.default.REQUIRED_STRING}});t.importPackages=f;var m=i.default.get({url:"/CMD_SHOW_RESELLER_PACKAGE",id:"RESELLER_PACKAGE",params:{bytes:!0},query:{package:i.default.REQUIRED_STRING},after:function(e){return e.flow((function(e){return{data:e}}),e.moveProp({"data.ips":"ips","data.custom_items":"customItems","data.have_inode":"haveInode","data.dns":"dns","data.ip":"ip","data.create_user_home_override":"homeOverride"}),e.mapProps({homeOverride:e.flow((function(e){return e||{}}),e.toSelect),customItems:e.flow(e.toArray,e.mapArray((function(t){var n={type:t.type,description:t.desc,label:t.string,name:t.name};switch(t.type){case"checkbox":return l({},n,{value:"yes"===t.checked});case"text":return l({},n,{value:t.value});case"listbox":return l({},n,{value:Object.values(t.select).find((function(e){return e.selected})).value,options:e.reduce((function(e,t){return l({},e,(0,s.default)({},t.value,t.text))}))(t.select)});default:return!1}})),(function(e){return e.filter((function(e){return!!e}))})),haveInode:e.convert.toAppBoolean,dns:e.getProp("value"),ip:e.getProp("value"),ips:e.convert.toAppNumber,features:e.feedWith(1,e.flow(e.getProp("data"),e.filter(e.flow(e.getProp("type"),e.isEqual("checkbox"))),e.mapValues(e.flow(e.getProp("checked"),e.convert.toAppBoolean)))),limits:e.feedWith(1,e.flow(e.getProp("data"),e.filter(e.flow(e.getProp("type"),e.isEqual("unlimited"))),e.mapValues((function(t){var n=e.convert.toAppLimit(t.value)===1/0;return{value:n?"":t.value,unlimited:n}}))))}),e.deleteProp("data"))}});t.getPackage=m;var v=i.default.post({url:u,params:{add:!0},schema:{bandwidth:i.default.OPTIONAL_STRING,ubandwidth:i.default.OPTIONAL_BOOL,quota:i.default.OPTIONAL_STRING,uquota:i.default.OPTIONAL_BOOL,inode:i.default.OPTIONAL_STRING,uinode:i.default.OPTIONAL_BOOL,vdomains:i.default.OPTIONAL_STRING,uvdomains:i.default.OPTIONAL_BOOL,nsubdomains:i.default.OPTIONAL_STRING,unsubdomains:i.default.OPTIONAL_BOOL,nemails:i.default.OPTIONAL_STRING,unemails:i.default.OPTIONAL_BOOL,nemailf:i.default.OPTIONAL_STRING,unemailf:i.default.OPTIONAL_BOOL,nemailml:i.default.OPTIONAL_STRING,unemailml:i.default.OPTIONAL_BOOL,nemailr:i.default.OPTIONAL_STRING,unemailr:i.default.OPTIONAL_BOOL,mysql:i.default.OPTIONAL_STRING,umysql:i.default.OPTIONAL_BOOL,domainptr:i.default.OPTIONAL_STRING,udomainptr:i.default.OPTIONAL_BOOL,ftp:i.default.OPTIONAL_STRING,uftp:i.default.OPTIONAL_BOOL,aftp:i.default.OPTIONAL_STRING,cgi:i.default.OPTIONAL_STRING,php:i.default.OPTIONAL_STRING,spam:i.default.OPTIONAL_STRING,catchall:i.default.OPTIONAL_STRING,ssl:i.default.OPTIONAL_STRING,ssh:i.default.OPTIONAL_STRING,userssh:i.default.OPTIONAL_STRING,oversell:i.default.OPTIONAL_STRING,cron:i.default.OPTIONAL_STRING,sysinfo:i.default.OPTIONAL_STRING,login_keys:i.default.OPTIONAL_STRING,dnscontrol:i.default.OPTIONAL_STRING,dns:i.default.REQUIRED_STRING,serverip:i.default.OPTIONAL_STRING,packagename:i.default.OPTIONAL_STRING,create_user_home_override:i.default.OPTIONAL_STRING,nusers:i.default.OPTIONAL_STRING,unusers:i.default.OPTIONAL_BOOL}});t.updatePackage=v;var O=i.default.post({url:u,schema:{action:i.default.REQUIRED_STRING,from:i.default.REQUIRED_STRING,to:i.default.REQUIRED_STRING},before:function(e){return{from:null,to:null,old_package:e.from,new_package:e.to}}});t.doPackageAction=O},1548:function(e,t,n){"use strict";n.r(t);var a=n(1566),r=n(1470);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n(1549);var i=n(0),o=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);t.default=o.exports},1549:function(e,t,n){"use strict";var a=n(1472);n.n(a).a},1550:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,".reseller-package input[type=text]{width:1px}","",{version:3,sources:["/home/evo/evolution/src/js/pages/admin/reseller-packages/_components/reseller-package.vue"],names:[],mappings:"AAsOA,mCACyB,SAAU,CAAA",file:"reseller-package.vue?vue&type=style&index=0&lang=scss&",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.reseller-package {\n    input[type="text"] { width: 1px; }\n}\n'],sourceRoot:""}])},1566:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reseller-package"},[e._l(e.limitLabels,(function(t,a){return t&&e.limits[a]?n("ui-form-element",{key:a},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t))]),e._v(" "),n(["bandwidth","quota"].includes(a)?"input-size":"input-text",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],tag:"component",attrs:{slot:"content",disabled:e.limits[a].unlimited,number:""},on:{blur:function(t){return e.checkEmptyness(e.limits[a])}},slot:"content",model:{value:e.limits[a].value,callback:function(t){e.$set(e.limits[a],"value",t)},expression:"limits[key].value"}},[n("ui-button",{attrs:{slot:"additions:right",tabindex:"-1"},on:{click:function(t){e.limits[a].unlimited=!e.limits[a].unlimited}},slot:"additions:right"},[n("input-checkbox",{attrs:{label:e.$gettext("Unlimited")},model:{value:e.limits[a].unlimited,callback:function(t){e.$set(e.limits[a],"unlimited",t)},expression:"limits[key].unlimited"}})],1)],1)],1):e._e()})),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IPs")]),e._v(" "),n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.ips,callback:function(t){e.ips=t},expression:"ips"}})],1),e._v(" "),e._l(e.featureLabels,(function(t,a){return t&&void 0!==e.features[a]?n("ui-form-element",{key:a,class:{dimmed:!e.features[a]},attrs:{verticalOnPhone:!1,reverse:e.$_Client.isPhone}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t))]),e._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.features[a],callback:function(t){e.$set(e.features,a,t)},expression:"features[key]"}})],1):e._e()})),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Personal DNS's")]),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{type:"radio",value:"OFF"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[n("translate",[e._v("None")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:"TWO"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[n("translate",[e._v("Uses 2 IP's, domain uses one of them")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:"Three"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[n("translate",[e._v("Uses 3 IP's, domain gets own IP")])],1)],1)],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Share Server IP")]),e._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.serverip,callback:function(t){e.serverip=t},expression:"serverip"}},[n("translate",[e._v("Allow Reseller to create sites with server IP")])],1)],1),e._v(" "),e.canOverrideHome?n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Home Directory")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("input-select",{attrs:{options:e.homeOverride.options},model:{value:e.homeOverride.value,callback:function(t){e.$set(e.homeOverride,"value",t)},expression:"homeOverride.value"}})],1)],1):e._e(),e._v(" "),e._l(e.customItems,(function(t){return n("ui-form-element",{key:t.name},[n("span",{attrs:{slot:"title"},domProps:{textContent:e._s(t.label)},slot:"title"}),e._v(" "),"checkbox"===t.type?n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"customItem.value"}},[e._v("\n            "+e._s(t.description)+"\n        ")]):n("text"===t.type?"input-text":"input-select",{tag:"component",attrs:{slot:"content",options:"listbox"===t.type?t.options:[]},slot:"content",model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"customItem.value"}},[n("ui-button",{attrs:{slot:"additions:right"},slot:"additions:right"},[e._v("\n                "+e._s(t.description)+"\n            ")])],1)],1)}))],2)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},1706:function(e,t,n){"use strict";n.r(t);var a=n(1707),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},1707:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),s=a(n(16)),i=a(n(2)),o=n(1478),l=a(n(1548));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var c,d={preload:[function(){return(0,o.getPackage)({package:null})},o.getPackages],api:[{command:o.getPackages,bind:"packages"}],components:{ResellerPackage:l.default},data:function(){return{packageName:"",packageData:""}},computed:{requestData:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({packagename:this.packageName},this.packageData)},packages:function(){return this.$api.packages.rows.map((function(e){return e.package}))}},methods:{validateName:function(e){return!this.packages.includes(e)},createPackage:(c=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.updatePackage)(this.requestData);case 2:e.sent&&this.$router.push({name:"admin/reseller-packages"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})}};t.default=d},2594:function(e,t){},3059:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("translate",{attrs:{slot:"page:title"},slot:"page:title"},[e._v("Create Reseller Package")]),e._v(" "),n("app-page-section",[n("reseller-package",{attrs:{package:null},on:{update:function(t){e.packageData=t}}}),e._v(" "),n("ui-form-element",{attrs:{group:"resellerPackage",validators:{required:!0,validateName:e.validateName,regex:/^[a-zA-Z0-9\-\_]+$/,maxLength:20}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Package Name")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}}),e._v(" "),n("translate",{attrs:{slot:"error:validateName"},slot:"error:validateName"},[e._v("Reseller package with such name exists already and will be overwritten.")]),e._v(" "),n("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Package Name should not contain any special symbols\n            ")])],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"safe",validateGroup:"resellerPackage"},on:{click:e.createPackage},slot:"footer:buttons"},[n("translate",[e._v("Create")])],1)],1)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))}}]);