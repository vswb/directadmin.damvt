(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1369:function(e,t,a){"use strict";a.r(t);var s=a(3105),r=a(1988);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var o=a(0),l=a(2790),i=a.n(l),u=Object(o.a)(r.default,s.a,s.b,!1,null,null,null);"function"==typeof i.a&&i()(u),t.default=u.exports},1460:function(e,t,a){"use strict";var s=a(10),r=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginPMAStatus=t.globalLoginPMA=t.loginPMA=t.setUserPrivs=t.getUserPrivs=t.changeUserPassword=t.assignUser=t.addUser=t.deleteAccessHost=t.addAccessHost=t.deleteUsers=t.getDatabase=t.uploadBackup=t.deleteDatabase=t.optimizeDatabase=t.checkDatabase=t.repairDatabase=t.getDatabases=t.createDatabase=t.getUsers=void 0;var n=r(a(30)),o=s(a(6)),l=n.default.get({id:"DB_USERS",url:"/CMD_DB_CREATE",domain:!0,mapResponse:{users:o.pipe(o.omit(["MAX_DB_LENGTH","MAX_DB_USER_LENGTH"]),o.values,o.filter((function(e){return"..."!==e.text})),o.map((function(e){return{value:e.value,label:e.text}}))),max_db_length:o.prop("MAX_DB_LENGTH"),max_db_user_length:o.prop("MAX_DB_USER_LENGTH")}});t.getUsers=l;var i=n.default.post({url:"/CMD_DB",params:{action:"create"},domain:!0,schema:{name:n.default.REQUIRED_STRING,user:n.default.REQUIRED_STRING,passwd:n.default.OPTIONAL_STRING,passwd2:n.default.OPTIONAL_STRING,userlist:n.default.OPTIONAL_STRING},after:function(e){return e.mapProp("result",e.convert.toAppHtml)},updateTokens:!0});t.createDatabase=i;var u=n.default.get({id:"DATABASES",url:"/CMD_DB",domain:!0,pagination:!0,after:function(e){return e.mapProps({databases:e.toTable(e.mapArrayProps({nusers:e.convert.toAppNumber,size:e.convert.toAppNumber})),HAVE_ONE_CLICK_PMA_LOGIN:e.convert.toAppBoolean,total_usage:e.convert.toAppNumber,dbs_select:e.toSelect})}});t.getDatabases=u;var d=n.default.select({url:"/CMD_DB",domain:!0,params:{json:!0}}),c=d.extend({params:{repair:!0}});t.repairDatabase=c;var p=d.extend({params:{check:!0}});t.checkDatabase=p;var f=d.extend({params:{optimize:!0}});t.optimizeDatabase=f;var m=d.extend({params:{delete_db:!0},updateTokens:!0});t.deleteDatabase=m;var b=n.default.post({url:"/CMD_DB",params:{action:"restore",method:"default"},domain:!0,schema:{name:n.default.REQUIRED_STRING,dbuser:n.default.REQUIRED_STRING,dbpass:n.default.REQUIRED_STRING,file:{type:File,required:!0}},before:function(e){return{file1:e.file,file:null}},transport:FormData,continous:!0});t.uploadBackup=b;var _=n.default.get({id:"DB_VIEW",url:"/CMD_DB_VIEW",params:{page:1,ipp:9999},domain:!0,schema:{name:n.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({hosts:"access_hosts",users:"db_users",pmaLogin:"HAVE_ONE_CLICK_PMA_LOGIN"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("User"))),hosts:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("Access Hosts"))),pmaLogin:e.convert.toAppBoolean}))}});t.getDatabase=_;var v=n.default.post({url:"/CMD_DB",method:"POST",params:{action:"deleteuser",delete:!0,json:!0},domain:!0,schema:{name:n.default.REQUIRED_STRING,select:n.default.ROWS}});t.deleteUsers=v;var D=n.default.post({url:"/CMD_DB_ACCESS",domain:!0,params:{add:!0,json:!0},schema:{name:n.default.REQUIRED_STRING,host:n.default.REQUIRED_STRING}});t.addAccessHost=D;var g=n.default.select({url:"/CMD_DB_ACCESS",domain:!0,params:{delete:!0,json:!0},schema:{name:n.default.REQUIRED_STRING}});t.deleteAccessHost=g;var h=n.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0},schema:{name:n.default.REQUIRED_STRING,passwd:n.default.REQUIRED_STRING,passwd2:n.default.REQUIRED_STRING}});t.addUser=h;var E=n.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0,passwd:"*****",passwd2:"*****"},schema:{name:n.default.REQUIRED_STRING,userlist:n.default.REQUIRED_STRING}});t.assignUser=E;var R=n.default.post({url:"/CMD_DB",domain:!0,params:{action:"modifyuser",json:!0},schema:{name:n.default.REQUIRED_STRING,user:n.default.REQUIRED_STRING,passwd:n.default.REQUIRED_STRING,passwd2:n.default.REQUIRED_STRING}});t.changeUserPassword=R;var A=n.default.get({id:"DB_USER_PRIVS",url:"/CMD_DB_USER_PRIVS",domain:!0,schema:{name:n.default.REQUIRED_STRING,user:n.default.REQUIRED_STRING},after:function(e){return e.mapValues(e.isEqual("Y"))}});t.getUserPrivs=A;var I=n.default.post({url:"/CMD_DB_USER_PRIVS",domain:!0,params:{action:"save "},body:{name:n.default.REQUIRED_STRING,user:n.default.REQUIRED_STRING}});t.setUserPrivs=I;var P=n.default.post({url:"/CMD_PMA_LOGIN",domain:!0,params:{json:!0},notifySuccess:!1,notifyError:!1,schema:{name:n.default.REQUIRED_STRING}});t.loginPMA=P;var S=n.default.post({url:"/CMD_PMA_LOGIN",params:{json:!0,name:"all",domain:""},notifySuccess:!1,notifyError:!1});t.globalLoginPMA=S;var U=n.default.get({url:"/CMD_DB",response:!1,mapResponse:function(e){return"yes"===e.HAVE_ONE_CLICK_PMA_LOGIN},notifyError:!1});t.getLoginPMAStatus=U},1988:function(e,t,a){"use strict";a.r(t);var s=a(1989),r=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t.default=r.a},1989:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(15)),n=s(a(16)),o=s(a(2)),l=a(1460),i=a(7),u=s(a(2789));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var c,p,f={preload:l.getDatabases,components:{UploadBackupDialog:u.default},api:[{command:l.getDatabases,bind:"db"}],commands:{getDatabases:l.getDatabases},data:function(){return{select:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,i.mapTokens)({phpAdminPublic:"PHPMYADMIN_PUBLIC",limitReached:function(e){var t=Number(e.USERDATABASEMAX)||1/0,a=Number(e.USERDATABASE);if("user"===this.$state.app.user.level)return t<=a;var s=Number(e.RESELLERDATABASEMAX)||1/0,r=Number(e.RESELLERDATABASE);return t<=a||s<=r},sessionID:"SESSION_ID"}),{totalUsage:function(){return this.$options.filters.humanReadableSize(this.$api.db.total_usage_bytes)},databaseCount:function(){var e="user"===this.$state.app.user.level?"USER":"RESELLER";return Number(this.$state.app.tokens["".concat(e,"DATABASE")])}}),methods:{databaseRequest:(p=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({select:this.select});case 2:this.$refs.table.reloadTable(),this.$reset();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)}),repairDatabase:function(){this.databaseRequest(l.repairDatabase)},checkDatabase:function(){this.databaseRequest(l.checkDatabase)},optimizeDatabase:function(){this.databaseRequest(l.optimizeDatabase)},deleteDatabase:function(){this.databaseRequest(l.deleteDatabase),this.$store.dispatch("app/GET_TOKENS")},loginPMA:(c=(0,n.default)(r.default.mark((function e(t){var a,s,n,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.loginPMA)({name:t});case 2:a=e.sent,s=a.token,n=a.url,o="".concat(n,"?token=").concat(s),(0,i.openInNewTab)(o);case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),loginPMAAll:function(){this.loginPMA("all")}}};t.default=f},1990:function(e,t,a){"use strict";a.r(t);var s=a(1991),r=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t.default=r.a},1991:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=s(a(15)),o=s(a(16)),l=a(1460),i={api:[{command:l.getDatabases,bind:"db"}],data:function(){return{name:"",file:null,method:"default",dbuser:"",dbpass:"",uploading:!1,uploadProgress:{total:0,processed:0}}},computed:{dbList:function(){return this.$api.db.databases.rows.map((function(e){return e.database}))}},methods:{uploadBackup:(r=(0,o.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.uploadBackup.extend({onUpload:this.onUpload}),this.uploadProgress.processed=0,this.uploadProgress.total=this.file.size,this.uploading=!0,e.next=6,t({name:this.name,file:this.file,method:this.method,dbuser:this.dbuser,dbpass:this.dbpass,domain:this.$domain});case 6:e.sent instanceof Error?(this.uploading=!1,this.uploadProgress.total=0,this.uploadProgress.processed=0):(this.$emit("upload"),this.$dialog("UPLOAD_BACKUP_DIALOG").close(),this.$reset());case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),onUpload:function(e){this.uploadProgress.total=e.total,this.uploadProgress.processed=e.loaded}}};t.default=i},2789:function(e,t,a){"use strict";a.r(t);var s=a(3230),r=a(1990);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var o=a(0),l=Object(o.a)(r.default,s.a,s.b,!1,null,null,null);t.default=l.exports},2790:function(e,t){},3105:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("template",{slot:"header:buttons"},[e.$api.db.HAVE_ONE_CLICK_PMA_LOGIN&&e.$api.db.databases.rows.length?a("ui-button",{attrs:{theme:"light",title:e.$gettext("Login to phpMyAdmin")},on:{click:e.loginPMAAll}},[a("img",{attrs:{src:e.$store.getters["themes/iconsPath"]+"#phpmyadmin",height:"50"}})]):e._e(),e._v(" "),a("ui-tokens-conditional-button",{attrs:{link:"",theme:"primary",name:"user/database/create",token:e.$state.app.user.level.toUpperCase()+"DATABASEMAX",usage:e.databaseCount,"external-limit":e.limitReached}},[a("translate",[e._v("Create new Database")]),e._v(" "),a("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n                Database limit reached\n            ")])],1),e._v(" "),a("ui-button",{attrs:{theme:"safe"},on:{click:function(t){e.$dialog("UPLOAD_BACKUP_DIALOG").open()}}},[a("translate",[e._v("Upload Backup")])],1)],1),e._v(" "),e.$_Client.isPhone?a("app-page-section",[a("ui-stats-summary",{attrs:{badges:[{label:e.$gettext("Database Count"),value:e.$api.db.rowsCount},{label:e.$gettext("Usage"),value:e.totalUsage}]}})],1):e._e(),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({ref:"table",on:{"action:repair":e.repairDatabase,"action:check":e.checkDatabase,"action:optimize":e.optimizeDatabase,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:database",fn:function(t){var s=t.database;return a("ui-link",{attrs:{name:"user/database/view",params:{database:s}}},[e._v("\n                "+e._s(s)+"\n            ")])}},{key:"row:actions",fn:function(t){var s=t.database;return a("ui-actions",{},[a("a",{attrs:{href:"/CMD_DB/"+s+".gz?noredirect=true&X-DirectAdmin-Session-ID="+e.sessionID,download:s+".gz",target:"blank"}},[a("translate",[e._v("Download as GZ")])],1),e._v(" "),a("a",{attrs:{href:"/CMD_DB/"+s+".sql?noredirect=true&X-DirectAdmin-Session-ID="+e.sessionID,download:s+".sql",target:"blank"}},[a("translate",[e._v("Download as SQL")])],1),e._v(" "),e.$api.db.HAVE_ONE_CLICK_PMA_LOGIN?a("ui-link",{on:{click:function(t){return e.loginPMA(s)}}},[a("translate",[e._v("Login to phpMyAdmin")])],1):e._e()],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getDatabases,rowID:"database",property:"databases",columns:{database:{label:e.$gettext("Database"),grow:!0},nusers:e.$gettext("Number of Users"),size:{label:e.$gettext("Size"),filter:"humanReadableSize"}},actions:{repair:e.$gettext("Repair"),check:e.$gettext("Check"),optimize:e.$gettext("Optimize"),del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1),[e.$_Client.isPhone?e._e():a("ui-stats-summary",{attrs:{slot:"buttons:before",badges:[{label:e.$gettext("Database Count"),value:e.databaseCount},{label:e.$gettext("Usage"),value:e.totalUsage}]},slot:"buttons:before"})],1)],1),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("database","databases",e.select.length)},on:{"click:confirm":e.deleteDatabase}}),e._v(" "),a("upload-backup-dialog",{on:{upload:e.$reloadApiTable}})],2)},r=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}))},3230:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"UPLOAD_BACKUP_DIALOG","no-auto-close":"","no-close-btn":e.uploading,"no-close-icon":e.uploading},on:{"dialog:open":function(t){e.name=e.dbList[0]}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Upload Backup\n    ")]),e._v(" "),e.uploading?a("template",{slot:"content"},[a("ui-form-element",{key:"uploadingProgressBar",attrs:{vertical:""}},[a("ui-progress",{attrs:{slot:"content",size:"big",theme:"primary",value:e.uploadProgress.processed/e.uploadProgress.total*100},slot:"content"},[e._v("\n                "+e._s(e._f("humanReadableSize")(e.uploadProgress.processed))+" / "+e._s(e._f("humanReadableSize")(e.uploadProgress.total))+"\n            ")])],1),e._v(" "),a("span",{staticClass:"txt:bold txt:center disp:iblock width:100%"},[e.uploadProgress.processed<e.uploadProgress.total?a("translate",{key:"uploadProgress"},[e._v("\n                Upload In Progress\n            ")]):a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"center"},expression:"{ cross: 'center', main: 'center' }"}]},[a("translate",[e._v("\n                    Upload completed. Processing uploaded file\n                ")]),e._v(" "),a("ui-loader-icon",{directives:[{name:"margin",rawName:"v-margin",value:1,expression:"1"}],attrs:{size:24}})],1)],1)],1):a("template",{slot:"content"},[a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Select Database\n            ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.dbList},slot:"content",model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-dropzone",{attrs:{slot:"content","show-preview":!1},slot:"content",model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Connection Method\n            ")]),e._v(" "),a("ui-grid",{attrs:{slot:"content",column:""},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"default"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[a("translate",[e._v("Your current login information")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"custom"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[a("translate",[e._v("Custom username & password")])],1)],1)],1),e._v(" "),"custom"===e.method?[a("ui-form-element",{attrs:{vertical:"",group:"uploadBackup",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Username\n                ")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.dbuser,callback:function(t){e.dbuser=t},expression:"dbuser"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"uploadBackup",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Password\n                ")]),e._v(" "),a("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.dbpass,callback:function(t){e.dbpass=t},expression:"dbpass"}})],1)]:e._e()],2),e._v(" "),e.uploading?e._e():a("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"uploadBackup",disabled:!(e.file&&e.name)},on:{click:e.uploadBackup},slot:"buttons"},[a("translate",[e._v("Upload")])],1)],2)},r=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}))}}]);