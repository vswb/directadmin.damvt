(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1327:function(e,t,n){"use strict";n.r(t);var s=n(3066),a=n(1728);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=n(2611),l=n.n(i),u=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},1442:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateIPRangeList=t.validateDomain=t.validatePassword=t.validateSubdomain=t.validateUsername=t.validateDBUser=t.validateDatabase=t.validateDNSName=t.validateMXValue=t.validateDNSValue=t.validateFTP=t.validateEmail=t.validateForwarder=void 0;var a=s(n(30)),r=s(n(36)),o=s(n(1443)),i=a.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:a.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:o.default.isValid,message:o.default.getMessage}}),l=i.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=l;var u=i.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=u;var c=i.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=c;var d=i.extend({params:{type:"dns"},domain:!0,schema:{record:a.default.REQUIRED_STRING}}),p=d.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:a.default.REQUIRED_STRING}});t.validateDNSValue=p;var f=p.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=f;var m=d.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:a.default.REQUIRED_STRING,value:null}});t.validateDNSName=m;var v=i.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=v;var _=i.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=_;var h=i.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=h;var g=i.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=g;var E=i.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=E;var b=i.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:r.default.toASCII(t)}}});t.validateDomain=b;var S=i.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=S},1443:function(e,t,n){"use strict";n.r(t);var s=n(35);t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return Object(s.toAppHtml)(e.error||"")}}},1444:function(e,t,n){"use strict";n.r(t);var s=n(1445),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},1445:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n(1463)),r={commands:{validatePassword:n(1442).validatePassword},data:function(){return{username:"",password:""}},computed:{requestData:function(){return{username:this.username,passwd:this.password,passwd2:this.password}}},methods:{show:function(e){this.$reset(),this.username=e,this.$dialog("CHANGE_USER_PASSWORD_DIALOG").open()},changePassword:function(){(0,a.default)(this.requestData)}}};t.default=r},1449:function(e,t,n){"use strict";n.r(t);var s=n(1450),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},1450:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.reasons=o,t.default=void 0;var a=s(n(2));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(){var e={none:this.$gettext("None"),abuse:this.$gettext("Abuse"),billing:this.$gettext("Billing Issue"),inactive:this.$gettext("Inactive"),other:this.$gettext("Other"),spam:this.$gettext("Spam"),user_bandwidth:this.$gettext("User Bandwidth"),user_quota:this.$gettext("User Quota")};return"admin"===this.$state.app.user.accessLevel?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{reseller_bandwidth:this.$gettext("Reseller Bandwidth"),reseller_quota:this.$gettext("Reseller Quota")}):e}var i={$exports:{reasons:o},data:function(){return{reason:"none",details:""}},computed:{reasons:o}};t.default=i},1453:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemStatus=t.updateActiveStatus=t.getActiveStatus=t.updateEmailSetting=t.getEmailSetting=t.getTicketDefaults=t.replyTicket=t.createTicket=t.markTicketsRead=t.openTicket=t.closeTickets=t.getMessages=t.getTickets=t.sendMessageMultiple=void 0;var a=s(n(2)),r=s(n(30)),o=s(n(602));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple"},schema:{users:r.default.ROWS,priority:{type:String,default:"10",validator:function(e){return["10","20","30"].includes(e)}},subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,emailOnly:l({},r.default.OPTIONAL_BOOL,{default:!1}),all_email_accounts:r.default.OPTIONAL_BOOL}});t.sendMessageMultiple=u;var c=l({},r.default.OPTIONAL_BOOL,{default:!0}),d=r.default.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:c,show_hold:c,show_closed:c},after:function(e){return e.flow(e.wrap("rows"),e.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({new:e.convert.toAppBoolean,priority:e.convert.toAppNumber,replies:e.convert.toAppNumber,last_message:e.convert.toAppDate,subject:e.convert.toAppString,user:e.convert.toAppString})),filters:e.mapValues(e.mapProps({new:e.convert.toAppNumber,total:e.convert.toAppNumber})),enabled:e.convert.toAppBoolean,message:e.convert.toAppHtml}))}});t.getTickets=d;var p=r.default.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.deleteProp("info"),e.toArray,(function(e){return e.reverse()}),e.mapArrayProps({message:e.convert.toAppHtml,time:function(t){return(0,o.default)(Date.now(),e.convert.toAppDate(t))}}))}});t.getMessages=p;var f=r.default.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}});t.closeTickets=f;var m=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:r.default.REQUIRED_STRING}});t.openTicket=m;var v=r.default.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}});t.markTicketsRead=v;var _=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:function(e){return{encoding:e.email_only?"utf-8":null}},schema:{user:r.default.REQUIRED_STRING,priority:l({},r.default.REQUIRED_STRING,{validator:function(e){return["10","20","30"].includes(e)}}),subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,email_only:r.default.OPTIONAL_BOOL}});t.createTicket=_;var h=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING,subject:r.default.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:function(e){return["open","closed"].includes(e)}},message:r.default.REQUIRED_STRING}});t.replyTicket=h;var g=r.default.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:function(e){return e.flow(e.moveProp("EML_ONLY_CHEKCED","email.set"),e.moveProp("SHOW_EML_ONLY","email.show"),e.moveProp("TCKTTO","to"),e.moveProp("TCKTTYPE","type"),(function(e){return l({},e,{selected:Object.values(e.to).find((function(e){return!!e.selected}))})}),e.mapProps({email:e.mapProps({set:e.convert.toAppBoolean,show:e.convert.toAppBoolean}),to:function(e){return Object.values(e).map((function(e){return{label:e.text,value:e.value}}))},selected:function(e){return{label:e.text,value:e.value}}}))}});t.getTicketDefaults=g;var E=r.default.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:function(e){return e.flow(e.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),e.mapProps({featureEnabled:e.feedWith(1,(function(e){return void 0!==e.checked})),email:e.setDefault(""),checked:e.flow(e.setDefault("no"),e.convert.toAppBoolean)}))}});t.getEmailSetting=E;var b=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:r.default.REQUIRED_STRING,ON:r.default.REQUIRED_BOOL}});t.updateEmailSetting=b;var S=r.default.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:function(e){return function(t){return{html:t.info.html,active:e.convert.toAppBoolean(t.info.active)}}}});t.getActiveStatus=S;var w=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:r.default.REQUIRED_BOOL,html:r.default.REQUIRED_STRING}});t.updateActiveStatus=w;var A=r.default.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!1});t.getSystemStatus=A},1458:function(e,t,n){"use strict";n.r(t);var s=n(1459),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},1459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(1453),a={props:{users:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{priority:"20",subject:"",message:"",emailOnly:!1,allEmailAccounts:!1}},computed:{priorityOptions:function(){return{10:this.$gettext("Low"),20:this.$gettext("Medium"),30:this.$gettext("High")}}},methods:{sendMessage:function(){(0,s.sendMessageMultiple)({users:this.users,priority:this.priority.value,subject:this.subject,message:this.message,emailOnly:this.emailOnly,email_only:this.emailOnly,all_email_accounts:this.emailOnly&&this.allEmailAccounts})}}};t.default=a},1463:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n(30)),r=a.default.post({url:"/CMD_USER_PASSWD",params:{action:"create",referer:"CMD_API_USER_PASSWD"},schema:{username:a.default.REQUIRED_STRING,passwd:a.default.REQUIRED_STRING},before:function(e){return{passwd2:e.passwd}}});t.default=r},1473:function(e,t,n){"use strict";n.r(t);var s=n(1474),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},1474:function(e,t,n){"use strict";var s=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(7),r=s(n(6)),o={props:{domains:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{showAll:!1}},computed:{showDomainLimit:(0,a.options)("tables/userDomainsLimit"),showPointers:function(){return this.$state.app.tokens.SHOW_POINTERS_IN_LIST||"1"},shownDomainNumber:function(){return Number(this.showDomainLimit)},showExpandButton:function(){return Object.keys(this.domains).length>this.shownDomainNumber},showAllDomains:function(){return this.showAll||Object.keys(this.domains).length===this.shownDomainNumber+1},shownDomains:function(){if(this.showAllDomains)return this.domains;var e=r.slice(0,this.shownDomainNumber,r.keys(this.domains));return r.pick(e,this.domains)}}};t.default=o},1475:function(e,t,n){var s=n(1553);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,n(5).default)("943a96e0",s,!0,{})},1476:function(e,t,n){"use strict";n.r(t);var s=n(1477),a=n(1444);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1477:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"CHANGE_USER_PASSWORD_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Change Password\n    ")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Username\n            ")]),e._v(" "),n("input-text",{attrs:{slot:"content",disabled:""},slot:"content",model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:"",group:"change-user-password",validators:{required:!0,api:e.$commands.validatePassword}},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                New Password\n            ")]),e._v(" "),n("input-password",{attrs:{slot:"content","show-generator":""},slot:"content",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons","validate-group":"change-user-password",theme:"safe"},on:{click:e.changePassword},slot:"buttons"},[n("translate",[e._v("Change Pasword")])],1)],2)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},1487:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.saveComments=t.createAdmin=t.deleteUsers=t.unsuspendUsers=t.suspendUsers=void 0;var a=s(n(30)),r=a.default.post({url:"/CMD_SELECT_USERS",notifySuccess:!0,params:{location:"CMD_ALL_USER_SHOW"},schema:{select:a.default.ROWS},blocking:!0}),o=r.extend({params:{dosuspend:!0},schema:{reason:a.default.REQUIRED_STRING},blocking:!0});t.suspendUsers=o;var i=r.extend({params:{dounsuspend:!0},blocking:!0});t.unsuspendUsers=i;var l=r.extend({params:{delete:!0,confirmed:!0},schema:{leave_dns:a.default.OPTIONAL_BOOL},blocking:!0});t.deleteUsers=l;var u=a.default.post({url:"/CMD_ACCOUNT_ADMIN",params:{action:"create"},schema:{username:a.default.REQUIRED_STRING,email:a.default.REQUIRED_STRING,passwd:a.default.REQUIRED_STRING,passwd2:a.default.REQUIRED_STRING,notify:a.default.REQUIRED_BOOL}});t.createAdmin=u;var c=a.default.post({url:"/CMD_COMMENTS",params:{location:"CMD_SHOW_RESELLER"},schema:{user:a.default.REQUIRED_STRING,comments:a.default.REQUIRED_STRING}});t.saveComments=c},1488:function(e,t,n){"use strict";n.r(t);var s=n(1492),a=n(1449);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1492:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"SUSPEND_USER_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Suspend user")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Reason")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.reasons},slot:"content",model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Details")]),e._v(" "),n("input-textarea",{attrs:{slot:"content",rows:"3"},slot:"content",model:{value:e.details,callback:function(t){e.details=t},expression:"details"}})],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:function(t){return e.$emit("suspend",{reason:e.reason,details:e.details})}},slot:"buttons"},[n("translate",[e._v("Suspend")])],1)],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},1511:function(e,t,n){"use strict";n.r(t);var s=n(1532),a=n(1458);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1532:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"CREATE_MESSAGE_DIALOG",size:"normal"},on:{"dialog:close":e.$reset}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Send a Message\n    ")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                To:\n            ")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-grid",{attrs:{wrap:""}},e._l(e.users,(function(t){return n("ui-badge",{key:t,attrs:{theme:"neutral",size:"big",icon:"person"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})),1)],1)],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Priority:\n            ")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.priorityOptions},slot:"content",model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Subject:\n            ")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Message:\n            ")]),e._v(" "),n("input-textarea",{attrs:{slot:"content",rows:"10"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),n("ui-form-element",{attrs:{underline:!1}},[n("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"content"},slot:"content"},[n("input-checkbox",{model:{value:e.emailOnly,callback:function(t){e.emailOnly=t},expression:"emailOnly"}},[n("translate",[e._v("E-mail Only")])],1),e._v(" "),e.emailOnly?n("input-checkbox",{model:{value:e.allEmailAccounts,callback:function(t){e.allEmailAccounts=t},expression:"allEmailAccounts"}},[n("translate",[e._v("All Email Accounts")]),e._v(" "),n("ui-tooltip",[n("translate",[e._v("Message will be delivered to all User/Reseller accounts that were selected plus all E-Mail accounts that exist under domains for selected User accounts.")])],1)],1):e._e()],1)])],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"message"},on:{click:e.sendMessage},slot:"buttons"},[e._v("\n        Send Message\n    ")])],2)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},1535:function(e,t,n){"use strict";n.r(t);var s=n(1567),a=n(1473);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n(1552);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1551:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getAdmins=t.getUsers=void 0;var a=s(n(2)),r=s(n(17)),o=s(n(30));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l=o.default.get({id:"ALL_USERS",url:"/CMD_ALL_USER_SHOW",pagination:!0,params:{bytes:!0},after:function(e){return e.flow(e.wrap("users"),e.moveProp({"users.reasons":"options.reasons","users.add_leave_dns":"options.add_leave_dns","users.remote_server":"options.remote_servers","users.RESULT":"options.connectionError"}),e.mapProp("users",e.toTable(e.flow(e.mapArrayProps({username:e.getProp("value"),is_user:e.feedWith(1,e.flow(e.getProp("username.is_user"),e.convert.toAppBoolean)),suspended:e.flow(e.getProp("value"),e.convert.toAppBoolean),reason:e.feedWith(1,(function(e){return e.suspended.reason||"none"})),vdomains:e.toLimitedUsage(),bandwidth:e.toLimitedUsage(),quota:e.toLimitedUsage(),date_created:e.convert.toAppDate,mysql:function(t){if(t){var n=t.split("/").map((function(e){return e.trim()})),s=(0,r.default)(n,2),a=s[0],o=s[1];return e.toLimitedUsage()({limit:Number(o)||1/0,usage:a})}}}),e.mapArray((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{test:"test"})}))))),e.mapProp("options",e.mapProps({add_leave_dns:e.convert.toAppBoolean,connectionError:function(t){return(t||"").split("<br>\\n").filter(e.notEmpty).join("<br>")},remote_servers:e.flow((function(e){return e||{}}),e.mapValues((function(t,n){var s=t.ssl,a=t.port,r=e.convert.toAppBoolean(s)?"https":"http";return"".concat(r,"://").concat(n,":").concat(a)})))})))}});t.getUsers=l;var u=o.default.get({id:"ADMINS",url:"/CMD_ADMIN_SHOW",params:{bytes:!0},pagination:!0,after:function(e){return e.flow(e.wrap("admins"),e.moveProp({"admins.reasons":"reasons"}),e.mapProp("admins",e.toTable(e.mapArrayProps({nusers:e.convert.toAppNumber,suspended:e.flow(e.getProp("value"),e.isEqual("no:"),e.not),reason:e.feedWith(1,(function(e){return e.suspended.reason||"none"})),vdomains:e.toLimitedUsage(),bandwidth:e.toLimitedUsage(),quota:e.toLimitedUsage()}))))}});t.getAdmins=u},1552:function(e,t,n){"use strict";var s=n(1475);n.n(s).a},1553:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"ol.user-domains--pointers{list-style-type:decimal!important}","",{version:3,sources:["/home/evo/evolution/src/js/components/local/user-domains.vue"],names:[],mappings:"AA+GA,0BACI,iCAAmC,CAAA",file:"user-domains.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nol.user-domains--pointers {\n    list-style-type: decimal !important;\n}\n"],sourceRoot:""}])},1567:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"scrollbar:primary":!e.$_Client.isPhone},style:{"overflow-x":"auto","min-width":e.$_Client.isPhone?"auto":"15rem"}},[e._l(e.shownDomains,(function(t,s){return n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}],key:s},[n("a",{attrs:{href:"http://"+s,target:"_blank"}},[e._v("\n            "+e._s(e._f("p6eUnicode")(s))+"\n        ")]),e._v("\n         \n        "),t.length&&"0"!==e.showPointers?n("ui-tooltip",[n("translate",{staticClass:"txt:bold",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                (pointers)\n            ")]),e._v(" "),n("1"===e.showPointers?"ul":"ol",{tag:"component",staticClass:"wrap:nowrap user-domains--pointers"},e._l(t,(function(t){return n("li",{key:t},[n("a",{attrs:{href:"http://"+t,target:"_blank"}},[e._v("\n                        "+e._s(e._f("p6eUnicode")(t))+"\n                    ")])])})),0)],1):e._e()],1)})),e._v(" "),e.showExpandButton&&!e.showAllDomains?n("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){e.showAll=!0}}},[n("translate",[e._v("show all...")]),e._v(" "),n("ui-icon",{directives:[{name:"margin",rawName:"v-margin",value:[,,,1],expression:"[, , , 1]"}],attrs:{id:"caret-down",size:"small"}})],1):e._e()],2)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},1728:function(e,t,n){"use strict";n.r(t);var s=n(1729),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},1729:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n(17)),r=s(n(2)),o=s(n(15)),i=s(n(16)),l=n(1551),u=n(1487),c=s(n(1511)),d=s(n(1488)),p=s(n(1535)),f=s(n(1476));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _,h,g,E={preload:l.getUsers,api:[{command:l.getUsers,bind:{"response.users":"users","response.options":"options"}}],commands:{getUsers:l.getUsers},components:{CreateMessageDialog:c.default,SuspendUserDialog:d.default,UserDomains:p.default,ChangePasswordDialog:f.default},data:function(){return{select:[],leaveDNS:!1,message:"",userStatus:{}}},computed:{rows:function(){return this.$api.users.rows},options:function(){return this.$api.options},showRemoteServer:function(){return!!Object.keys(this.options.remote_servers||{}).length},reasons:d.default.$exports.reasons,hasDateCreatedColumn:function(){return void 0!==this.$api.users.columns.date_created},hasMysqlColumn:function(){return void 0!==this.$api.users.columns.mysql}},mounted:function(){this.options.connectionError&&this.$notifications.error({timeout:1/0,title:this.$gettext("Connection Error"),content:this.options.connectionError})},methods:{getUsageProgress:function(e){var t=100*e.usage/e.limit,n="primary";return t>40&&(n="safe"),t>80&&(n="danger"),{size:"normal",theme:n,value:t}},deleteUsers:(g=(0,i.default)(o.default.mark((function e(){var t,n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.select).forEach(this.setStatus("deleted")),e.next=4,(0,u.deleteUsers)({select:t,leave_dns:this.options.add_leave_dns?this.leaveDNS:null});case 4:e.sent||t.forEach((function(e){delete n.userStatus[e]})),this.$reloadApiTable({reset:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)}),getChildUsers:function(e){return this.rows.filter((function(t){return t.creator===e})).map((function(e){return e.username}))},setStatus:function(e){var t=this;return function(n){return t.$set(t.userStatus,n,e)}},deleteStatus:function(e){this.$delete(this.userStatus,e)},suspendUsers:(h=(0,i.default)(o.default.mark((function e(t){var n,s,a=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.select,s=this.setStatus("suspended"),n.forEach((function(e){s(e),a.getChildUsers(e).forEach(s)})),e.next=5,(0,u.suspendUsers)(v({select:n},t));case 5:e.sent||n.forEach((function(e){a.deleteStatus(e),a.getChildUsers(e).forEach(a.deleteStatus)})),this.$reloadApiTable({reset:!1}),this.select=[];case 9:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)}),unsuspendUsers:(_=(0,i.default)(o.default.mark((function e(){var t,n,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.select,n=this.setStatus("active"),t.forEach((function(e){n(e),s.getChildUsers(e).forEach(n)})),e.next=5,(0,u.unsuspendUsers)({select:t});case 5:e.sent||t.forEach((function(e){s.deleteStatus(e),s.getChildUsers(e).forEach(s.deleteStatus)})),this.$reloadApiTable({reset:!1}),this.select=[];case 9:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)}),filterDeletedUsers:function(e){return"deleted"!==this.userStatus[e.username]},mapUserStatus:function(e){return v({},e,{suspended:this.userStatus[e.username]?"suspended"===this.userStatus[e.username]:e.suspended})},getSentEmailsString:function(e){var t=e.split(":"),n=(0,a.default)(t,3),s=n[0],r=n[1],o=n[2];return r&&o?this.$gettextInterpolate(this.$gettext("%{ sent } (Today: %{ today } / %{ limit })"),{sent:s,today:r,limit:o}):s},loginAs:function(e){this.$store.dispatch("app/LOGIN_AS",{user:e,path:this.$route.path,router:this.$router})},changePassword:function(e){this.$refs.cpd.show(e)}}};t.default=E},2611:function(e,t){},3066:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("ui-api-table",e._b({on:{"action:message":function(t){e.$dialog("CREATE_MESSAGE_DIALOG").open()},"action:suspend":function(t){e.$dialog("SUSPEND_USER_DIALOG").open()},"action:unsuspend":e.unsuspendUsers,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:username",fn:function(t){var s=t.username,a=t.suspended,r=t.deleted,o=t.remote_server,i=t.is_user,l=t.reason;return n("div",{staticClass:"wrap:nowrap"},[n("ui-link",o?{attrs:{href:e.options.remote_servers[o]+"/CMD_SHOW_USER="+s,target:"_blank"}}:{attrs:{name:i?"reseller/users/view":"admin/users/resellers/view",params:{user:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]),e._v(" "),a?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[l?n("translate",{attrs:{"translate-params":{reason:e.reasons[l]}}},[e._v("\n                        Suspended: %{ reason }\n                    ")]):n("translate",[e._v("\n                        Suspended\n                    ")])],1):e._e(),e._v(" "),r?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Deleted")])],1):e._e()],1)}},{key:"col:creator",fn:function(t){var s=t.creator;return["root"!==s?n("ui-link",{attrs:{name:"admin/users/resellers/view",params:{user:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]):e._e()]}},{key:"col:bandwidth",fn:function(t){var s=t.bandwidth;return n("ui-limited-usage",e._b({},"ui-limited-usage",s,!1))}},{key:"col:quota",fn:function(t){var s=t.quota;return n("ui-limited-usage",e._b({},"ui-limited-usage",s,!1))}},{key:"col:vdomains",fn:function(t){var s=t.vdomains;return n("ui-limited-usage",e._b({attrs:{plain:""}},"ui-limited-usage",s,!1))}},{key:"col:mysql",fn:function(t){var s=t.mysql;return n("ui-limited-usage",e._b({attrs:{plain:""}},"ui-limited-usage",s,!1))}},{key:"col:ip",fn:function(t){var s=t.ip;return[s.length?e._e():n("span"),e._v(" "),e._l(s,(function(t){return n("p",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}],key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))]}},{key:"col:domains",fn:function(t){var s=t.domains;return n("user-domains",e._b({},"user-domains",{domains:s},!1))}},{key:"col:sent_emails",fn:function(t){var n=t.sent_emails;return[e._v("\n                "+e._s(e.getSentEmailsString(n))+"\n            ")]}},{key:"col:date_created",fn:function(t){var n=t.date_created;return[e._v("\n                "+e._s(e._f("date")(n))+"\n            ")]}},{key:"row:actions",fn:function(t){var s=t.username,a=t.suspended;return n("ui-actions",{},[n("ui-link",{on:{click:function(t){e.select=[s],e.$dialog("CREATE_MESSAGE_DIALOG").open()}}},[n("translate",[e._v("Send a Message")])],1),e._v(" "),a?e._e():n("ui-link",{on:{click:function(t){e.select=[s],e.$dialog("SUSPEND_USER_DIALOG").open()}}},[n("translate",[e._v("Suspend")])],1),e._v(" "),a?n("ui-link",{on:{click:function(t){e.select=[s],e.unsuspendUsers()}}},[n("translate",[e._v("Unsuspend")])],1):e._e(),e._v(" "),n("ui-link",{on:{click:function(t){return e.loginAs(s)}}},[n("translate",{attrs:{"translate-params":{username:s}}},[e._v("\n                        Login as %{ username }\n                    ")])],1),e._v(" "),n("ui-link",{on:{click:function(t){return e.changePassword(s)}}},[n("translate",{attrs:{"translate-params":{username:s}}},[e._v("\n                        Change %{ username }'s password\n                    ")])],1),e._v(" "),n("ui-link",{on:{click:function(t){e.select=[s],e.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[e._v("Remove")])],1)],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getUsers,endpoint:"GET_ALL_USERS",property:"users",rowID:"username",columns:{username:{label:e.$gettext("Username"),searchable:!0},creator:{label:e.$gettext("Creator"),searchable:!0},bandwidth:{label:e.$gettext("Bandwidth"),getClass:function(e){return e.bandwidth.status?"--usage:"+e.bandwidth.status:""}},quota:{label:e.$gettext("Disk Usage"),getClass:function(e){return e.bandwidth.status?"--usage:"+e.quota.status:""}},vdomains:e.$gettext("# of domains"),domains:{label:e.$gettext("Domain(s)"),width:"minmax(15rem, auto)",searchable:!0},ip:{label:e.$gettext("IP(s)"),searchable:!0},suspended:{label:e.$gettext("Suspended"),hide:!0,searchable:{type:"select",options:{Yes:e.$gettext("Yes"),No:e.$gettext("No")}}},sent_emails:e.$gettext("Sent E-mails"),remote_server:{label:e.$gettext("Remote Server"),hide:!e.showRemoteServer},date_created:{label:e.$gettext("Date Created"),visible:!1,hide:!e.hasDateCreatedColumn},mysql:{label:e.$gettext("Databases"),visible:!1,hide:!e.hasMysqlColumn}},actions:{message:e.$gettext("Send a Message"),suspend:e.$gettext("Suspend"),unsuspend:e.$gettext("Unsuspend"),del:e.$gettext("Delete")},updateOn:["SUSPEND_USERS","UNSUSPEND_USERS","DELETE_USERS"],rowsMapper:e.mapUserStatus,rowsFilter:e.filterDeletedUsers,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),n("create-message-dialog",{attrs:{users:e.select}}),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("user","users",e.select.length)},on:{"click:confirm":e.deleteUsers}},[e.options.add_leave_dns?n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.leaveDNS,callback:function(t){e.leaveDNS=t},expression:"leaveDNS"}},[n("translate",[e._v("Leave DNS")]),e._v(" "),n("ui-tooltip",[n("translate",[e._v("Do not remove DNS zones of domains owned by the user.")])],1)],1)],1):e._e()],1),e._v(" "),n("suspend-user-dialog",{on:{suspend:e.suspendUsers}}),e._v(" "),n("change-password-dialog",{ref:"cpd"})],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))}}]);