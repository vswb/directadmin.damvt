(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1358:function(e,t,a){"use strict";a.r(t);var s=a(3095),r=a(1881);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var i=a(0),l=a(2715),u=a.n(l),o=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);"function"==typeof u.a&&u()(o),t.default=o.exports},1442:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateIPRangeList=t.validateDomain=t.validatePassword=t.validateSubdomain=t.validateUsername=t.validateDBUser=t.validateDatabase=t.validateDNSName=t.validateMXValue=t.validateDNSValue=t.validateFTP=t.validateEmail=t.validateForwarder=void 0;var r=s(a(30)),n=s(a(36)),i=s(a(1443)),l=r.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:r.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:i.default.isValid,message:i.default.getMessage}}),u=l.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=u;var o=l.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=o;var d=l.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=d;var c=l.extend({params:{type:"dns"},domain:!0,schema:{record:r.default.REQUIRED_STRING}}),f=c.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:r.default.REQUIRED_STRING}});t.validateDNSValue=f;var p=f.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=p;var m=c.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:r.default.REQUIRED_STRING,value:null}});t.validateDNSName=m;var v=l.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=v;var _=l.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=_;var I=l.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=I;var O=l.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=O;var R=l.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=R;var g=l.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:n.default.toASCII(t)}}});t.validateDomain=g;var E=l.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=E},1443:function(e,t,a){"use strict";a.r(t);var s=a(35);t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return Object(s.toAppHtml)(e.error||"")}}},1461:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.modifyUserCustomize=t.deleteMultiIPs=t.modifyMultiIP=t.saveIP=t.savePackage=t.saveNameservers=t.saveName=t.saveEmail=t.saveLanguage=t.saveSkin=t.increaseBandwidth=t.sendWelcomeEmail=t.saveComments=t.createUser=t.changeIp=t.changePackage=t.deleteUsers=t.unsuspendUsers=t.suspendUsers=void 0;var r=s(a(30)),n=r.default.post({url:"/CMD_SELECT_USERS",notifySuccess:!0,params:{location:"CMD_USER_SHOW"},schema:{select:r.default.ROWS},blocking:!0}),i=n.extend({params:{dosuspend:!0},schema:{reason:r.default.REQUIRED_STRING}});t.suspendUsers=i;var l=n.extend({params:{dounsuspend:!0}});t.unsuspendUsers=l;var u=n.extend({params:{delete:!0,confirmed:!0},schema:{leave_dns:r.default.OPTIONAL_BOOL}});t.deleteUsers=u;var o=n.extend({params:{dopackage:!0},schema:{package:r.default.OPTIONAL_STRING}});t.changePackage=o;var d=n.extend({params:{doip:!0},schema:{ip:r.default.OPTIONAL_STRING}});t.changeIp=d;var c=r.default.post({url:"/CMD_ACCOUNT_USER",params:{add:!0,action:"create"},schema:{username:r.default.REQUIRED_STRING,email:r.default.REQUIRED_STRING,passwd:r.default.REQUIRED_STRING,passwd2:r.default.REQUIRED_STRING,domain:r.default.REQUIRED_STRING,package:r.default.OPTIONAL_STRING,ip:r.default.REQUIRED_STRING,notify:r.default.REQUIRED_BOOL}});t.createUser=c;var f=r.default.post({url:"/CMD_COMMENTS",params:{location:"CMD_USER_SHOW"},schema:{user:r.default.REQUIRED_STRING,comments:r.default.REQUIRED_STRING}});t.saveComments=f;var p=r.default.post({url:"/CMD_RESEND_EMAIL",schema:{user:r.default.REQUIRED_STRING,email:r.default.REQUIRED_STRING,newpass:r.default.REQUIRED_BOOL}});t.sendWelcomeEmail=p;var m=r.default.post({url:"/CMD_MODIFY_USER",params:{additional_bw:!0,action:"single",json:null},schema:{user:r.default.REQUIRED_STRING,additional_bandwidth:r.default.REQUIRED_STRING}});t.increaseBandwidth=m;var v=r.default.post({url:"/CMD_MODIFY_USER",params:{json:!0,action:"single"},schema:{user:r.default.REQUIRED_STRING}}),_=v.extend({params:{skin:!0},schema:{skinvalue:r.default.REQUIRED_STRING}});t.saveSkin=_;var I=v.extend({params:{language:!0},schema:{lvalue:r.default.REQUIRED_STRING}});t.saveLanguage=I;var O=v.extend({params:{email:!0},schema:{evalue:r.default.REQUIRED_STRING}});t.saveEmail=O;var R=v.extend({params:{name:!0},schema:{nvalue:r.default.REQUIRED_STRING}});t.saveName=R;var g=v.extend({params:{ns:!0},schema:{ns1:r.default.REQUIRED_STRING,ns2:r.default.REQUIRED_STRING}});t.saveNameservers=g;var E=r.default.post({url:"/CMD_MODIFY_USER",params:{action:"package"},schema:{user:r.default.REQUIRED_STRING,package:r.default.REQUIRED_STRING}});t.savePackage=E;var N=r.default.post({url:"/CMD_MODIFY_USER",params:{action:"ip"},schema:{user:r.default.REQUIRED_STRING,ip:r.default.REQUIRED_STRING}});t.saveIP=N;var h=r.default.post({url:"/CMD_MODIFY_USER",params:{action:"multi_ip"},schema:{user:r.default.REQUIRED_STRING,extra_ip:r.default.REQUIRED_STRING}});t.modifyMultiIP=h;var S=r.default.select({url:"/CMD_MODIFY_USER",params:{action:"multi_ip_delete",delete:!0},schema:{user:r.default.REQUIRED_STRING,removedns:r.default.REQUIRED_BOOL}});t.deleteMultiIPs=S;var T=r.default.post({url:"/CMD_MODIFY_USER",params:{action:"customize",bytes:!0},body:{user:r.default.REQUIRED_STRING,bandwidth:r.default.OPTIONAL_STRING,ubandwidth:r.default.OPTIONAL_BOOL,quota:r.default.OPTIONAL_STRING,uquota:r.default.OPTIONAL_BOOL,inode:r.default.OPTIONAL_STRING,uinode:r.default.OPTIONAL_BOOL,vdomains:r.default.OPTIONAL_STRING,uvdomains:r.default.OPTIONAL_BOOL,nsubdomains:r.default.OPTIONAL_STRING,unsubdomains:r.default.OPTIONAL_BOOL,nemails:r.default.OPTIONAL_STRING,unemails:r.default.OPTIONAL_BOOL,nemailf:r.default.OPTIONAL_STRING,unemailf:r.default.OPTIONAL_BOOL,nemailml:r.default.OPTIONAL_STRING,unemailml:r.default.OPTIONAL_BOOL,nemailr:r.default.OPTIONAL_STRING,unemailr:r.default.OPTIONAL_BOOL,mysql:r.default.OPTIONAL_STRING,umysql:r.default.OPTIONAL_BOOL,domainptr:r.default.OPTIONAL_STRING,udomainptr:r.default.OPTIONAL_BOOL,ftp:r.default.OPTIONAL_STRING,uftp:r.default.OPTIONAL_BOOL,aftp:r.default.OPTIONAL_STRING,cgi:r.default.OPTIONAL_STRING,php:r.default.OPTIONAL_STRING,spam:r.default.OPTIONAL_STRING,catchall:r.default.OPTIONAL_STRING,ssl:r.default.OPTIONAL_STRING,ssh:r.default.OPTIONAL_STRING,cron:r.default.OPTIONAL_STRING,sysinfo:r.default.OPTIONAL_STRING,login_keys:r.default.OPTIONAL_STRING,dnscontrol:r.default.OPTIONAL_STRING,suspend_at_limit:r.default.OPTIONAL_STRING,skin:r.default.OPTIONAL_STRING,ns1:r.default.REQUIRED_STRING,ns2:r.default.REQUIRED_STRING}});t.modifyUserCustomize=T},1556:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.free=t.share=t.getConfig=void 0;var r=s(a(2)),n=s(a(30));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var l="/CMD_IP_CONFIG",u=n.default.get({id:"IP_CONFIG",url:l,response:{},after:function(e){return e.flow((function(e){return{ips:e.data,hideUsersCount:"1"===e.hide_ip_user_numbers,haveShared:"1"===e.have_shared||!0}}),e.mapProp("ips",e.flow(e.mapValues((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({ip:t},e)})),Object.values,e.mapArrayProps({linked_ips:function(t){return Object.values(e.mapValues(t,(function(t,a){return{ip:a,apache:e.convert.toAppBoolean(t.apache),dns:e.convert.toAppBoolean(t.dns)}})))},value:function(t){return e.convert.toAppNumber(t)||t}}))))}});t.getConfig=u;var o=n.default.select({url:l,params:{share:!0}});t.share=o;var d=n.default.select({url:l,params:{free:"Free Selected"}});t.free=d},1568:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.resetMessage=t.updateMessage=t.getMessage=void 0;var r=s(a(30)),n="/CMD_EDIT_USER_MESSAGE",i=r.default.get({id:"USER_MESSAGE",url:n,after:function(e){return e.mapProp("message",e.convert.toAppText)}});t.getMessage=i;var l=r.default.post({url:n,params:{save:!0},schema:{subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING}});t.updateMessage=l;var u=r.default.post({url:n,params:{reset:!0}});t.resetMessage=u},1881:function(e,t,a){"use strict";a.r(t);var s=a(1882),r=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t.default=r.a},1882:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(15)),n=s(a(16)),i=s(a(17)),l=s(a(2)),u=a(1461),o=a(1568),d=a(1486),c=a(1556),f=a(1442),p=s(a(1557)),m=s(a(2714));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}window.customizeUser=u.customizeUser;var I,O,R={preload:[function(){return(0,d.getPackages)({ipp:9999})},c.getConfig],api:[{command:d.getPackages,bind:"packages"},{command:c.getConfig,bind:"config"}],commands:{validatePassword:f.validatePassword,validateUsername:f.validateUsername,validateDomain:f.validateDomain},components:{UserPackage:p.default,ChangeUserMessageDialog:m.default},data:function(){return{username:"",email:"",passwd:"",domain:"",packageName:"",ip:"",notify:!0,customize:!1,packageData:{}}},computed:{packages:function(){return this.$api.packages.rows.map((function(e){return e.package}))},licenseLimitReached:function(){if("admin"===this.$state.app.user.level){var e=Number(this.$state.app.tokens.LICENSE_NUSERS_MAX)||1/0,t=Number(this.$state.app.tokens.ADMINUSERS);return e>0&&t>=e}return!1},ips:function(){var e=this,t=this.$api.config.ips.filter((function(e){return"owned"!==e.status})).reduce((function(t,a){var s=a.ip,r=a.reseller||"free"===a.status?null:e.$gettext("Shared"),n="server"===a.status?e.$gettext("Server"):null;return _({},t,(0,l.default)({},a.ip,[s,r,n].filter((function(e){return e})).join(" - ")))}),{});return this.$api.config.haveShared&&(t.shared_random=this.$gettext("Shared - randomly selected")),t},requestData:function(){return _({username:this.username,email:this.$p6e.email2ascii(this.email),passwd:this.passwd,passwd2:this.passwd,domain:this.$p6e.toA(this.domain),ip:this.ip,notify:this.notify,package:this.customize?null:this.packageName},this.packageData)}},created:function(){var e=Object.keys(this.ips),t=(0,i.default)(e,1);if(this.ip=t[0],this.packages.length){var a=(0,i.default)(this.packages,1);this.packageName=a[0]}},methods:{editUserMessage:(O=(0,n.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.getMessage)();case 2:this.$dialog("CHANGE_USER_MESSAGE_DIALOG").open();case 3:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)}),create:(I=(0,n.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.createUser)(this.requestData);case 2:e.sent&&this.$router.push({name:"reseller/users"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})}};t.default=R},1883:function(e,t,a){"use strict";a.r(t);var s=a(1884),r=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t.default=r.a},1884:function(e,t,a){"use strict";var s=a(10),r=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(a(15)),l=r(a(16)),u=s(a(1568)),o={api:[{command:u.getMessage,bind:"message"}],data:function(){return{subject:"",message:""}},methods:{loadUserMessage:function(){Object.assign(this,this.$api.message)},saveUserMessage:function(){u.updateMessage({subject:this.subject,message:this.message})},resetMessage:(n=(0,l.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.resetMessage();case 2:return e.t0=Object,e.t1=this,e.next=6,u.getMessage();case 6:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}};t.default=o},2714:function(e,t,a){"use strict";a.r(t);var s=a(3218),r=a(1883);for(var n in r)"default"!==n&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var i=a(0),l=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);t.default=l.exports},2715:function(e,t){},3095:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{id:"create-user",disabled:e.licenseLimitReached}},[a("ui-button",{attrs:{slot:"header:buttons",theme:"safe"},on:{click:e.editUserMessage},slot:"header:buttons"},[a("translate",[e._v("Change User Message")])],1),e._v(" "),e.packages.length?a("app-page-section",[a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:e.$commands.validateUsername}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Username\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,email:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                E-mail\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                Should be valid email address\n            ")])],1),e._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:e.$commands.validatePassword}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Password\n            ")]),e._v(" "),a("input-password",{attrs:{slot:"content","show-generator":""},slot:"content",model:{value:e.passwd,callback:function(t){e.passwd=t},expression:"passwd"}})],1),e._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,domain:!0,api:e.$commands.validateDomain}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Domain\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.domain,callback:function(t){e.domain=t},expression:"domain"}}),e._v(" "),a("translate",{attrs:{slot:"error:domain"},slot:"error:domain"},[e._v("\n                Should be valid domain name\n            ")])],1),e._v(" "),e.customize?a("user-package",{attrs:{package:e.packageName},on:{update:function(t){e.packageData=t}}}):a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                User Package\n            ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.packages},slot:"content",model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}},[a("ui-button",{attrs:{slot:"additions:right"},on:{click:function(t){e.customize=!0}},slot:"additions:right"},[a("translate",[e._v("Customize")])],1)],1)],1),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                IP\n            ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.ips},slot:"content",model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}})],1),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"}),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("input-checkbox",{model:{value:e.notify,callback:function(t){e.notify=t},expression:"notify"}},[a("translate",[e._v("Send E-mail Notification")])],1)],1)],1)],1):a("app-page-section",[a("translate",{attrs:{tag:"p"}},[e._v("\n            Sorry, it seems that there are no user packages created yet.\n            Would you like to create one?\n        ")]),e._v(" "),a("ui-button-link",{directives:[{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}],attrs:{name:"reseller/user-packages/create",theme:"safe"}},[a("translate",[e._v("Create User Package")])],1)],1),e._v(" "),e.packages.length?a("ui-button",{attrs:{slot:"footer:buttons","validate-group":"createUser",theme:"primary"},on:{click:e.create},slot:"footer:buttons"},[a("translate",[e._v("Submit")])],1):e._e(),e._v(" "),a("change-user-message-dialog"),e._v(" "),a("translate",{attrs:{slot:"disabled-message"},slot:"disabled-message"},[e._v("\n        You have reached your license limits and could not create users anymore\n    ")])],1)},r=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}))},3218:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{size:"normal",id:"CHANGE_USER_MESSAGE_DIALOG",noAutoClose:"",noCloseBtn:""},on:{"dialog:open":e.loadUserMessage}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Edit User Message\n    ")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"message",validators:{required:!0},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Subject")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),e._v(" "),a("ui-form-element",{attrs:{group:"message",validators:{required:!0},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Message")]),e._v(" "),a("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"message"},on:{click:e.saveUserMessage},slot:"buttons"},[a("translate",[e._v("Save")])],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:e.resetMessage},slot:"buttons"},[a("translate",[e._v("Reset")])],1)],2)},r=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}))}}]);