(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1375:function(t,e,n){"use strict";n.r(e);var a=n(3111),s=n(2014);for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);var o=n(0),i=n(2809),u=n.n(i),l=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);"function"==typeof u.a&&u()(l),e.default=l.exports},2014:function(t,e,n){"use strict";n.r(e);var a=n(2015),s=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=s.a},2015:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(n(2)),r=n(2807);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var i={preload:function(t){var e=t.dom,n=t.pointer;return(0,r.getData)({ptr:n||null,domain:e||void 0})},components:{ZoneKey:a(n(2808)).default},api:[{command:r.getData,bind:{"response.keys":"keys","response.status":"status","response.zone":"zone",isDone:"dataLoaded"}}],props:{dom:{type:String,required:!1,default:function(){return this.$domain}}},computed:{keysRows:function(){return this.$api.status.keys?{zone:{id:this.$gettext("Zone-Signing Key"),data:this.$api.keys.zone},key:{id:this.$gettext("Key-Signing Key"),data:this.$api.keys.key}}:{}},zoneRows:function(){return[{label:this.$gettext("Signed"),value:this.$api.zone.signedDate},{label:this.$gettext("Expiry"),value:this.$api.zone.expiryDate},{label:this.$gettext("DS Record"),value:this.$api.zone.DS},{label:this.$gettext("DLV Record"),value:this.$api.zone.DLV}].map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{date:t.value instanceof Date})}))},ptr:function(){return this.$route.query.pointer||null}},watch:{$domain:"updateData"},methods:{updateData:function(){(0,r.getData)({domain:this.dom,ptr:this.ptr})},generateKeys:function(){(0,r.generateKeys)({ptr:this.ptr,domain:this.dom}).then(this.updateData)},signZone:function(){(0,r.signZone)({ptr:this.ptr,domain:this.dom}).then(this.updateData)}}};e.default=i},2016:function(t,e,n){"use strict";n.r(e);var a=n(2017),s=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=s.a},2017:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{id:String,created:Date,published:Date,activated:Date,value:String}};e.default=a},2807:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.signZone=e.generateKeys=void 0;var s=a(n(2)),r=a(n(30)),o=n(11),i=n(13),u=function(){var t,e=(t={},(0,s.default)(t,i.USER_LEVEL.ADMIN,"/CMD_DNS_ADMIN"),(0,s.default)(t,i.USER_LEVEL.USER,"/CMD_DNS_CONTROL"),t),n=(0,o.State)("app.route.path");return n?n.includes("".concat(i.USER_LEVEL.ADMIN,"/"))?e[i.USER_LEVEL.ADMIN]:e[i.USER_LEVEL.USER]:e[(0,o.State)("app.user.accessLevel")]},l=r.default.post({url:u,params:{action:"dnssec"},domain:!0}),c=l.extend({params:{generate_keys:!0}});e.generateKeys=c;var d=l.extend({params:{sign_zone:!0}});e.signZone=d;var p=function(t){return t?new Date(t.replace(/.*\((.*)\)/,"$1")):""},_=function(t,e){return{keys:!!t.ksk_id,zone:"no"!==t.DNS_DS,zoneOutdated:!(!t.signed_on||!t.ksk_created)&&e.convert.toAppDate(t.signed_on)<p(t.ksk_created)}},v=function(t,e){return e.flow(e.project({expiryDate:"expiry",signedDate:"signed_on",DLV:"DLV",DS:"DS"}),e.mapProps({expiryDate:e.convert.toAppDate,signedDate:e.convert.toAppDate,DLV:e.convert.toAppHtml,DS:e.convert.toAppHtml}))(t)},f=function(t,e){return e.flow(e.project({"zone.published":"zsk_publish","zone.id":"zsk_id","zone.created":"zsk_created","zone.activated":"zsk_activate","zone.key":"zsk_DNSKEY","key.published":"ksk_publish","key.id":"ksk_id","key.created":"ksk_created","key.activated":"ksk_activate","key.key":"ksk_DNSKEY"}),e.mapProps({zone:e.mapProps({published:p,created:p,activated:p}),key:e.mapProps({published:p,created:p,activated:p})}))(t)},y=r.default.post({url:u,id:"DNSSEC",params:{action:"dnssec",value:"get_keys"},domain:!0,response:{keys:!1,zone:!1},notifySuccess:!1,after:function(t){return function(e){return{status:_(e,t),zone:v(e,t),keys:f(e,t)}}}});e.getData=y},2808:function(t,e,n){"use strict";n.r(e);var a=n(3236),s=n(2016);for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);var o=n(0),i=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);e.default=i.exports},2809:function(t,e){},3111:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("template",{slot:"header:buttons"},[t.$api.status.zone&&t.$api.status.zoneOutdated?n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Re-sign your zone")])],1):t._e(),t._v(" "),t.$api.status.keys&&!t.$api.status.zone?n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Sign your zone")])],1):t._e(),t._v(" "),n("ui-button",{attrs:{theme:"safe"},on:{click:t.generateKeys}},[n("translate",[t._v("Generate Keys")])],1)],1),t._v(" "),t.$api.status.zone?n("app-page-section",[n("ui-grid",{attrs:{slot:"section:title",cross:"center"},slot:"section:title"},[n("translate",[t._v("Zone Signing")]),t._v(" "),t.$api.status.zoneOutdated?n("ui-badge",{attrs:{theme:"danger"}},[t._v("\n                Zone keys are newer than the Zone Signing.\n            ")]):t._e()],1),t._v(" "),t._l(t.zoneRows,(function(e){return n("ui-form-element",{key:e.label,attrs:{vertical:t.$_Client.isPhone}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.label))]),t._v(" "),n("template",{slot:"content"},[e.date?n("span",[t._v("\n                    "+t._s(t._f("date")(e.value))+"\n                ")]):n("ui-code-area",{attrs:{breakLines:"",content:e.value}})],1)],2)}))],2):t._e(),t._v(" "),t.$api.status.keys?n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Zone Keys")]),t._v(" "),n("table",[n("tr",[n("translate",{attrs:{tag:"th"}},[t._v("Key")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("ID")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Created")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Published")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Activated")])],1),t._v(" "),t._l(t.keysRows,(function(e){return[n("tr",[n("td",{staticClass:"txt:bold"},[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(e.data.id))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.created)))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.published)))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.activated)))])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"5"}},[n("ui-code-area",{attrs:{breakLines:"",content:e.data.key}})],1)])]}))],2),t._v(" "),n("ui-tabs",{attrs:{tabs:[{id:"zone",label:this.$gettext("Zone-Signing Key")},{id:"key",label:this.$gettext("Key-Signing Key")}]}},[n("zone-key",t._b({attrs:{slot:"tab:zone",value:t.$api.keys.zone.key},slot:"tab:zone"},"zone-key",t.$api.keys.zone,!1)),t._v(" "),n("zone-key",t._b({attrs:{slot:"tab:key",value:t.$api.keys.key.key},slot:"tab:key"},"zone-key",t.$api.keys.key,!1))],1)],1):t._e(),t._v(" "),t.$api.status.keys?t._e():n("app-page-section",[n("translate",{staticClass:"c:txt:danger"},[t._v("\n            Keys not yet generated.\n        ")])],1)],2)},s=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}))},3236:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zone-key"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("ID")]),t._v(" "),n("span",{attrs:{slot:"content"},domProps:{textContent:t._s(t.id)},slot:"content"})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Created")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.created)))])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Published")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.published)))])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Activated")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.activated)))])],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("ui-code-area",{attrs:{slot:"content",breakLines:"",content:t.value},slot:"content"})],1)],1)},s=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}))}}]);