(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1348:function(t,e,n){"use strict";n.r(e);var s=n(3085),r=n(1841);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);var i=n(0),o=n(2693),l=n.n(o),u=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},1841:function(t,e,n){"use strict";n.r(e);var s=n(1842),r=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e.default=r.a},1842:function(t,e,n){"use strict";var s=n(10),r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i=r(n(15)),o=r(n(16)),l=s(n(2459)),u=r(n(2692)),c={preload:l.getServers,api:[{command:l.getServers,bind:"servers"}],components:{CreateNameserversDialog:u.default},data:function(){return{ns1:"",ns2:"",checkedRows:[]}},computed:{checkedIPs:function(){return this.checkedRows.map((function(t){return t.ip}))},canDelete:function(){var t=this;if(2!==this.checkedRows.length||this.checkedRows.some((function(t){return!t.ns})))return!1;var e=this.$api.servers.domains.find((function(e){return t.checkedRows[0].ns.includes(e)}));return this.checkedRows[1].ns.includes(e)},actions:function(){return{create:this.$api.servers.ips.filter((function(t){return!t.ns})).length>=2,delete:this.canDelete}}},created:function(){this.ns1=this.$p6e.toU(this.$api.servers.nameservers.ns1),this.ns2=this.$p6e.toU(this.$api.servers.nameservers.ns2)},methods:{reloadRows:function(){l.getServers(),this.checkedRows=[]},updateDefaults:function(){l.setDefault({ns1:this.$p6e.toA(this.ns1),ns2:this.$p6e.toA(this.ns2)}).then(this.reloadRows)},deleteNameservers:(a=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.deleteServers({select:this.checkedIPs}).then(this.reloadRows);case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}};e.default=c},1843:function(t,e,n){"use strict";n.r(e);var s=n(1844),r=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e.default=r.a},1844:function(t,e,n){"use strict";var s=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=s(n(15)),i=s(n(16)),o=n(2459),l={api:[{command:o.getServers,bind:"servers"}],props:{forceVirtual:{type:Boolean,required:!1,default:!1}},data:function(){return{domain:"",ns1:{name:"ns1",ip:""},ns2:{name:"ns2",ip:""},virtual:this.forceVirtual}},computed:{apiData:function(){return this.$api.servers},domains:function(){return this.apiData.domains},ips:function(){return this.apiData.ips.map((function(t){return t.ip}))},select:function(){return[this.ns1.ip,this.ns2.ip]},suffix:function(){return this.domain?".".concat(this.domain):""},requestData:function(){return{domain:this.domain,select:this.select,ns1:this.ns1.name,ns2:this.ns2.name,virtual:this.virtual}}},methods:{selectDefaultDomain:function(){this.domain=this.domains[0]||""},create:(r=(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.createServer)(this.requestData);case 2:(0,o.getServers)(),this.$emit("create"),this.$reset();case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}};e.default=l},2459:function(t,e,n){"use strict";var s=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.setDefault=e.createServer=e.deleteServers=e.getServers=void 0;var r=s(n(2)),a=s(n(30));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}var o="/CMD_NAME_SERVER",l=a.default.get({id:"NAMESERVERS",url:o,after:function(t){return t.flow(t.project({ips:"data",domains:"domains",defaultDomain:"domains","nameservers.ns1":"ns1","nameservers.ns2":"ns2"}),t.mapProps({ips:t.flow(t.mapValues((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{ip:e})})),t.toArray,t.mapArray(t.getProps(["ip","status","value","ns"]))),domains:t.flow(t.mapValues(t.getProp("value")),t.toArray),defaultDomain:t.flow(t.find(t.getProp("selected")),t.getProp("value"))}))}});e.getServers=l;var u=a.default.select({url:o,params:{delete:!0}});e.deleteServers=u;var c=a.default.select({url:o,params:{create:!0},schema:{ns1:a.default.REQUIRED_STRING,ns2:a.default.REQUIRED_STRING,domain:a.default.REQUIRED_STRING,virtual:a.default.REQUIRED_BOOL}});e.createServer=c;var d=a.default.post({url:o,params:{action:"modify"},schema:{ns1:a.default.REQUIRED_STRING,ns2:a.default.REQUIRED_STRING}});e.setDefault=d},2692:function(t,e,n){"use strict";n.r(e);var s=n(3211),r=n(1843);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);var i=n(0),o=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);e.default=o.exports},2693:function(t,e){},3085:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("CREATE_NAMESERVERS_DIALOG").open()}},slot:"header:buttons"},[n("translate",[t._v("Create Name Servers")])],1),t._v(" "),n("app-page-section",[n("ui-r-table",{attrs:{columns:[{id:"ip",label:t.$gettext("IP"),editable:!1},{id:"status",label:t.$gettext("Status")},{id:"value",label:t.$gettext("User(s)")},{id:"ns",label:t.$gettext("Name Server"),editable:!1}],rows:t.$api.servers.ips,"checked-rows":t.checkedRows,"vertical-layout":t.$_Client.isPhone,"disable-pagination":"","equal-width-layout":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:ns",fn:function(e){var n=e.ns;return[t._v("\n                "+t._s(t._f("p6eUnicode")(n))+"\n            ")]}}])},[n("ui-table-action",{attrs:{slot:"table:actions",disabled:!t.actions.delete},on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}},slot:"table:actions"},[n("translate",[t._v("Delete")])],1)],1)],1),t._v(" "),n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("\n            Set the Name servers that will be assigned to new users\n        ")]),t._v(" "),n("ui-form-element",{attrs:{group:"setNameservers",validators:{required:!0,domain:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Name Server 1\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.ns1,callback:function(e){t.ns1=e},expression:"ns1"}})],1),t._v(" "),n("ui-form-element",{attrs:{group:"setNameservers",validators:{required:!0,domain:!0},underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Name Server 2\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.ns2,callback:function(e){t.ns2=e},expression:"ns2"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"setNameservers"},on:{click:t.updateDefaults},slot:"footer:buttons"},[n("translate",[t._v("Save")])],1)],1),t._v(" "),n("create-nameservers-dialog",{attrs:{"force-virtual":!t.actions.create},on:{create:function(e){t.checkedRows=[]}}}),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$gettext("nameserver")},on:{"click:confirm":t.deleteNameservers}})],1)},r=[];n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}))},3211:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"CREATE_NAMESERVERS_DIALOG",size:"normal"},on:{"dialog:open":t.selectDefaultDomain,"dialog:close":t.$reset}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Create Name Servers\n    ")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Domain:\n            ")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.domains},slot:"content",model:{value:t.domain,callback:function(e){t.domain=e},expression:"domain"}},[n("input-checkbox-button",{attrs:{slot:"additions:right",theme:"light",disabled:t.forceVirtual},slot:"additions:right",model:{value:t.virtual,callback:function(e){t.virtual=e},expression:"virtual"}},[n("translate",[t._v("Virtual")])],1)],1)],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Name Server 1:\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:t.suffix},slot:"content",model:{value:t.ns1.name,callback:function(e){t.$set(t.ns1,"name",e)},expression:"ns1.name"}})],1),t._v(" "),t.virtual?t._e():n("ui-form-element",{attrs:{vertical:""}},[n("input-select",{attrs:{slot:"content",options:t.ips},slot:"content",model:{value:t.ns1.ip,callback:function(e){t.$set(t.ns1,"ip",e)},expression:"ns1.ip"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Name Server 2:\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:t.suffix},slot:"content",model:{value:t.ns2.name,callback:function(e){t.$set(t.ns2,"name",e)},expression:"ns2.name"}})],1),t._v(" "),t.virtual?t._e():n("ui-form-element",{attrs:{vertical:""}},[n("input-select",{attrs:{slot:"content",options:t.ips},slot:"content",model:{value:t.ns2.ip,callback:function(e){t.$set(t.ns2,"ip",e)},expression:"ns2.ip"}})],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.create},slot:"buttons"},[n("translate",[t._v("Create Name Servers")])],1)],2)},r=[];n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}))}}]);