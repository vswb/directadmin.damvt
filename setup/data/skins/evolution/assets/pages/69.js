(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1377:function(e,t,n){"use strict";n.r(t);var a=n(3113),i=n(2022);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n(0),s=n(2813),u=n.n(s),l=Object(r.a)(i.default,a.a,a.b,!1,null,null,null);"function"==typeof u.a&&u()(l),t.default=l.exports},1462:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.setDomainPHPVersions=t.getDomainPHPVersions=t.deleteDomainIps=t.getDomainIps=t.assignDomainIps=t.setDomainPrivateHtml=t.modifyDomain=t.renameDomain=t.createDomain=t.deleteDomains=t.changeDomainStatus=t.setDefaultDomain=t.getCustomItems=t.getDomain=t.getDomains=void 0;var i=a(n(2)),o=a(n(30)),r=a(n(1489));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var u=o.default.get({id:"GET_DOMAINS",url:"/CMD_ADDITIONAL_DOMAINS",params:{bytes:!0},response:[],mapResponse:r.default.getDomains});t.getDomains=u;var l=o.default.get({id:"GET_DOMAIN",url:"/CMD_ADDITIONAL_DOMAINS",params:{action:"view"},schema:{domain:o.default.DOMAIN},mapResponse:r.default.getDomain});t.getDomain=l;var d=o.default.get({id:"DOMAIN_CUSTOM_ITEMS",url:"/HTM_ADD_DOMAIN",mapResponse:r.default.getDomain.custom_items});t.getCustomItems=d;var c=o.default.select({url:"/CMD_DOMAIN"}),m=c.extend({params:{default:!0}});t.setDefaultDomain=m;var f=c.extend({params:{reason:"Other",suspend:!0}});t.changeDomainStatus=f;var p=c.extend({params:{delete:!0,confirmed:!0,delete_data_aware:!0},schema:{delete_data:o.default.REQUIRED_BOOL}});t.deleteDomains=p;var D=o.default.post({url:"/CMD_DOMAIN",params:{action:"create"},schema:{domain:o.default.REQUIRED_STRING,bandwidth:o.default.OPTIONAL_STRING,unbandwidth:o.default.OPTIONAL_STRING,quota:o.default.OPTIONAL_STRING,uquota:o.default.OPTIONAL_STRING,ssl:o.default.OPTIONAL_STRING,cgi:o.default.OPTIONAL_STRING,php:o.default.OPTIONAL_STRING},notifySuccess:!0,notifyError:!0});t.createDomain=D;var _=o.default.post({url:"/CMD_CHANGE_DOMAIN",params:{json:!0},schema:{old_domain:o.default.REQUIRED_STRING,new_domain:o.default.REQUIRED_STRING}});t.renameDomain=_;var h=o.default.post({url:"/CMD_DOMAIN",params:{action:"modify",form_version:"1.1"},body:{domain:o.default.DOMAIN,bandwidth:o.default.REQUIRED_STRING,ubandwidth:o.default.REQUIRED_STRING,quota:o.default.REQUIRED_STRING,uquota:o.default.REQUIRED_STRING,ssl:o.default.REQUIRED_STRING,php:o.default.REQUIRED_STRING,cgi:o.default.REQUIRED_STRING,www_pointers:o.default.OPTIONAL_STRING,force_redirect:o.default.REQUIRED_STRING}});t.modifyDomain=h;var v=o.default.post({url:"/CMD_DOMAIN",params:{action:"private_html"},schema:{domain:o.default.DOMAIN,val:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.default.REQUIRED_STRING,{validator:function(e){return["directory","symlink"].includes(e)}}),force_ssl:o.default.OPTIONAL_BOOL},notifySuccess:!1});t.setDomainPrivateHtml=v;var b=o.default.post({url:"/CMD_DOMAIN",params:{action:"multi_ip",add:!0},schema:{domain:o.default.DOMAIN,ip:o.default.REQUIRED_STRING,dns:o.default.OPTIONAL_BOOL}});t.assignDomainIps=b;var O=o.default.get({id:"DOMAIN_IPS",url:"/CMD_ADDITIONAL_DOMAINS",params:{action:"view",ips:!0},schema:{domain:o.default.DOMAIN},after:function(e){return e.flow(e.project({assigned:"assigned_ips",available:"available_ips"}),e.mapProp("assigned",e.mapArray((function(e){return{ip:e}}))))}});t.getDomainIps=O;var g=o.default.post({url:"/CMD_DOMAIN",params:{action:"multi_ip",delete:!0},schema:{domain:o.default.DOMAIN,select:o.default.ROWS,removedns:o.default.OPTIONAL_BOOL}});t.deleteDomainIps=g;var I=o.default.get({id:"DOMAIN_PHP_VERSIONS",url:"/CMD_ADDITIONAL_DOMAINS",params:{action:"view"},domain:!0,mapResponse:r.default.getPhpVersions});t.getDomainPHPVersions=I;var y=o.default.post({url:"/CMD_DOMAIN",method:"POST",params:{action:"php_selector",save:!0},domain:!0,schema:{php1_select:o.default.REQUIRED_STRING}});t.setDomainPHPVersions=y},1489:function(e,t,n){"use strict";n.r(t),n.d(t,"toDomain",(function(){return s})),n.d(t,"getDomainInfo",(function(){return u})),n.d(t,"processCheckbox",(function(){return l})),n.d(t,"processText",(function(){return d})),n.d(t,"processSelect",(function(){return c})),n.d(t,"getMap",(function(){return m})),n.d(t,"getCustomItems",(function(){return p})),n.d(t,"getPhpVersions",(function(){return D}));var a=n(6),i=n(35),o=function(){return(o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=a.pipe(Number,Number.isFinite),s=function(e){return{domain:e.domain,active:Object(i.toBoolean)(e.active),defaultdomain:Object(i.toBoolean)(e.defaultdomain),subdomain:Object(i.toNumber)(e.subdomain),bandwidth:Object(i.toUsage)({usage:r(e.bandwidth)?e.bandwidth:"0",limit:e.bandwidth_limit}),quota:Object(i.toUsage)({usage:r(e.quota)?e.quota:"0",limit:e.quota_limit}),pointers:a.pipe(a.defaultTo({}),a.keys,a.map(String))(e.pointers)}},u=function(e){return{bandwidth:e.bandwidth,quota:e.quota,ssl:"ON"===e.ssl,cgi:"ON"===e.cgi,php:"ON"===e.php,show_ips:"yes"===e.has_multiple_ips,show_php:"yes"===e.has_php_selector,force_ssl:"yes"===e.force_ssl,private_html:"link"===e.private_html?"symlink":"directory",force_redirect:e.force_redirect||"none"}},l=function(e){return{type:"checkbox",value:"ON"===e.value||"yes"===e.checked,description:e.desc||"",label:e.string||"",api_only:"yes"===e.api_only,hidden:"yes"===e.hidden}},d=function(e){return{type:"text",description:e.desc||"",label:e.string||"",value:e.value||"",api_only:"yes"===e.api_only,hidden:"yes"===e.hidden}},c=function(e){var t=Object.keys(e).filter((function(e){return/^item\d+val*$/.test(e)})).reduce((function(t,n){var a;return o(o({},t),((a={})[e[n]]=e[n.replace("val","txt")]||"",a))}),{});return{type:"select",description:e.desc||"",label:e.string||"",value:e.value||e.default||"",options:t,api_only:"yes"===e.api_only,hidden:"yes"===e.hidden}},m=function(e){return e.split("&").reduce((function(e,t){var n,a=t.split("="),i=a[0],r=void 0===i?"":i,s=a[1],u=void 0===s?"":s;return o(o({},e),((n={})[r]=u,n))}),{})},f=function(e){switch(e.type){case"listbox":return c(e);case"checkbox":return l(e);default:return d(e)}},p=function(e){var t=a.mapObjIndexed(m,e.custom_domain_items||{}),n=a.pickAll(a.keys(t),e),i=a.mergeDeepLeft(a.mapObjIndexed((function(e){return{value:e}}),n),t);return a.mapObjIndexed(f,i)},D=function(e){if("yes"===e.has_php_selector){if("object"==typeof e.php1_select)return{enabled:!0,legacy:"2"===e.php_selector_count,versions:Object(i.toSelectData)(e.php1_select)};var t=a.pick(a.map((function(e){return"php"+e+"_select"}),a.range(1,5)),e.options);return{enabled:!0,versions:{value:e.php1_select,options:t},legacy:"2"===e.php_selector_count}}return{enabled:!1,legacy:!1,versions:{options:{},value:""}}};t.default={getDomains:function(e){return a.map(s,a.values(e))},getDomain:{domain:u,custom_items:p},getPhpVersions:D}},2022:function(e,t,n){"use strict";n.r(t);var a=n(2023),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=i.a},2023:function(e,t,n){"use strict";var a=n(10),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,s,u=i(n(15)),l=i(n(16)),d=a(n(6)),c=n(1462),m={components:{RenameDomainDialog:i(n(2812)).default},preload:c.getDomains,provide:function(){var e=this;return{getClass:function(t,n){return"quota"===n||"bandwidth"===n?"--usage:".concat(e.$api.domains[t][n].status):""}}},api:[{command:c.getDomains,bind:"domains"}],data:function(){return{checkedRows:[],deleteData:!0}},computed:{disableDomainRename:function(){return this.$state.app.tokens.cmd_overrides["commands.deny"].includes("CMD_CHANGE_DOMAIN")},checkedDomains:function(){return this.checkedRows.map((function(e){return e.domain}))},defaultDomain:function(){var e=(this.$api.domains.find((function(e){return e.defaultdomain}))||this.$api.domains[0]||{}).domain,t=void 0===e?"":e;return this.$p6e.toU(t)},sortBy:function(){return function(e){return d.path(d.contains(e,["quota","bandwidth"])?[e,"usage"]:[e])}},hasPointers:function(){return this.$api.domains.some((function(e){return e.pointers.length}))},permissions:function(){var e=this.$state.app.tokens.USER_CAN_ADD_REMOVE_DOMAINS;return{add:"2"!==e,delete:"0"===e}}},methods:{loadDomains:function(){(0,c.getDomains)(),this.$reset()},setCheckedAsDefault:(s=(0,l.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.setDefaultDomain)({select:this.checkedDomains});case 2:e.sent&&this.loadDomains();case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),changeDomainStatus:(r=(0,l.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.changeDomainStatus)({select:this.checkedDomains});case 2:e.sent&&this.loadDomains();case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),deleteDomains:(o=(0,l.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$api.domains.length===this.checkedRows.length,e.next=3,(0,c.deleteDomains)({select:this.checkedDomains,delete_data:this.deleteData});case 3:if(!e.sent){e.next=11;break}if(!t){e.next=10;break}return this.$notifications.info({title:this.$gettext("No default domain"),content:this.$gettext("You deleted all of your domains. You should create one for full functionality.")}),e.next=9,this.$store.dispatch("app/GET_TOKENS");case 9:this.$router.push({name:"user/domains/add"});case 10:this.loadDomains();case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}};t.default=m},2024:function(e,t,n){"use strict";n.r(t);var a=n(2025),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=i.a},2025:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(15)),o=a(n(16)),r=a(n(2)),s=n(1462);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var l,d={computed:(0,n(7).mapTokens)({domains:function(e){var t=this,n=e.DOMAIN_LIST;return n.reduce((function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,(0,r.default)({},n,t.$p6e.toU(n)))}),{})}}),data:function(){return{newDomain:"",oldDomain:""}},methods:{renameDomain:(l=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.$p6e.toA(this.newDomain))!==this.newDomain&&this.$notifications.info({title:this.$gettext("Domain name punycoded"),content:this.$gettext("Domain name has been automatically converted to punycode format. Punycode is used to encode internationalized domain names (IDN) by converting Unicode characters to ASCII.")}),e.next=4,(0,s.renameDomain)({new_domain:t,old_domain:this.oldDomain});case 4:this.$store.dispatch("app/GET_TOKENS"),this.$emit("rename"),this.$reset();case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}};t.default=d},2812:function(e,t,n){"use strict";n.r(t);var a=n(3238),i=n(2024);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n(0),s=Object(r.a)(i.default,a.a,a.b,!1,null,null,null);t.default=s.exports},2813:function(e,t){},3113:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("template",{slot:"header:buttons"},[e.$_cmd("CMD_CHANGE_DOMAIN")?n("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("RENAME_DOMAIN_DIALOG").open()}}},[n("translate",[e._v("Rename domain")])],1):e._e(),e._v(" "),e.permissions.add?n("ui-tokens-conditional-button",{attrs:{theme:"safe",name:"user/domains/add",token:"NDOMAINSMAX",usage:e.$api.domains.length,link:""}},[n("translate",[e._v("Add New")]),e._v(" "),n("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n                Domains Limit Reached\n            ")])],1):e._e()],1),e._v(" "),e.$_Client.isPhone?n("app-page-section",[n("ui-stats-summary",{attrs:{badges:[{label:e.$gettext("Domains"),value:e.$api.domains.length},{label:e.$gettext("Default Domain"),value:e.defaultDomain}]}})],1):e._e(),e._v(" "),n("app-page-section",[n("ui-r-table",{attrs:{rows:e.$api.domains,columns:[{id:"domain",label:e.$gettext("Domain"),grow:!0,editable:!1},{id:"bandwidth",label:e.$gettext("Bandwidth")},{id:"quota",label:e.$gettext("Disk Usage")},{id:"subdomain",label:e.$gettext("Subdomains")},e.hasPointers?{id:"pointers",label:e.$gettext("Pointers")}:{}],"checked-rows":e.checkedRows,"rows-count":e.$api.domains.length,"disable-pagination":"","vertical-layout":e.$_Client.isPhone,"sort-by":e.sortBy},on:{"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}},scopedSlots:e._u([{key:"col:domain",fn:function(t){var a=t.domain,i=t.defaultdomain,o=t.active;return n("div",{staticClass:"wrap:nowrap overfl:hid toverfl:ellipsis"},[n("ui-link",{class:{"txt:bold":i},attrs:{name:"user/domains/edit",params:{domain:a}}},[e._v("\n                    "+e._s(e.$p6e.toU(a))+"\n                ")]),e._v(" "),o?e._e():n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Suspended")])],1)],1)}},{key:"col:bandwidth",fn:function(t){var a=t.bandwidth;return n("ui-limited-usage",e._b({},"ui-limited-usage",a,!1))}},{key:"col:quota",fn:function(t){var a=t.quota;return n("ui-limited-usage",e._b({},"ui-limited-usage",a,!1))}},{key:"col:active",fn:function(t){return[t.item.active?n("translate",[e._v("\n                    Active\n                ")]):n("translate",[e._v("\n                    Suspended\n                ")])]}},{key:"col:pointers",fn:function(t){var a=t.pointers;return[a.length?e._l(a,(function(t){return n("div",{key:t},[n("strong",[e._v("P:")]),e._v(" "+e._s(t)+"\n                ")])})):n("span")]}}])},[e.$_Client.isPhone?e._e():n("ui-stats-summary",{attrs:{slot:"buttons:before",badges:[{label:e.$gettext("Domains"),value:e.$api.domains.length},{label:e.$gettext("Default Domain"),value:e.defaultDomain}]},slot:"buttons:before"}),e._v(" "),n("template",{slot:"table:actions"},[e.checkedRows.length<=1?n("ui-table-action",{on:{click:e.setCheckedAsDefault}},[n("translate",[e._v("Set as default")])],1):e._e(),e._v(" "),n("ui-table-action",{on:{click:e.changeDomainStatus}},[n("translate",[e._v("Suspend / Unsuspend")])],1),e._v(" "),e.permissions.delete?n("ui-table-action",{on:{click:function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[e._v("Delete")])],1):e._e()],1)],2),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("domain","domains",e.checkedDomains.length)},on:{"click:confirm":e.deleteDomains}},[n("input-checkbox",{directives:[{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}],model:{value:e.deleteData,callback:function(t){e.deleteData=t},expression:"deleteData"}},[n("translate",[e._v("Delete web data")])],1)],1)],1),e._v(" "),n("rename-domain-dialog",{on:{rename:e.loadDomains}})],2)},i=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},3238:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"RENAME_DOMAIN_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Rename Domain")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:"",group:"renameDomain",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Old Domain\n            ")]),e._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                Select the domain to change and enter its new value\n            ")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.domains},slot:"content",model:{value:e.oldDomain,callback:function(t){e.oldDomain=t},expression:"oldDomain"}})],1),e._v(" "),n("ui-form-element",{attrs:{validators:{required:!0,domain:!0},group:"renameDomain",vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("New Domain")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.newDomain,callback:function(t){e.newDomain=t},expression:"newDomain"}}),e._v(" "),n("translate",{attrs:{slot:"error:domain"},slot:"error:domain"},[e._v("Should be valid domain name")])],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",validateGroup:"renameDomain",theme:"primary"},on:{click:e.renameDomain},slot:"buttons"},[n("translate",[e._v("Rename")])],1)],2)},i=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))}}]);