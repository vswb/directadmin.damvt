(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{1342:function(e,t,n){"use strict";n.r(t);var a=n(3079),o=n(1793);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(2656);var s=n(0),l=n(2658),i=n.n(l),u=Object(s.a)(o.default,a.a,a.b,!1,null,"77f00302",null);"function"==typeof i.a&&i()(u),t.default=u.exports},1453:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemStatus=t.updateActiveStatus=t.getActiveStatus=t.updateEmailSetting=t.getEmailSetting=t.getTicketDefaults=t.replyTicket=t.createTicket=t.markTicketsRead=t.openTicket=t.closeTickets=t.getMessages=t.getTickets=t.sendMessageMultiple=void 0;var o=a(n(2)),r=a(n(30)),s=a(n(602));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple"},schema:{users:r.default.ROWS,priority:{type:String,default:"10",validator:function(e){return["10","20","30"].includes(e)}},subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,emailOnly:i({},r.default.OPTIONAL_BOOL,{default:!1}),all_email_accounts:r.default.OPTIONAL_BOOL}});t.sendMessageMultiple=u;var c=i({},r.default.OPTIONAL_BOOL,{default:!0}),p=r.default.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:c,show_hold:c,show_closed:c},after:function(e){return e.flow(e.wrap("rows"),e.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({new:e.convert.toAppBoolean,priority:e.convert.toAppNumber,replies:e.convert.toAppNumber,last_message:e.convert.toAppDate,subject:e.convert.toAppString,user:e.convert.toAppString})),filters:e.mapValues(e.mapProps({new:e.convert.toAppNumber,total:e.convert.toAppNumber})),enabled:e.convert.toAppBoolean,message:e.convert.toAppHtml}))}});t.getTickets=p;var f=r.default.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.deleteProp("info"),e.toArray,(function(e){return e.reverse()}),e.mapArrayProps({message:e.convert.toAppHtml,time:function(t){return(0,s.default)(Date.now(),e.convert.toAppDate(t))}}))}});t.getMessages=f;var m=r.default.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}});t.closeTickets=m;var d=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:r.default.REQUIRED_STRING}});t.openTicket=d;var v=r.default.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}});t.markTicketsRead=v;var _=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:function(e){return{encoding:e.email_only?"utf-8":null}},schema:{user:r.default.REQUIRED_STRING,priority:i({},r.default.REQUIRED_STRING,{validator:function(e){return["10","20","30"].includes(e)}}),subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,email_only:r.default.OPTIONAL_BOOL}});t.createTicket=_;var E=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING,subject:r.default.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:function(e){return["open","closed"].includes(e)}},message:r.default.REQUIRED_STRING}});t.replyTicket=E;var T=r.default.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:function(e){return e.flow(e.moveProp("EML_ONLY_CHEKCED","email.set"),e.moveProp("SHOW_EML_ONLY","email.show"),e.moveProp("TCKTTO","to"),e.moveProp("TCKTTYPE","type"),(function(e){return i({},e,{selected:Object.values(e.to).find((function(e){return!!e.selected}))})}),e.mapProps({email:e.mapProps({set:e.convert.toAppBoolean,show:e.convert.toAppBoolean}),to:function(e){return Object.values(e).map((function(e){return{label:e.text,value:e.value}}))},selected:function(e){return{label:e.text,value:e.value}}}))}});t.getTicketDefaults=T;var g=r.default.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:function(e){return e.flow(e.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),e.mapProps({featureEnabled:e.feedWith(1,(function(e){return void 0!==e.checked})),email:e.setDefault(""),checked:e.flow(e.setDefault("no"),e.convert.toAppBoolean)}))}});t.getEmailSetting=g;var A=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:r.default.REQUIRED_STRING,ON:r.default.REQUIRED_BOOL}});t.updateEmailSetting=A;var h=r.default.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:function(e){return function(t){return{html:t.info.html,active:e.convert.toAppBoolean(t.info.active)}}}});t.getActiveStatus=h;var y=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:r.default.REQUIRED_BOOL,html:r.default.REQUIRED_STRING}});t.updateActiveStatus=y;var I=r.default.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!1});t.getSystemStatus=I},1793:function(e,t,n){"use strict";n.r(t);var a=n(1794),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t.default=o.a},1794:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=a(n(15)),s=a(n(16)),l=n(1453),i={preload:l.getTicketDefaults,api:[{command:l.getTicketDefaults,bind:"defaults"}],data:function(){return{to:"",emailOnly:!1,priority:"10",subject:"",message:"",allEmailAccounts:!1}},computed:{options:function(){return this.$api.defaults}},created:function(){this.to=this.options.selected},methods:{createTicket:(o=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.createTicket)({user:this.to.value,emailOnly:this.emailOnly,priority:this.priority,subject:this.subject,message:this.message,type:this.$route.query.type||"request",email_only:this.emailOnly,all_email_accounts:this.emailOnly&&this.allEmailAccounts});case 2:e.sent&&this.$router.back();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}};t.default=i},1795:function(e,t,n){var a=n(2657);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5).default)("536c8682",a,!0,{})},2656:function(e,t,n){"use strict";var a=n(1795);n.n(a).a},2657:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"textarea[data-v-77f00302]{max-height:unset!important;width:100%;min-height:12rem!important}","",{version:3,sources:["/home/evo/evolution/src/js/pages/reseller/create-ticket.vue"],names:[],mappings:"AA4IA,0BACI,2BACA,WACA,0BAA4B,CAAA",file:"create-ticket.vue?vue&type=style&index=0&id=77f00302&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntextarea {\n    max-height: unset !important;\n    width: 100%;\n    min-height: 12rem !important;\n}\n"],sourceRoot:""}])},2658:function(e,t){},3079:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                To:\n            ")]),e._v(" "),n("input-select-legacy",{attrs:{slot:"content",options:e.options.to},slot:"content",model:{value:e.to,callback:function(t){e.to=t},expression:"to"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Priority:\n            ")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:{10:e.$gettext("Low"),20:e.$gettext("Medium"),30:e.$gettext("High")}},slot:"content",model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Subject:\n            ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],attrs:{slot:"content",type:"text"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}},slot:"content"})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Message:\n            ")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{slot:"content"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}},slot:"content"})],1),e._v(" "),n("ui-form-element",{attrs:{underline:!1}},[n("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"content"},slot:"content"},[n("input-checkbox",{model:{value:e.emailOnly,callback:function(t){e.emailOnly=t},expression:"emailOnly"}},[n("translate",[e._v("E-mail Only")])],1),e._v(" "),e.emailOnly?n("input-checkbox",{model:{value:e.allEmailAccounts,callback:function(t){e.allEmailAccounts=t},expression:"allEmailAccounts"}},[n("translate",[e._v("All Email Accounts")]),e._v(" "),n("ui-tooltip",[n("translate",[e._v("Message will be delivered to all User/Reseller accounts that were selected plus all E-Mail accounts that exist under domains for selected User accounts.")])],1)],1):e._e()],1)])],1),e._v(" "),n("template",{slot:"footer:buttons"},[n("ui-button",{attrs:{theme:"safe"},on:{click:e.createTicket}},[n("translate",[e._v("Create")])],1)],1)],2)},o=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}))}}]);