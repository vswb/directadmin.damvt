(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{1407:function(e,t,n){"use strict";n.r(t);var a=n(3143),s=n(2181);for(var l in s)"default"!==l&&function(e){n.d(t,e,(function(){return s[e]}))}(l);var o=n(0),r=n(2924),i=n.n(r),d=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(d),t.default=d.exports},2181:function(e,t,n){"use strict";n.r(t);var a=n(2182),s=n.n(a);for(var l in a)"default"!==l&&function(e){n.d(t,e,(function(){return a[e]}))}(l);t.default=s.a},2182:function(e,t,n){"use strict";var a=n(10),s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=s(n(17)),o=s(n(20)),r=a(n(2183)),i={preload:[r.getHandlers,r.getSystemHandlers],api:[{command:r.getHandlers,bind:"handlers"},{command:r.getSystemHandlers,bind:"systemHandlers"}],commands:r,data:function(){return{select:[],add:{name:"",extension:""},del:{extension:""}}},computed:{checkedExtensions:function(){var e=this;return this.$api.handlers.rows.filter((function(t){return e.select.includes(t.handler)})).map((function(e){return e.extensions.split(" ")})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return!!e}))},handlersList:function(){return[].concat((0,o.default)(this.$api.handlers.rows.map((function(e){return e.handler}))),(0,o.default)(this.$api.systemHandlers.rows.map((function(e){return e.handler}))))},extensionsList:function(){return[].concat((0,o.default)(this.$api.handlers.rows.map((function(e){return e.extensions}))),(0,o.default)(this.$api.systemHandlers.rows.map((function(e){return e.extensions}))))}},methods:{reloadTable:function(){this.$reloadApiTable(),this.$reset()},createHandler:function(){r.createHandler({name:this.add.name.trim(),extension:this.add.extension.trim()}).then(this.reloadTable).then(this.$reset)},deleteHandlers:function(){r.deleteHandlers(this.$get("select")).then(this.reloadTable).then(this.$reset)},deleteExtensions:function(){r.deleteHandlerExtension({select:this.select,extension:this.del.extension}).then(this.reloadTable).then(this.$reset)},validateExtension:function(e){return!e||!this.extensionsList.includes(e)},initDel:function(){var e=(0,l.default)(this.checkedExtensions,1);this.del.extension=e[0]}}};t.default=i},2183:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteHandlerExtension=t.deleteHandlers=t.createHandler=t.getSystemHandlers=t.getHandlers=void 0;var s=a(n(30)),l=s.default.get({id:"HANDLERS",url:"/CMD_HANDLERS",domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return{rows:e}}),e.processTableInfo("rows"),e.mapProps({rows:e.toArray}))}});t.getHandlers=l;var o=l.extend({id:"SYSTEM_HANDLERS",params:{action:"system"}});t.getSystemHandlers=o;var r=s.default.post({url:"/CMD_HANDLERS",params:{action:"add"},domain:!0,schema:{name:s.default.REQUIRED_STRING,extension:s.default.REQUIRED_STRING}});t.createHandler=r;var i=s.default.select({url:"/CMD_HANDLERS",params:{action:"multiple",button:"type"},domain:!0});t.deleteHandlers=i;var d=i.extend({params:{button:"extension"},schema:{extension:s.default.REQUIRED_STRING}});t.deleteHandlerExtension=d},2924:function(e,t){},3143:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("template",{slot:"header:buttons"},[n("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("CREATE_HANDLER_DIALOG").open()}}},[n("translate",[e._v("Create Handler")])],1)],1),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({on:{"action:deleteHandler":function(t){e.$dialog("DELETE_HANDLERS_DIALOG").open()},"action:deleteExtension":function(t){e.$dialog("DELETE_EXTENSION_DIALOG").open()}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getHandlers,rowID:"handler",columns:{handler:e.$gettext("Handler"),extensions:e.$gettext("Extensions")},actions:{deleteHandler:e.$gettext("Delete Handler"),deleteExtension:e.$gettext("Delete Extension")},equalWidthLayout:!0,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"user/handlers/system"},slot:"bottom:links"},[n("translate",[e._v("System Apache Handlers")])],1),e._v(" "),n("ui-dialog",{attrs:{id:"CREATE_HANDLER_DIALOG",theme:"safe"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add New Apache Handler")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{group:"createHandler",validators:{required:!0,maxLength:50}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Name")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.name,callback:function(t){e.$set(e.add,"name",t)},expression:"add.name"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"createHandler",validators:{required:!0,notEmpty:function(e){return!e||!!e.trim()},validateExtension:e.validateExtension,maxLength:10}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Extension")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.extension,callback:function(t){e.$set(e.add,"extension",t)},expression:"add.extension"}}),e._v(" "),n("translate",{attrs:{slot:"error:notEmpty"},slot:"error:notEmpty"},[e._v("Required field")]),e._v(" "),n("translate",{attrs:{slot:"error:validateExtension"},slot:"error:validateExtension"},[e._v("Handler for such extension already exists")])],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"createHandler"},on:{click:e.createHandler},slot:"buttons"},[n("translate",[e._v("Create")])],1)],2),e._v(" "),n("ui-dialog-delete-items",{attrs:{id:"DELETE_HANDLERS_DIALOG",subject:e.$ngettext("handler","handlers",e.select.length)},on:{"click:confirm":e.deleteHandlers}}),e._v(" "),n("ui-dialog",{attrs:{id:"DELETE_EXTENSION_DIALOG",theme:"danger"},on:{"dialog:open":e.initDel}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Delete Extension")]),e._v(" "),n("ui-form-element",{attrs:{slot:"content",group:"deleteExtension",validators:{required:!0}},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Extension:")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.checkedExtensions},slot:"content",model:{value:e.del.extension,callback:function(t){e.$set(e.del,"extension",t)},expression:"del.extension"}})],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger",validateGroup:"deleteExtension"},on:{click:e.deleteExtensions},slot:"buttons"},[n("translate",[e._v("Delete")])],1)],1)],2)},s=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}))}}]);