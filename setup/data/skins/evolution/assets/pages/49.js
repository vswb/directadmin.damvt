(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1310:function(t,e,a){"use strict";a.r(e);var n=a(3049),l=a(1675);for(var s in l)"default"!==s&&function(t){a.d(e,t,(function(){return l[t]}))}(s);var i=a(0),o=a(2570),r=a.n(o),u=Object(i.a)(l.default,n.a,n.b,!1,null,null,null);"function"==typeof r.a&&r()(u),e.default=u.exports},1675:function(t,e,a){"use strict";a.r(e);var n=a(1676),l=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e.default=l.a},1676:function(t,e,a){"use strict";var n=a(10),l=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,i=l(a(15)),o=l(a(16)),r=n(a(2567)),u=a(24),c=l(a(2568)),d=l(a(2569)),p={preload:r.getDetails,commands:r,components:{LinkIpDialog:c.default,UnlinkIpDialog:d.default},api:[{command:r.getDetails,bind:"data"}],mixins:[(0,u.$bindTab)({defaultTab:"details",param:"tab"})],props:{ip:{type:String,required:!0}},data:function(){return{select:[]}},computed:{details:function(){return this.$api.data.details},available_ips:function(){return this.$api.data.available_ips}},created:function(){this.detailsData={status:this.$gettext("Status"),netmask:this.$gettext("Netmask"),users:this.$gettext("Users"),nameserver:this.$gettext("Name Server")}},methods:{linkIp:function(t){r.linkIp(t).then(this.$reloadApiTable)},unlinkIp:function(t){r.unlinkIp(t).then(this.$reloadApiTable)},setGlobal:(s=(0,o.default)(i.default.mark((function t(e){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.setGlobal({ip:this.ip,global:e||null});case 2:r.getDetails({ip:this.ip});case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})}};e.default=p},1677:function(t,e,a){"use strict";a.r(e);var n=a(1678),l=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e.default=l.a},1678:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{ip:{type:String,required:!0,default:""},availableIps:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{linkIP:"",dns:!0,apache:!0,apply:!0,background:!0}},methods:{submit:function(){this.$emit("submit",{ip:this.ip,ip_to_link:this.linkIP,dns:this.dns,apache:this.apache,apply:this.apply,background:this.background})}}};e.default=n},1679:function(t,e,a){"use strict";a.r(e);var n=a(1680),l=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e.default=l.a},1680:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{flushDNS:!0,rewriteApache:!0}},props:{ip:{type:String,required:!0},select:{type:Array,requried:!0}},methods:{submit:function(){this.$emit("submit",{ip:this.ip,select:this.select,flush_dns:this.flushDNS,rewrite_apache:this.rewriteApache})}}};e.default=n},2567:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=e.unlinkIp=e.linkIp=e.getDetails=void 0;var l=n(a(30)),s="/CMD_IP_MANAGER_DETAILS",i=l.default.get({url:s,id:"IP_MANAGER_DETAILS",schema:{ip:l.default.REQUIRED_STRING},pagiantion:!0,after:function(t){return t.flow(t.moveProp("value","details.users"),t.moveProp("status","details.status"),t.moveProp("reseller","details.reseller"),t.moveProp("resellers_with_ip","details.resellers"),t.moveProp("ns","details.nameserver"),t.moveProp("netmask","details.netmask"),t.moveProp("gateway","details.gateway"),t.moveProp("ip","details.ip"),t.moveProp("global","details.global"),t.mapProps({linked_ips:t.toTable(t.mapArrayProps({dns:t.convert.toAppBoolean,apache:t.convert.toAppBoolean})),details:t.mapProps({users:t.convert.toAppNumber,global:t.isEqual("yes"),resellers:t.setDefault([])})}))}});e.getDetails=i;var o=l.default.post({url:s,params:{json:!0,action:"add"},schema:{ip:l.default.REQUIRED_STRING,ip_to_link:l.default.REQUIRED_STRING,dns:l.default.REQUIRED_BOOL,apache:l.default.REQUIRED_BOOL,apply:l.default.REQUIRED_BOOL}});e.linkIp=o;var r=l.default.select({url:s,params:{json:!0,remove:!0},schema:{ip:l.default.REQUIRED_STRING,rewrite_apache:l.default.REQUIRED_BOOL,flush_dns:l.default.REQUIRED_BOOL}});e.unlinkIp=r;var u=l.default.post({url:s,params:{action:"global"},schema:{ip:l.default.REQUIRED_STRING,global:l.default.OPTIONAL_BOOL}});e.setGlobal=u},2568:function(t,e,a){"use strict";a.r(e);var n=a(3190),l=a(1677);for(var s in l)"default"!==s&&function(t){a.d(e,t,(function(){return l[t]}))}(s);var i=a(0),o=Object(i.a)(l.default,n.a,n.b,!1,null,null,null);e.default=o.exports},2569:function(t,e,a){"use strict";a.r(e);var n=a(3191),l=a(1679);for(var s in l)"default"!==s&&function(t){a.d(e,t,(function(){return l[t]}))}(s);var i=a(0),o=Object(i.a)(l.default,n.a,n.b,!1,null,null,null);e.default=o.exports},2570:function(t,e){},3049:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("translate",{attrs:{slot:"page:title"},slot:"page:title"},[t._v("\n        Details for %{ip}\n    ")]),t._v(" "),t.available_ips.length?a("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("LINK_IP_DIALOG").open()}},slot:"header:buttons"},[a("translate",[t._v("Link IP")])],1):t._e(),t._v(" "),a("app-page-section",[a("ui-tabs",{attrs:{tabs:[{id:"details",label:t.$gettext("Details")},{id:"ips",label:t.$gettext("Linked IP(s)")}],selected:t.tab},on:{"update:selected":function(e){t.tab=e}}},[a("ui-table",{key:"details-table",attrs:{slot:"tab:details",items:[t.details],transposed:""},slot:"tab:details"},[t._l(t.detailsData,(function(e,n){return a("ui-column",t._b({key:n,attrs:{visible:!!t.details[n],fit:""}},"ui-column",{label:e,id:n},!1))})),t._v(" "),a("ui-column",{attrs:{id:"resellers",visible:Boolean(t.details.global&&t.details.resellers.length),label:t.$gettext("Resellers")}},[[t._v("\n                        "+t._s(t.details.resellers.join(", "))+"\n                    ")]],2),t._v(" "),a("ui-column",{attrs:{id:"reseller",label:t.$gettext("Reseller"),visible:Boolean(t.details.reseller&&!(t.details.global&&t.details.resellers.length))}}),t._v(" "),a("ui-column",{attrs:{id:"global",label:t.$gettext("Global"),visible:["shared","free"].includes(t.details.status)},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.global;return[a("input-checkbox",{attrs:{model:n},on:{change:t.setGlobal}},[a("translate",[t._v("When enabled, this IP can be used by multiple Resellers")])],1)]}}])})],2),t._v(" "),a("ui-api-table",t._b({attrs:{slot:"tab:ips"},on:{"action:unlink":function(e){t.$dialog("UNLINK_IP_DIALOG").open()}},slot:"tab:ips",scopedSlots:t._u([{key:"col:dns",fn:function(e){var n=e.dns;return[a("translate",n?[t._v("\n                        Yes\n                    ")]:[t._v("\n                        No\n                    ")])]}},{key:"col:apache",fn:function(e){var n=e.apache;return[a("translate",n?[t._v("\n                        Yes\n                    ")]:[t._v("\n                        No\n                    ")])]}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{command:t.$commands.getDetails,property:"linked_ips",rowID:"ip",columns:{ip:t.$gettext("IP Address"),dns:t.$gettext("Added to DNS"),apache:t.$gettext("Added to Apache")},actions:{unlink:t.$gettext("Un-Link")},requestData:{ip:t.ip},verticalLayout:t.$_Client.isPhone},!1))],1)],1),t._v(" "),a("link-ip-dialog",{attrs:{ip:t.ip,"available-ips":t.available_ips},on:{submit:t.linkIp}}),t._v(" "),a("unlink-ip-dialog",t._b({on:{submit:t.unlinkIp}},"unlink-ip-dialog",{ip:t.ip,select:t.select},!1))],1)},l=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return l}))},3190:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ui-dialog",{attrs:{id:"LINK_IP_DIALOG",theme:"safe"},on:{"dialog:close":t.$reset}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Link an IP to %{ip}\n    ")]),t._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"linkIP",validators:{required:!0},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                IP Address\n            ")]),t._v(" "),a("input-select",{attrs:{slot:"content",options:t.availableIps},slot:"content",model:{value:t.linkIP,callback:function(e){t.linkIP=e},expression:"linkIP"}})],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.dns,callback:function(e){t.dns=e},expression:"dns"}},[a("translate",[t._v("Add to DNS")])],1),t._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Linking an IP with DNS will duplicate the A/AAAA records for the current IP with the linked IP.\n            ")])],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.apache,callback:function(e){t.apache=e},expression:"apache"}},[a("translate",[t._v("Add to Apache")])],1),t._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Linking an IP with apache will add the linked IP into the VirtualHost with the current IP.\n            ")])],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.apply,callback:function(e){t.apply=e},expression:"apply"}},[a("translate",[t._v("Apply to existing domains")])],1),t._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v('\n                The "Apply to existing Domains" option will trigger the httpd.conf rewrites and insert A/AAAA records into the local DNS zones. Disabling this checkbox won\'t touch the DNS or httpd.conf files, but future httpd.cont rewrites will have the linked IP added.\n            ')])],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.background,callback:function(e){t.background=e},expression:"background"}},[a("translate",[t._v("Link in background")])],1),t._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                When this is set, the add link task is processed in the background via task.queue. It may take up to 1 minute before the processing starts, and an unknown amount of time, depending on the number of websites present.\n            ")])],1)],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"linkIP"},on:{click:t.submit},slot:"buttons"},[a("translate",[t._v("Link")])],1)],2)},l=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return l}))},3191:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ui-dialog",{attrs:{id:"UNLINK_IP_DIALOG",theme:"danger"},on:{"dialog:close":t.$reset}},[a("translate",{attrs:{slot:"title","translate-n":t.select.length,"translate-plural":"Un-Link IP Addresses"},slot:"title"},[t._v("\n        Un-Link IP Address\n    ")]),t._v(" "),a("template",{slot:"content"},[a("translate",{staticClass:"txt:bold",attrs:{"translate-n":t.select.length,"translate-plural":"Are you sure you want to unlink selected IPs?"}},[t._v("\n            Are you sure you want to unlink selected IP?\n        ")]),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.flushDNS,callback:function(e){t.flushDNS=e},expression:"flushDNS"}},[a("translate",[t._v("Flush from DNS")])],1)],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.rewriteApache,callback:function(e){t.rewriteApache=e},expression:"rewriteApache"}},[a("translate",[t._v("Rewrite Apache")])],1)],1)],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:t.submit},slot:"buttons"},[a("translate",[t._v("Un-Link")])],1)],2)},l=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return l}))}}]);