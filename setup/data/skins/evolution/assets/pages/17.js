(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1415:function(e,t,n){"use strict";n.r(t);var s=n(3151),a=n(2205);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=n(2951),l=n.n(i),u=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},1538:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.markRead=t.saveSystemOptions=t.getSystemOptions=t.getClearOptions=t.clearSystem=t.deleteMessages=t.getMessage=t.postReply=t.getTicket=t.getTickets=t.getMessages=void 0;var a=s(n(2)),r=s(n(30)),o=s(n(602));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l="/CMD_TICKET",u=r.default.get({id:"MESSAGES",url:l,params:{type:"message"},pagination:!0,schema:{sort:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.default.SORT,{default:[{key:3,order:"DESC"}]})},after:function(e){return e.flow(e.project({rows:"messages"}),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.mapArray(e.moveProp("message","id")),e.mapArrayProps({new:e.convert.toAppBoolean,last_message:e.convert.toAppDate,subject:e.convert.toAppHtml}))))}});t.getMessages=u;var c=r.default.get({id:"TICKETS",url:l,params:{type:"ticket"},pagination:!0,schema:{sort:r.default.SORT,show_closed:{type:Boolean,required:!1,default:!0}},after:function(e){return e.flow(e.getProp("tickets"),e.toTable(e.mapArrayProps({subject:e.convert.toAppString,last_message:e.convert.toAppDate,new:e.convert.toAppBoolean})))}});t.getTickets=c;var d=r.default.get({id:"TICKET",url:l,response:[],params:{action:"view",type:"ticket"},schema:{number:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.deleteProp("info"),e.toArray,(function(e){return e.reverse()}),e.mapArrayProps({message:e.convert.toAppHtml,time:function(t){return(0,o.default)(Date.now(),e.convert.toAppDate(t))}}))}});t.getTicket=d;var p=r.default.post({url:l,params:{action:"reply",type:"reply",user:"creator",subject:"none",priority:"0"},schema:{message:r.default.REQUIRED_STRING,number:r.default.REQUIRED_STRING}});t.postReply=p;var f=r.default.get({id:"MESSAGE",url:l,params:{action:"view",type:"message"},schema:{number:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.getProp("0"),e.moveProp("message","content"),e.mapProps({priority:e.convert.toAppNumber,content:e.convert.toAppHtml,time:e.convert.toAppDate}))}});t.getMessage=f;var m=r.default.select({url:l,params:{action:"multiple",delete:!0,type:"message"}});t.deleteMessages=m;var g=r.default.post({url:l,params:{action:"clear"},schema:{subject:r.default.REQUIRED_STRING,when:r.default.REQUIRED_STRING,delete_messages_days:r.default.OPTIONAL_STRING}});t.clearSystem=g;var v=r.default.get({id:"CLEAR_MESSAGES_OPTIONS",url:l,after:function(e){return e.flow(e.project({subjects:"clear_messages.SUBJECT_SELECT",periods:"clear_messages.WHEN_SELECT"}),e.mapProps({subjects:e.flow(e.toArray,e.mapArray(e.getProp("text")),e.filter(e.flow(e.isEqual("-- anything --"),e.not))),periods:e.transformObject((function(e){var t=e.text,n=e.value;return(0,a.default)({},n,t)}))}))}});t.getClearOptions=v;var _=r.default.get({id:"MESSAGES_SYSTEM_OPTIONS",url:l,after:function(e){return e.flow(e.getProp("settings"),e.project({"days.messages":"DELETE_MESSAGES_DAYS","days.tickets":"DELETE_TICKETS_DAYS",email:"EMAIL",send:"EMAILCHECKED"}),e.mapProp("send",e.isEqual("checked")))}});t.getSystemOptions=_;var b=r.default.post({url:l,params:{action:"email",save:!0},schema:{email:r.default.REQUIRED_STRING,ON:r.default.REQUIRED_BOOL,delete_tickets_days:r.default.REQUIRED_STRING,delete_messages_days:r.default.REQUIRED_STRING},notifySuccess:!1});t.saveSystemOptions=b;var h=r.default.select({url:l,params:{action:"multiple",read:!0,type:"message"}});t.markRead=h},2205:function(e,t,n){"use strict";n.r(t);var s=n(2206),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2206:function(e,t,n){"use strict";var s=n(10),a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),o=a(n(16)),i=a(n(2)),l=s(n(1538)),u=n(7),c=a(n(2942)),d=a(n(2943)),p=a(n(2944)),f=a(n(2947));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var g,v,_,b={components:{TicketsTable:a(n(2950)).default,ViewMessageDialog:c.default,ClearMessageSystemDialog:d.default,MessageSystemOptionsDialog:p.default,ViewTicketDialog:f.default},preload:[l.getMessages,l.getTickets,l.getClearOptions],commands:l,data:function(){return{select:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,u.mapTokens)({newMessages:"NEWMESSAGES"}),{tab:{get:function(){return"/user/messages"===this.$route.path?"messages":"tickets"},set:function(e){this.$route.path!=="/user/".concat(e)&&this.$router.push("messages"===e?"/user/messages":"/user/tickets")}},page:function(){return this.$route.query.page||"1"},ipp:function(){return this.$route.query.ipp||"20"}}),created:function(){this.$route.query.id&&this.openMessageDialog(this.$route.query.id)},methods:{openMessageDialog:(_=(0,o.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getMessage({number:t});case 2:e.sent?(this.$dialog("VIEW_MESSAGE_DIALOG").open(),this.$store.dispatch("app/GET_TOKENS")):this.$notifications.error({title:this.$gettext("Cannot execute your request"),content:this.$gettext("Message #".concat(t," is not appears in your message system"))});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)}),deleteMessages:(v=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.deleteMessages(this.$get("select"));case 2:this.$reset(),this.$store.dispatch("app/GET_TOKENS"),this.$refs.table.reloadTable();case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),markAsRead:function(){l.markRead({select:this.select}).then(this.$reset).then(this.$reloadApiTable)},openOptionsDialog:(g=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getSystemOptions();case 2:this.$dialog("MESSAGE_SYSTEM_OPTIONS_DIALOG").open();case 3:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},watch:{newMessages:function(){this.$refs.table&&this.$refs.table.reloadTable()}}};t.default=b},2207:function(e,t,n){"use strict";n.r(t);var s=n(2208),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={api:[{command:n(1538).getMessage,bind:{"response.content":"content","response.time":"time","response.subject":"subject"}}]};t.default=s},2209:function(e,t,n){"use strict";n.r(t);var s=n(2210),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2210:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(15)),o=s(n(16)),i=n(1538),l={data:function(){return{subject:"",when:"all",days:"1",deleteEverything:!1}},api:[{command:i.getClearOptions,bind:"options"}],computed:{subjects:function(){return this.$api.options.subjects},periods:function(){return this.$api.options.periods}},methods:{clearMessageSystem:(a=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.clearSystem)({delete_messages_days:this.days,subject:this.deleteEverything?"":this.subject,subject_select:this.deleteEverything?"2":null,when:this.when});case 2:this.$store.dispatch("app/GET_TOKENS"),this.$emit("updateMessages");case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},watch:{when:function(e){"all"!==e||this.days||(this.days="1")}}};t.default=l},2211:function(e,t,n){"use strict";n.r(t);var s=n(2212),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2212:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(15)),o=s(n(16)),i=n(1538),l={data:function(){return{send:!1,email:"",days:{tickets:"0",messages:"0"},deleteTickets:!1,deleteMessages:!1}},api:[{command:i.getSystemOptions,bind:"options"}],created:function(){this.initData()},methods:{save:(a=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.saveSystemOptions)({delete_messages_days:this.deleteMessages?this.days.messages:"0",delete_tickets_days:this.deleteTickets?this.days.tickets:"0",ON:this.send,email:this.email});case 2:e.sent.success&&this.$notifications.success({title:"Options saved successfully"});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),initData:function(){this.$_initData(this.$api.options),this.deleteTickets="0"!==this.days.tickets,this.deleteMessages="0"!==this.days.messages}}};t.default=l},2213:function(e,t,n){var s=n(2946);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,n(5).default)("1f3ec70c",s,!0,{})},2214:function(e,t,n){"use strict";n.r(t);var s=n(2215),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2215:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(15)),o=s(n(16)),i=n(1538),l={api:[{command:i.getTicket,bind:"messages"}],computed:{number:function(){return this.$state.commands.TICKET.params.number||""},messages:function(){return this.$api.messages}},data:function(){return{message:""}},filters:{firstLetter:function(e){return e[0].toUpperCase()}},methods:{postReply:(a=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.postReply)(this.$get(["number","message"]));case 2:this.$reset(),(0,i.getTicket)(this.$get("number"));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}};t.default=l},2216:function(e,t,n){var s=n(2949);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,n(5).default)("7bce8aac",s,!0,{})},2217:function(e,t,n){"use strict";n.r(t);var s=n(2218),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=a.a},2218:function(e,t,n){"use strict";var s=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=s(n(15)),o=s(n(16)),i=n(1538),l={data:function(){return{showClosed:!0}},computed:(0,n(7).mapTokens)({newTickets:"NEWTICKETS"}),commands:{getTickets:i.getTickets},watch:{newTickets:function(e,t){Number(e)>Number(t)&&this.$refs.table.reloadTable()}},methods:{openTicket:(a=(0,o.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getTicket)({number:t});case 2:this.$dialog("VIEW_TICKET_DIALOG").open(),this.$store.dispatch("app/GET_TOKENS"),this.$reloadApiTable();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}};t.default=l},2942:function(e,t,n){"use strict";n.r(t);var s=n(3271),a=n(2207);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2943:function(e,t,n){"use strict";n.r(t);var s=n(3272),a=n(2209);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2944:function(e,t,n){"use strict";n.r(t);var s=n(3273),a=n(2211);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n(2945);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2945:function(e,t,n){"use strict";var s=n(2213);n.n(s).a},2946:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"#MESSAGE_SYSTEM_OPTIONS_DIALOG input[type=text]{width:1px}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/messages/_dialogs/message-system-options.vue"],names:[],mappings:"AAqIA,gDAEQ,SAAU,CAAA",file:"message-system-options.vue?vue&type=style&index=0&lang=scss&",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#MESSAGE_SYSTEM_OPTIONS_DIALOG {\n    input[type="text"]{\n        width: 1px;\n    }\n}\n'],sourceRoot:""}])},2947:function(e,t,n){"use strict";n.r(t);var s=n(3274),a=n(2214);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n(2948);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2948:function(e,t,n){"use strict";var s=n(2216);n.n(s).a},2949:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"#VIEW_TICKET_DIALOG .replyButton{position:absolute;right:1.5rem;bottom:1.5rem;z-index:2}#VIEW_TICKET_DIALOG textarea{resize:none}#VIEW_TICKET_DIALOG .col\\:avatar{width:1%;white-space:nowrap}#VIEW_TICKET_DIALOG .col\\:avatar .messageAvatar{color:#fff;font-size:1.6rem;font-weight:700}#VIEW_TICKET_DIALOG .col\\:message .userName{font-weight:600;font-size:1.4rem}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/messages/_dialogs/view-ticket-dialog.vue"],names:[],mappings:"AA0GA,iCAEQ,kBACA,aACA,cACA,SAAU,CALlB,6BAQQ,WAAY,CARpB,iCAWQ,SACA,kBAAmB,CAZ3B,gDAcY,WACA,iBACA,eAAgB,CAhB5B,4CAqBY,gBACA,gBAAiB,CAAA",file:"view-ticket-dialog.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#VIEW_TICKET_DIALOG {\n    .replyButton {\n        position: absolute;\n        right: 1.5rem;\n        bottom: 1.5rem;\n        z-index: 2;\n    }\n    textarea { \n        resize: none;\n    }\n    .col\\:avatar {\n        width: 1%;\n        white-space: nowrap;\n        .messageAvatar {\n            color: #FFF;\n            font-size: 1.6rem;\n            font-weight: 700;\n        }\n    }\n    .col\\:message {\n        .userName {\n            font-weight: 600;\n            font-size: 1.4rem;\n        }\n    }\n}\n\n"],sourceRoot:""}])},2950:function(e,t,n){"use strict";n.r(t);var s=n(3275),a=n(2217);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2951:function(e,t){},3151:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("ui-tabs",{attrs:{tabs:[{id:"messages",label:e.$gettext("Messages")},"1"===e.$state.app.tokens.TICKET_SYSTEM_ENABLED?{id:"tickets",label:e.$gettext("Tickets")}:{}],hideSingleTab:"",selected:e.tab,forceHorizontal:""},on:{"update:selected":function(t){e.tab=t}}},[n("ui-api-table",e._b({ref:"table",attrs:{slot:"tab:messages"},on:{"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()},"action:read":e.markAsRead},slot:"tab:messages",scopedSlots:e._u([{key:"col:subject",fn:function(t){var s=t.id,a=t.new,r=t.subject;return n("ui-link",{on:{click:function(t){return e.openMessageDialog(s)}}},[a?n("div",[n("ui-round-badge",{attrs:{theme:"safe",size:6}}),e._v(" "),n("strong",{domProps:{innerHTML:e._s(r)}})],1):n("span",{domProps:{innerHTML:e._s(r)}})])}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getMessages,rowID:"id",columns:{subject:{label:e.$gettext("Subject"),grow:!0},last_message:{label:e.$gettext("Date"),filter:"date"}},actions:{read:e.$gettext("Mark as read"),del:e.$gettext("Delete")},updateOn:["DELETE_MESSAGES","CLEAR_MESSAGE_SYSTEM","GET_MESSAGE","MARK_MESSAGES_AS_READ"],initialSort:{key:"last_message",order:"DESC"},verticalLayout:e.$_Client.isPhone},!1)),e._v(" "),n("tickets-table",{attrs:{slot:"tab:tickets"},slot:"tab:tickets"})],1)],1),e._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("CLEAR_MESSAGE_SYSTEM_DIALOG").open()}},slot:"bottom:links"},[n("translate",[e._v("Clear Message System")])],1),e._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:e.openOptionsDialog},slot:"bottom:links"},[n("translate",[e._v("Options")])],1),e._v(" "),"root"!==e.$state.app.tokens.USERCREATOR&&"1"===e.$state.app.tokens.TICKET_SYSTEM_ENABLED?n("ui-link",{attrs:{slot:"bottom:links",name:"user/create-ticket",bullet:""},slot:"bottom:links"},[n("translate",[e._v("Create Ticket")])],1):e._e(),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("message","messages",e.select.length)},on:{"click:confirm":e.deleteMessages}}),e._v(" "),n("view-message-dialog"),e._v(" "),e.$state.commands.TICKET.isDone?n("view-ticket-dialog"):e._e(),e._v(" "),n("clear-message-system-dialog",{on:{updateMessages:this.$reloadApiTable}}),e._v(" "),n("message-system-options-dialog")],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},3271:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"VIEW_MESSAGE_DIALOG",size:"normal","no-close-btn":e.$api.isLoading},on:{"dialog:close":function(t){return e.$emit("close")}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Message\n    ")]),e._v(" "),e.$api.isLoading?e._e():n("header",{directives:[{name:"flex",rawName:"v-flex",value:{main:"between",cross:"baseline",wrap:!0},expression:"{\n            main: 'between',\n            cross:'baseline',\n            wrap: true\n        }"},{name:"gutter",rawName:"v-gutter",value:[1,2],expression:"[1, 2]"}],attrs:{slot:"content:header"},slot:"content:header"},[n("h2",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}],staticClass:"overfl:hid toverfl:ellipsis",domProps:{textContent:e._s(e.$api.subject)}}),e._v(" "),n("time",[e._v(e._s(e._f("date")(e.$api.time)))])]),e._v(" "),n("ui-code-area",{attrs:{slot:"content",content:e.$api.content,"break-lines":""},slot:"content"})],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},3272:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"CLEAR_MESSAGE_SYSTEM_DIALOG",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Clear Message System")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{group:"clearMessages"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Subject Contains")]),e._v(" "),n("input-autocomplete",{attrs:{slot:"content",values:e.subjects,disabled:e.deleteEverything},slot:"content",model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}},[n("input-checkbox-button",{attrs:{slot:"additions:right"},slot:"additions:right",model:{value:e.deleteEverything,callback:function(t){e.deleteEverything=t},expression:"deleteEverything"}},[n("translate",[e._v("Anything")])],1)],1),e._v(" "),n("translate",{attrs:{slot:"error:validateSubject"},slot:"error:validateSubject"},[e._v("\n                Required field\n            ")])],1),e._v(" "),n("ui-form-element",{attrs:{group:"clearMessages"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("When")]),e._v(" "),"all"===e.when?n("input-select",{attrs:{slot:"content",options:e.periods,disabled:e.deleteEverything,novalidate:""},slot:"content",model:{value:e.when,callback:function(t){e.when=t},expression:"when"}}):n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n("input-select",{attrs:{slot:"additions:left",options:e.periods},slot:"additions:left",model:{value:e.when,callback:function(t){e.when=t},expression:"when"}}),e._v(" "),n("input-text",{attrs:{slot:"input",number:""},slot:"input",model:{value:e.days,callback:function(t){e.days=t},expression:"days"}}),e._v(" "),n("ui-button",{attrs:{slot:"additions:right",disabled:""},slot:"additions:right"},[n("translate",{attrs:{"translate-n":Number(e.days)||1,"translate-plural":"Days"}},[e._v("\n                        Day\n                    ")])],1)],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger",disabled:!(e.deleteEverything||e.subject)||!e.days},on:{click:e.clearMessageSystem},slot:"buttons"},[n("translate",[e._v("Clear")])],1)],2)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},3273:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"MESSAGE_SYSTEM_OPTIONS_DIALOG"},on:{"dialog:open":e.initData}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Options")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:"",group:"messageOptions",validators:{required:e.send,regex:e.regexps.email}}},[n("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.send,callback:function(t){e.send=t},expression:"send"}},[n("translate",[e._v("E-mail a copy of all messages")])],1),e._v(" "),n("input-text",{attrs:{slot:"content",disabled:!e.send},slot:"content",model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("Should be valid email")])],1),e._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"messageOptions",validators:{required:!0}}},[n("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.deleteTickets,callback:function(t){e.deleteTickets=t},expression:"deleteTickets"}},[n("translate",[e._v("Automatically delete tickets")])],1),e._v(" "),e.deleteTickets?n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.days.tickets,callback:function(t){e.$set(e.days,"tickets",t)},expression:"days.tickets"}},[n("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[n("translate",{staticClass:"wrap:nowrap"},[e._v("Older than")])],1),e._v(" "),n("ui-button",{attrs:{slot:"additions:right",disabled:""},slot:"additions:right"},[n("translate",{staticClass:"wrap:nowrap"},[e._v("Days")])],1)],1):e._e()],1),e._v(" "),n("ui-form-element",{attrs:{group:"messageOptions",vertical:"",validators:{required:!0}}},[n("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.deleteMessages,callback:function(t){e.deleteMessages=t},expression:"deleteMessages"}},[n("translate",[e._v("\n                    Automatically delete messages\n                ")])],1),e._v(" "),e.deleteMessages?n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.days.messages,callback:function(t){e.$set(e.days,"messages",t)},expression:"days.messages"}},[n("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[n("translate",{staticClass:"wrap:nowrap"},[e._v("Older than")])],1),e._v(" "),n("ui-button",{attrs:{slot:"additions:right",disabled:""},slot:"additions:right"},[n("translate",{staticClass:"wrap:nowrap"},[e._v("days")])],1)],1):e._e()],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",validateGroup:"messageOptions",theme:"primary"},on:{click:e.save},slot:"buttons"},[n("translate",[e._v("Save")])],1)],2)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},3274:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"VIEW_TICKET_DIALOG",size:"normal",noCloseBtn:""}},[n("translate",{attrs:{slot:"title","translate-params":{number:e.number}},slot:"title"},[e._v("View Ticket: #%{ number }")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{staticClass:"pos:rel",attrs:{vertical:"",validators:{required:!0},group:"ticketReply"}},[n("input-textarea",{attrs:{slot:"content",rows:"5",placeholder:e.$gettext("Type your reply here...")},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),n("ui-button",{staticClass:"replyButton",attrs:{slot:"content",theme:"safe",size:"normal",validateGroup:"ticketReply"},on:{click:e.postReply},slot:"content"},[n("translate",[e._v("Post Reply")])],1)],1),e._v(" "),n("ui-table",{attrs:{items:e.messages,hideHeaders:""}},[n("ui-column",{attrs:{id:"avatar",fit:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("ui-round-badge",{staticClass:"messageAvatar",attrs:{theme:e.$state.app.user.name===t.from?"safe":"primary",size:48}},[e._v("\n                        "+e._s(e._f("firstLetter")(t.from))+"\n                    ")])]}}])}),e._v(" "),n("ui-column",{attrs:{id:"message"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("ui-grid",{attrs:{slot:"col:message",column:""},slot:"col:message"},[n("ui-grid",{attrs:{cross:"center"}},[n("span",{staticClass:"userName"},[e._v("\n                                "+e._s({admin:e.$gettext("Admin"),reseller:e.$gettext("Reseller"),user:e.$gettext("User")}[t.level])+":\n                                "+e._s(t.name)+"\n                            ")]),e._v(" "),n("span",{staticClass:"c:txt:neutral"},[e._v("\n                                ("+e._s(t.time)+")\n                            ")])]),e._v(" "),n("p",{domProps:{innerHTML:e._s(t.message)}})],1)]}}])})],1)],1)],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},3275:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-api-table",e._b({ref:"table",attrs:{disableSelect:""},scopedSlots:e._u([{key:"col:subject",fn:function(t){var s=t.new,a=t.priority,r=t.subject,o=t.ticket;return n("ui-link",{class:{"txt:bold":s},on:{click:function(t){return e.openTicket(o)}}},[n("ui-round-badge",{attrs:{theme:{0:"safe",10:"safe",20:"primary",30:"danger"}[a],size:12}}),e._v("\n        "+e._s(r)+"\n    ")],1)}},{key:"col:status",fn:function(t){var s=t.status;return n("ui-badge",{attrs:{theme:{open:"safe",closed:"neutral"}[s]}},[e._v("\n        "+e._s(e._f("capitalize")(s))+"\n    ")])}}])},"ui-api-table",{command:e.$commands.getTickets,rowID:"ticket",columns:{ticket:e.$gettext("Ticket #"),subject:e.$gettext("Subject"),replies:e.$gettext("Replies"),status:e.$gettext("Status"),last_message:{label:e.$gettext("Last Message"),filter:"date"}},verticalLayout:e.$_Client.isPhone,requestData:{show_closed:e.showClosed}},!1),[n("input-checkbox",{attrs:{slot:"buttons:before"},slot:"buttons:before",model:{value:e.showClosed,callback:function(t){e.showClosed=t},expression:"showClosed"}},[n("translate",[e._v("Show closed")])],1)],1)},a=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))}}]);