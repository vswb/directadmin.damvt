(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1398:function(t,e,a){"use strict";a.r(e);var n=a(3134),o=a(2100);for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);var r=a(0),s=a(2867),c=a.n(s),l=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof c.a&&c()(l),e.default=l.exports},1561:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.validateVacationAccount=e.getVacation=e.deleteVacations=e.modifyVacation=e.createVacation=e.getVacationDefaults=e.getVacations=void 0;var o=n(a(23)),i=n(a(30)),r=function(t){return t.mapProps({custom_reply_headers:t.isEqual("1"),reply_content_types:t.toSelect,reply_encodings:t.toSelect,reply_once_select:t.toSelect})},s=i.default.get({id:"VACATIONS",url:"/CMD_EMAIL_VACATION",domain:!0,pagination:!0,after:function(t){return t.flow((function(t){return{rows:t}}),t.processTableInfo("rows"),t.mapProp("rows",t.flow(t.toArray,t.mapArray(t.flow(t.project({user:"user",start:"time.start_timestamp",end:"time.end_timestamp"}),t.mapProps({start:t.convert.toAppDate,end:t.convert.toAppDate}))))))}});e.getVacations=s;var c=i.default.get({id:"VACATION_DEFAULTS",url:"/CMD_EMAIL_VACATION_CREATE",domain:!0,after:function(t){return t.flow(t.mapProps({ENDDAY:t.toSelect,ENDMONTH:t.toSelect,ENDYEAR:t.toSelect,ENDTIME:t.toSelect,STARTDAY:t.toSelect,STARTMONTH:t.toSelect,STARTYEAR:t.toSelect,STARTTIME:t.toSelect,poplist:t.toSelect}),t.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),t.mapProps({end:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},start:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},headers:r(t)}))}});e.getVacationDefaults=c;var l=i.default.post({url:"/CMD_EMAIL_VACATION",params:{action:"create"},domain:!0,schema:{user:i.default.REQUIRED_STRING,starttime:i.default.REQUIRED_STRING,startday:i.default.REQUIRED_STRING,startmonth:i.default.REQUIRED_STRING,startyear:i.default.REQUIRED_STRING,endtime:i.default.REQUIRED_STRING,endday:i.default.REQUIRED_STRING,endmonth:i.default.REQUIRED_STRING,endyear:i.default.REQUIRED_STRING}});e.createVacation=l;var u=l.extend({params:{action:"modify"}});e.modifyVacation=u;var d=i.default.select({url:"/CMD_EMAIL_VACATION",params:{action:"delete",delete:!0},domain:!0});e.deleteVacations=d;var p=i.default.get({id:"VACATION",url:"/CMD_EMAIL_VACATION_MODIFY",domain:!0,schema:{user:i.default.REQUIRED_STRING},after:function(t){return t.flow(t.mapProps({ENDDAY:t.toSelect,ENDMONTH:t.toSelect,ENDYEAR:t.toSelect,ENDTIME:t.toSelect,STARTDAY:t.toSelect,STARTMONTH:t.toSelect,STARTYEAR:t.toSelect,STARTTIME:t.toSelect}),t.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),t.mapProps({end:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},start:function(t){return{time:t.time,date:new Date(t.year.value,Number(t.month.value)-1,t.day.value)}},text:t.convert.toAppText,headers:r(t)}))}});e.getVacation=p;var f=i.default.get({id:"VACATION_VALIDATION",domain:!0,url:"/CMD_EMAIL_VACATION",schema:{user:i.default.REQUIRED_STRING},before:function(t){return{user:null,comparison1:"equals",value1:t.user}},response:!1,mapResponse:function(t){return"object"!==(0,o.default)(t[0])}});e.validateVacationAccount=f},2100:function(t,e,a){"use strict";a.r(e);var n=a(2101),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e.default=o.a},2101:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a(15)),i=n(a(16)),r=n(a(2)),s=a(1561),c=n(a(604)),l=n(a(2095));function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var d,p={preload:s.getVacation,api:[{command:s.getVacation,bind:"vacation"}],components:{"input-date":l.default},props:{user:String},data:function(){return{text:"",start:new Date,starttime:"",end:new Date,endtime:"",subjectPrefix:"",contentType:"",encoding:"",onceSelect:""}},created:function(){var t=this;Object.assign(this.$data,{text:this.$api.vacation.text,start:this.$api.vacation.start.date,end:this.$api.vacation.end.date,starttime:this.$api.vacation.start.time.value,endtime:this.$api.vacation.end.time.value}),this.$api.vacation.headers&&this.$api.vacation.headers.custom_reply_headers&&(this.contentType=this.$api.vacation.headers.reply_content_types.value,this.encoding=this.$api.vacation.headers.reply_encodings.value,this.onceSelect=this.$api.vacation.headers.reply_once_select.value,this.subjectPrefix=this.$api.vacation.headers.subject_prefix),this.$watch("start",(function(e){e>t.end&&(t.end=e)}));var e=function(t,e){var a=function(t){return{morning:1,afternoon:2,evening:3}[t]};return a(t)>a(e)};this.$watch("starttime",(function(a){t.start.getTime()===t.end.getTime()&&e(a,t.endtime)&&(t.endtime=a)})),this.$watch("endtime",(function(a){t.start.getTime()===t.end.getTime()&&e(t.starttime,a)&&(t.starttime=a)}))},methods:{toAPIDate:function(t){var e,a=this[t];return e={},(0,r.default)(e,"".concat(t,"time"),this["".concat(t,"time")]),(0,r.default)(e,"".concat(t,"day"),(0,c.default)(a,"dd",{awareOfUnicodeTokens:!0})),(0,r.default)(e,"".concat(t,"month"),(0,c.default)(a,"MM")),(0,r.default)(e,"".concat(t,"year"),(0,c.default)(a,"yyyy",{awareOfUnicodeTokens:!0})),e},requestData:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,r.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({user:this.user,text:this.text},this.toAPIDate("start"),{},this.toAPIDate("end"));return this.$api.vacation.headers&&this.$api.vacation.headers.custom_reply_headers&&(t.subject=this.subjectPrefix,t.reply_encoding=this.encoding,t.reply_content_type=this.contentType,t.reply_once_time=this.onceSelect),t},modifyVacation:(d=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.modifyVacation)(this.requestData());case 2:if(!t.sent){t.next=7;break}return t.next=6,(0,s.getVacations)();case 6:this.$router.push({name:"user/email/vacations"});case 7:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})}};e.default=p},2867:function(t,e){},3134:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("app-page-section",[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Account:")]),t._v(" "),a("input-text",{attrs:{slot:"content",disabled:"",value:t.user+"@"+t.$domainUnicode},slot:"content"})],1),t._v(" "),t.contentType?[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Subject Prefix")]),t._v(" "),a("input-text",{attrs:{slot:"content",suffix:t.$gettext(": original subject")},slot:"content",model:{value:t.subjectPrefix,callback:function(e){t.subjectPrefix=e},expression:"subjectPrefix"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Encoding")]),t._v(" "),a("input-select",{attrs:{slot:"content",options:t.$api.vacation.headers.reply_encodings.options},slot:"content",model:{value:t.encoding,callback:function(e){t.encoding=e},expression:"encoding"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Content-Type")]),t._v(" "),a("input-select",{attrs:{slot:"content",options:t.$api.vacation.headers.reply_content_types.options},slot:"content",model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Frequency")]),t._v(" "),a("input-select",{attrs:{slot:"content",options:t.$api.vacation.headers.reply_once_select.options},slot:"content",model:{value:t.onceSelect,callback:function(e){t.onceSelect=e},expression:"onceSelect"}})],1)]:t._e(),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Start")]),t._v(" "),a("input-date",{attrs:{slot:"content",min:new Date},slot:"content",model:{value:t.start,callback:function(e){t.start=e},expression:"start"}},[a("input-select",{style:{minWidth:"12rem"},attrs:{slot:"additions:left",options:t.$api.vacation.start.time.options,novalidate:""},nativeOn:{focusin:function(t){t.stopPropagation()}},slot:"additions:left",model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}})],1)],1),t._v(" "),a("ui-form-element",{attrs:{group:"vacation"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation End")]),t._v(" "),a("input-date",{attrs:{slot:"content",min:t.start},slot:"content",model:{value:t.end,callback:function(e){t.end=e},expression:"end"}},[a("input-select",{style:{minWidth:"12rem"},attrs:{slot:"additions:left",options:t.$api.vacation.end.time.options,novalidate:""},nativeOn:{focusin:function(t){t.stopPropagation()}},slot:"additions:left",model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}})],1)],1),t._v(" "),a("ui-form-element",{attrs:{group:"vacation",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Message:")]),t._v(" "),a("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Current Server Time:")]),t._v(" "),a("template",{slot:"content"},[t._v("\n                "+t._s(t.$api.vacation.servertime)+"\n            ")])],2)],2),t._v(" "),a("ui-button",{attrs:{slot:"footer:buttons",theme:"primary",disabled:!t.$valid("vacation")},on:{click:t.modifyVacation},slot:"footer:buttons"},[a("translate",[t._v("Modify")])],1)],1)},o=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}))}}]);