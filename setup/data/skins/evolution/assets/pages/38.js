(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1352:function(t,e,n){"use strict";n.r(e);var a=n(3089),i=n(1856);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n(2702);var o=n(0),r=n(2704),l=n.n(r),c=Object(o.a)(i.default,a.a,a.b,!1,null,"d401551a",null);"function"==typeof l.a&&l()(c),e.default=c.exports},1453:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.getSystemStatus=e.updateActiveStatus=e.getActiveStatus=e.updateEmailSetting=e.getEmailSetting=e.getTicketDefaults=e.replyTicket=e.createTicket=e.markTicketsRead=e.openTicket=e.closeTickets=e.getMessages=e.getTickets=e.sendMessageMultiple=void 0;var i=a(n(2)),s=a(n(30)),o=a(n(602));function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=s.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple"},schema:{users:s.default.ROWS,priority:{type:String,default:"10",validator:function(t){return["10","20","30"].includes(t)}},subject:s.default.REQUIRED_STRING,message:s.default.REQUIRED_STRING,emailOnly:l({},s.default.OPTIONAL_BOOL,{default:!1}),all_email_accounts:s.default.OPTIONAL_BOOL}});e.sendMessageMultiple=c;var u=l({},s.default.OPTIONAL_BOOL,{default:!0}),d=s.default.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:u,show_hold:u,show_closed:u},after:function(t){return t.flow(t.wrap("rows"),t.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),t.processTableInfo("rows"),t.mapProps({rows:t.flow(t.toArray,t.mapArrayProps({new:t.convert.toAppBoolean,priority:t.convert.toAppNumber,replies:t.convert.toAppNumber,last_message:t.convert.toAppDate,subject:t.convert.toAppString,user:t.convert.toAppString})),filters:t.mapValues(t.mapProps({new:t.convert.toAppNumber,total:t.convert.toAppNumber})),enabled:t.convert.toAppBoolean,message:t.convert.toAppHtml}))}});e.getTickets=d;var p=s.default.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:s.default.REQUIRED_STRING},after:function(t){return t.flow(t.deleteProp("info"),t.toArray,(function(t){return t.reverse()}),t.mapArrayProps({message:t.convert.toAppHtml,time:function(e){return(0,o.default)(Date.now(),t.convert.toAppDate(e))}}))}});e.getMessages=p;var f=s.default.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}});e.closeTickets=f;var A=s.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:s.default.REQUIRED_STRING}});e.openTicket=A;var m=s.default.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}});e.markTicketsRead=m;var g=s.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:function(t){return{encoding:t.email_only?"utf-8":null}},schema:{user:s.default.REQUIRED_STRING,priority:l({},s.default.REQUIRED_STRING,{validator:function(t){return["10","20","30"].includes(t)}}),subject:s.default.REQUIRED_STRING,message:s.default.REQUIRED_STRING,email_only:s.default.OPTIONAL_BOOL}});e.createTicket=g;var v=s.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:s.default.REQUIRED_STRING,user:s.default.REQUIRED_STRING,subject:s.default.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:function(t){return["open","closed"].includes(t)}},message:s.default.REQUIRED_STRING}});e.replyTicket=v;var h=s.default.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:function(t){return t.flow(t.moveProp("EML_ONLY_CHEKCED","email.set"),t.moveProp("SHOW_EML_ONLY","email.show"),t.moveProp("TCKTTO","to"),t.moveProp("TCKTTYPE","type"),(function(t){return l({},t,{selected:Object.values(t.to).find((function(t){return!!t.selected}))})}),t.mapProps({email:t.mapProps({set:t.convert.toAppBoolean,show:t.convert.toAppBoolean}),to:function(t){return Object.values(t).map((function(t){return{label:t.text,value:t.value}}))},selected:function(t){return{label:t.text,value:t.value}}}))}});e.getTicketDefaults=h;var C=s.default.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:function(t){return t.flow(t.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),t.mapProps({featureEnabled:t.feedWith(1,(function(t){return void 0!==t.checked})),email:t.setDefault(""),checked:t.flow(t.setDefault("no"),t.convert.toAppBoolean)}))}});e.getEmailSetting=C;var k=s.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:s.default.REQUIRED_STRING,ON:s.default.REQUIRED_BOOL}});e.updateEmailSetting=k;var b=s.default.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:function(t){return function(e){return{html:e.info.html,active:t.convert.toAppBoolean(e.info.active)}}}});e.getActiveStatus=b;var _=s.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:s.default.REQUIRED_BOOL,html:s.default.REQUIRED_STRING}});e.updateActiveStatus=_;var T=s.default.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!1});e.getSystemStatus=T},1856:function(t,e,n){"use strict";n.r(e);var a=n(1857),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},1857:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(2)),s=a(n(15)),o=a(n(16)),r=n(1453),l=a(n(2699));function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d,p,f,A,m={preload:[r.getTickets,r.getEmailSetting,r.getActiveStatus],commands:{getTickets:r.getTickets},api:[{command:r.getTickets,bind:"tickets"},{command:r.getMessages,bind:"messages"},{command:r.getEmailSetting,bind:"emailSetting"},{command:r.getActiveStatus,bind:"activeStatus"}],beforeRouteUpdate:(A=(0,o.default)(s.default.mark((function t(e,n,a){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.query.id&&(this.savedQuery=n.query,this.openTicketByID(e.query.id)),a();case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return A.apply(this,arguments)}),components:{ViewTicketDialog:l.default},props:{number:{type:String,required:!1}},data:function(){return{select:[],show:["open","hold","closed"],openedTicket:null,newTicket:{},email:{email:"",ON:!1},ticketSystemStatus:{active:!1,html:""},savedQuery:{}}},computed:{ticketsCount:function(){var t=this;return function(e){var n=t.$api.tickets.filters[e],a=n.new?"".concat(n.new," / "):"";return"(".concat(a).concat(n.total,")")}},allFiltersChecked:function(){return Object.values(this.filters).every((function(t){return t}))},filters:function(){return{open:this.show.includes("open"),hold:this.show.includes("hold"),closed:this.show.includes("closed")}},updateTicketOpenActionDisabled:function(){var t=this;if(this.select.length>1||!this.select.length)return!0;var e=(this.$api.tickets.rows.find((function(e){return e.ticket===t.select[0]}))||{}).status;return"closed"!==(void 0===e?"open":e)}},methods:{getPriorityClass:function(t){var e=t.priority_string||"normal";return"priority-".concat(e)},openTicketByID:function(t){var e=this.$api.tickets.rows.find((function(e){return e.ticket===t}));this.openTicket(e)},closeTickets:function(){(0,r.closeTickets)({select:this.select}).then(this.reloadTable)},updateTicketOpen:function(){(0,r.openTicket)(this.select[0]).then(this.reloadTable)},markAsRead:function(){(0,r.markTicketsRead)({select:this.select}).then(this.reloadTable)},loadTicketMessages:function(){return(0,r.getMessages)({number:this.openedTicket.ticket})},openTicket:(f=(0,o.default)(s.default.mark((function t(e){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.openedTicket=e,t.next=3,this.loadTicketMessages();case 3:this.$dialog("VIEW_TICKET_DIALOG").open();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)}),sendMessage:(p=(0,o.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,r.createTicket)(this.newTicket);case 1:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),loadStatus:(d=(0,o.default)(s.default.mark((function t(){var e;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.getActiveStatus)();case 2:e=t.sent,this.ticketSystemStatus=u({},e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),updateSettings:function(){(0,r.updateEmailSetting)(this.email),(0,r.updateActiveStatus)(this.ticketSystemStatus)},reloadTable:function(){this.$refs.table.reloadTable({show_open:this.filters.open,show_hold:this.filters.hold,show_closed:this.filters.closed}),this.select=[]},closeTicketDialog:function(){this.$router.push({name:"reseller/tickets",query:this.savedQuery}),this.savedQuery={}}},created:function(){this.email={email:this.$api.emailSetting.email,ON:this.$api.emailSetting.checked},this.ticketSystemStatus=u({},this.$api.activeStatus),this.$route.query.id&&this.openTicketByID(this.$route.query.id)},watch:{show:function(){this.reloadTable()}}};e.default=m},1858:function(t,e,n){"use strict";n.r(e);var a=n(1859),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},1859:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,s=a(n(15)),o=a(n(16)),r=n(1453),l={filters:{firstLetter:function(t){return t[0].toUpperCase()}},data:function(){return{message:"",status:"open",focused:!1}},props:{subject:{type:String,required:!0},user:{type:String,required:!0},ticket:{type:String,required:!0},messages:{type:Array,required:!0}},methods:{postReply:(i=(0,o.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.replyTicket)({number:this.ticket,subject:"Re: ".concat(this.subject),user:this.user,message:this.message,status:this.status});case 2:t.sent&&(this.message="",this.$emit("update"));case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}};e.default=l},1860:function(t,e,n){var a=n(2701);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("070b2a79",a,!0,{})},1861:function(t,e,n){var a=n(2703);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("b6b26bfe",a,!0,{})},2699:function(t,e,n){"use strict";n.r(e);var a=n(3214),i=n(1858);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n(2700);var o=n(0),r=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);e.default=r.exports},2700:function(t,e,n){"use strict";var a=n(1860);n.n(a).a},2701:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,"#VIEW_TICKET_DIALOG .textarea{position:relative;background:#fff;border:1px solid #e5e5e5;border-radius:4px}#VIEW_TICKET_DIALOG .textarea.focused{-webkit-box-shadow:0 0 1px 1px #13aae2,0 0 1px 2px hsla(0,0%,100%,.5);box-shadow:0 0 1px 1px #13aae2,0 0 1px 2px hsla(0,0%,100%,.5)}#VIEW_TICKET_DIALOG .textarea-row{background:#fff}#VIEW_TICKET_DIALOG .textarea-row>td{border-width:0}#VIEW_TICKET_DIALOG .textarea-input{width:100%;min-height:12rem;resize:none;border-width:0}#VIEW_TICKET_DIALOG .textarea-input:focus{outline:none;border:none;-webkit-box-shadow:unset;box-shadow:unset}#VIEW_TICKET_DIALOG .textarea-submit-button{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;width:100%;padding:2px;z-index:2}#VIEW_TICKET_DIALOG .textarea-submit-button .submit-keys-suggestion{color:silver;font-size:12px;font-weight:300;padding-left:4px}#VIEW_TICKET_DIALOG .replyButton{position:absolute;right:1.5rem;bottom:1.5rem;z-index:2}#VIEW_TICKET_DIALOG textarea{resize:none}#VIEW_TICKET_DIALOG .messagesTable>.table-elem{table-layout:fixed}#VIEW_TICKET_DIALOG .col\\:avatar{width:6.4rem;white-space:nowrap}#VIEW_TICKET_DIALOG .col\\:avatar .messageAvatar{color:#fff;font-size:1.6rem;font-weight:700}#VIEW_TICKET_DIALOG .col\\:message .userName{font-weight:600;font-size:1.4rem}#VIEW_TICKET_DIALOG .scrollArea{padding-bottom:1.5rem}","",{version:3,sources:["/home/evo/evolution/src/js/pages/reseller/_dialogs/view-ticket.vue"],names:[],mappings:"AAgKA,8BAEQ,kBACA,gBACA,yBACA,iBAAkB,CAL1B,sCAOY,sEAAA,6DAAqE,CAPjF,kCAUY,eAAiB,CAV7B,qCAWqB,cAAiB,CAXtC,oCAeY,WACA,iBACA,YACA,cAAiB,CAlB7B,0CAoBgB,aACA,YACA,yBAAA,gBAAiB,CAtBjC,4CA0BY,oBAAA,oBAAA,aACA,yBAAA,sBAAA,8BACA,sBAAA,mBAAA,qBACA,WACA,YACA,SAAU,CA/BtB,oEAiCgB,aACA,eACA,gBACA,gBAAiB,CApCjC,iCAyCQ,kBACA,aACA,cACA,SAAU,CA5ClB,6BA+CQ,WAAY,CA/CpB,+CAkDQ,kBAAmB,CAlD3B,iCAqDQ,aACA,kBAAmB,CAtD3B,gDAwDY,WACA,iBACA,eAAgB,CA1D5B,4CA+DY,gBACA,gBAAiB,CAhE7B,gCAoEQ,qBAAsB,CAAA",file:"view-ticket.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#VIEW_TICKET_DIALOG {\n    .textarea {\n        position: relative;\n        background: white;\n        border: 1px solid #e5e5e5;\n        border-radius: 4px;\n        &.focused {\n            box-shadow: 0 0 1px 1px #13aae2, 0 0 1px 2px rgba(255, 255, 255, 0.5);\n        }\n        &-row {\n            background: white;\n            & > td { border-width: 0px; }\n\n        }\n        &-input {\n            width: 100%;\n            min-height: 12rem;\n            resize: none;\n            border-width: 0px;\n            &:focus {\n                outline: none;\n                border: none;\n                box-shadow: unset;\n            }\n        }\n        &-submit-button {\n            display: flex;\n            justify-content: space-between;\n            align-items: flex-end;\n            width: 100%;\n            padding: 2px;\n            z-index: 2;\n            & .submit-keys-suggestion {\n                color: #c0c0c0;\n                font-size: 12px;\n                font-weight: 300;\n                padding-left: 4px;\n            }\n        }\n    }\n    .replyButton {\n        position: absolute;\n        right: 1.5rem;\n        bottom: 1.5rem;\n        z-index: 2;\n    }\n    textarea { \n        resize: none;\n    }\n    .messagesTable > .table-elem {\n        table-layout: fixed;\n    }\n    .col\\:avatar {\n        width: 6.4rem;\n        white-space: nowrap;\n        .messageAvatar {\n            color: #FFF;\n            font-size: 1.6rem;\n            font-weight: 700;\n        }\n    }\n    .col\\:message {\n        .userName {\n            font-weight: 600;\n            font-size: 1.4rem;\n        }\n    }\n    .scrollArea {\n        padding-bottom: 1.5rem;\n    }\n}\n"],sourceRoot:""}])},2702:function(t,e,n){"use strict";var a=n(1861);n.n(a).a},2703:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,'#manage-tickets .filters[data-v-d401551a],#manage-tickets .title[data-v-d401551a]{padding-left:5px!important}#manage-tickets .buttons .button[data-v-d401551a]{margin-right:0!important}#manage-tickets .container[data-v-d401551a]{padding:0}#manage-tickets .icon-button[data-v-d401551a]{background-color:inherit!important}.status-open[data-v-d401551a]:before{content:"";display:inline-block;border-radius:50%;height:12px;width:12px;background-color:#5dc37f;vertical-align:top;margin-top:1px;margin-right:10px}[class^=priority][data-v-d401551a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}[class^=priority][data-v-d401551a]:before{content:"";display:inline-block;border-radius:50%;height:12px;width:12px;vertical-align:top;margin-right:10px}[class^=priority].priority-medium[data-v-d401551a]:before{background-color:#ffd900}[class^=priority].priority-high[data-v-d401551a]:before{background-color:#d5591c}[class^=priority].priority-low[data-v-d401551a]:before{background-color:#5dc37f}.filters .filter[data-v-d401551a]{padding-left:10px;font-weight:600;font-size:11px;color:#34383c}.filters .filter+.filter[data-v-d401551a]{margin-left:16px}.filters .filter.active[data-v-d401551a],.ticket-status-open[data-v-d401551a]{color:#5dc37f}.ticket-status-hold[data-v-d401551a]{color:#34383c}.ticket-status-closed[data-v-d401551a]{color:silver}.ticket[data-v-d401551a]{height:400px;overflow:hidden}.expand-enter-active .ticket[data-v-d401551a],.expand-leave-active .ticket[data-v-d401551a]{-webkit-transition:height 1s;-o-transition:height 1s;transition:height 1s;overflow:hidden}.expand-enter .ticket[data-v-d401551a]{height:0}.expand-enter-to .ticket[data-v-d401551a]{height:400px}.expand-leave-to .ticket[data-v-d401551a]{height:0}.row-transition .col[data-v-d401551a]{height:auto;vertical-align:top}.strong[data-v-d401551a]{font-weight:700}.input-check input[type=email][data-v-d401551a],input[type=text][data-v-d401551a]{position:relative!important;visibility:visible!important;top:unset!important;left:unset!important;width:250px!important;padding:0 10px!important;font-weight:400!important;font-family:Open Sans,sans-serif!important}',"",{version:3,sources:["/home/evo/evolution/src/js/pages/reseller/tickets.vue"],names:[],mappings:"AAyVA,kFAEa,0BAA4B,CAFzC,kDAIkB,wBAA4B,CAJ9C,4CAMiB,SAAY,CAN7B,8CAQQ,kCAAoC,CACvC,qCAID,WACA,qBACA,kBACA,YACA,WACA,yBACA,mBACA,eACA,iBAAkB,CACrB,mCAGG,oBAAA,oBAAA,aACA,yBAAA,sBAAA,kBAAmB,CAoBtB,0CAlBO,WACA,qBACA,kBACA,YACA,WACA,mBACA,iBAAkB,CACrB,0DAEG,wBAAyB,CAC5B,wDAEG,wBAAyB,CAC5B,uDAEG,wBAAyB,CAC5B,kCAMG,kBACA,gBACA,eACA,aAAc,CALtB,0CAQY,gBAAiB,CAR7B,AAaS,8EAMD,aAAc,CACjB,qCAEG,aAAc,CACjB,uCAEG,YAAc,CACjB,yBAID,aACA,eAAgB,CACnB,4FAGG,6BAAA,wBAAA,qBACA,eAAgB,CACnB,uCAGG,QAAW,CACd,0CAGG,YAAa,CAChB,0CAGG,QAAW,CACd,sCAGG,YACA,kBAAmB,CACtB,yBAGG,eAAiB,CACpB,kFAGG,4BACA,6BACA,oBACA,qBACA,sBACA,yBACA,0BACA,0CAA+C,CAAA",file:"tickets.vue?vue&type=style&index=0&id=d401551a&lang=scss&scoped=true&",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#manage-tickets {\n    .filters { padding-left: 5px !important; }\n    .title { padding-left: 5px !important; }\n    .buttons {\n        .button { margin-right: 0px !important; }\n    }\n    .container { padding: 0px; }\n    .icon-button {\n        background-color: inherit !important;\n    }\n}\n\n.status-open:before {\n    content: "";\n    display: inline-block;\n    border-radius: 50%;\n    height: 12px;\n    width: 12px;\n    background-color: #5dc37f;\n    vertical-align: top;\n    margin-top: 1px;\n    margin-right: 10px;\n}\n\n[class^=priority] {\n    display: flex;\n    align-items: center;\n    &:before {\n        content: "";\n        display: inline-block;\n        border-radius: 50%;\n        height: 12px;\n        width: 12px;\n        vertical-align: top;\n        margin-right: 10px;\n    }\n    &.priority-medium:before {\n        background-color: #ffd900;\n    }\n    &.priority-high:before {\n        background-color: #d5591c;\n    }\n    &.priority-low:before {\n        background-color: #5dc37f;\n    }\n\n}\n\n.filters {\n    .filter {\n        padding-left: 10px;\n        font-weight: 600;\n        font-size: 11px;\n        color: #34383c;\n\n        & + .filter {\n            margin-left: 16px;\n        }\n\n        &.active {\n            color: #5dc37f;\n        }\n    }\n}\n\n.ticket-status {\n    &-open {\n        color: #5dc37f;\n    }\n    &-hold {\n        color: #34383c;\n    }\n    &-closed {\n        color: #c0c0c0;\n    }\n}\n\n.ticket {\n    height: 400px;\n    overflow: hidden;\n}\n\n.expand-enter-active .ticket, .expand-leave-active .ticket {\n    transition: height 1s;\n    overflow: hidden;\n}\n\n.expand-enter .ticket {\n    height: 0px;\n}\n\n.expand-enter-to .ticket {\n    height: 400px;\n}\n\n.expand-leave-to .ticket {\n    height: 0px;\n}\n\n.row-transition .col {\n    height: auto;\n    vertical-align: top;\n}\n\n.strong {\n    font-weight: bold;\n}\n\n.input-check input[type="email"], input[type="text"] {\n    position: relative !important;\n    visibility: visible !important;\n    top: unset !important;\n    left: unset !important;\n    width: 250px !important;\n    padding: 0 10px !important;\n    font-weight: 400 !important;\n    font-family: "Open Sans", sans-serif !important;\n}\n'],sourceRoot:""}])},2704:function(t,e){},3089:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{id:"manage-tickets"}},[n("app-page-section",[n("ui-api-table",t._b({ref:"table",staticClass:"app-tickets-table",on:{"action:close":t.closeTickets,"action:open":t.updateTicketOpen,"action:markread":t.markAsRead},scopedSlots:t._u([{key:"col:subject",fn:function(e){var a=e.item;return n("span",{class:t.getPriorityClass(a)},[n("ui-link",{class:{strong:a.new},attrs:{name:"reseller/tickets",query:{id:a.ticket}}},[t._v("\n                    "+t._s(a.subject)+"\n                ")])],1)}},{key:"col:status",fn:function(e){var a=e.status;return n("span",{class:"ticket-status-"+a},[t._v("\n                "+t._s(t._f("capitalize")(a))+"\n            ")])}},{key:"col:last_message",fn:function(e){var a=e.last_message;return n("span",{},[t._v("\n                "+t._s(t._f("date")(a,"date"))+"\n            ")])}},{key:"col:user",fn:function(e){var a=e.user;return n("ui-link",{attrs:{name:"reseller/users/view",params:{user:a}}},[t._v("\n                "+t._s(a)+"\n            ")])}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{command:t.$commands.getTickets,rowID:"ticket",columns:{ticket:this.$gettext("Ticket #"),subject:{label:this.$gettext("Subject"),grow:!0},replies:this.$gettext("Replies"),status:this.$gettext("Status"),last_message:this.$gettext("Last Message"),user:this.$gettext("User")},actions:{close:t.$gettext("Close"),open:{label:t.$gettext("Open"),disabled:t.updateTicketOpenActionDisabled},markread:t.$gettext("Mark as read")},requestData:{show_open:t.filters.open,show_hold:t.filters.hold,show_closed:t.filters.closed},verticalLayout:t.$_Client.isPhone},!1),[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t.$api.tickets.filters?n("input-checkable-select",{attrs:{slot:"buttons:before",options:{open:t.$gettext("Open"),hold:t.$gettext("Hold"),closed:t.$gettext("Closed")}},slot:"buttons:before",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("translate",{attrs:{slot:"label"},slot:"label"},[t._v("Filter")]),t._v(" "),n("span",{attrs:{slot:"check:all:after"},domProps:{textContent:t._s(t.ticketsCount("all"))},slot:"check:all:after"}),t._v(" "),n("span",{attrs:{slot:"check:open:after"},domProps:{textContent:t._s(t.ticketsCount("open"))},slot:"check:open:after"}),t._v(" "),n("span",{attrs:{slot:"check:hold:after"},domProps:{textContent:t._s(t.ticketsCount("hold"))},slot:"check:hold:after"}),t._v(" "),n("span",{attrs:{slot:"check:closed:after"},domProps:{textContent:t._s(t.ticketsCount("closed"))},slot:"check:closed:after"})],1):t._e()],1)],1),t._v(" "),t.$api.emailSetting.featureEnabled?n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("TICKET_SYSTEM_SETTINGS").open()}},slot:"bottom:links"},[n("translate",[t._v("Ticket System Settings")])],1):t._e(),t._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"reseller/create-ticket"},slot:"bottom:links"},[n("translate",[t._v("Send a message")])],1),t._v(" "),n("ui-dialog",{attrs:{id:"TICKET_SYSTEM_SETTINGS"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Settings")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:t.ticketSystemStatus.active,callback:function(e){t.$set(t.ticketSystemStatus,"active",e)},expression:"ticketSystemStatus.active"}},[n("translate",[t._v("Ticket System Enabled")])],1),t._v(" "),t.ticketSystemStatus.active?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.ticketSystemStatus.html,expression:"ticketSystemStatus.html"}],attrs:{slot:"content"},domProps:{value:t.ticketSystemStatus.html},on:{input:function(e){e.target.composing||t.$set(t.ticketSystemStatus,"html",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:t.email.ON,callback:function(e){t.$set(t.email,"ON",e)},expression:"email.ON"}},[n("translate",[t._v("E-mail a copy of all messages")])],1),t._v(" "),t.email.ON?n("input",{directives:[{name:"model",rawName:"v-model",value:t.email.email,expression:"email.email"}],attrs:{slot:"content",type:"text"},domProps:{value:t.email.email},on:{input:function(e){e.target.composing||t.$set(t.email,"email",e.target.value)}},slot:"content"}):t._e()],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.updateSettings},slot:"buttons"},[n("translate",[t._v("Save")])],1)],1),t._v(" "),t.openedTicket?n("view-ticket-dialog",t._b({attrs:{messages:t.$api.messages},on:{update:t.loadTicketMessages,close:t.closeTicketDialog}},"view-ticket-dialog",t.openedTicket,!1)):t._e()],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},3214:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",t._g(t._b({attrs:{id:"VIEW_TICKET_DIALOG",size:"normal",noCloseBtn:""},on:{"dialog:close":function(e){return t.$emit("close")}}},"ui-dialog",t.$attrs,!1),t.$listeners),[n("translate",{attrs:{slot:"title","translate-params":{ticket:t.ticket}},slot:"title"},[t._v("\n        View Ticket: #%{ ticket }\n    ")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{staticClass:"pos:rel"},[n("div",{staticClass:"textarea",attrs:{slot:"content"},slot:"content"},[n("input-textarea",{staticClass:"textarea-input",attrs:{slot:"content",placeholder:t.$gettext("Type your reply here...")},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},keyup:function(e){return(e.type.indexOf("key")||13===e.keyCode)&&e.ctrlKey?t.postReply(e):null}},slot:"content",model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),n("div",{staticClass:"textarea-submit-button",attrs:{slot:"content"},slot:"content"},[t.$_Client.isDesktop?n("translate",{staticClass:"submit-keys-suggestion"},[t._v("\n                        Ctrl+Enter to post reply\n                    ")]):n("span"),t._v(" "),n("ui-input-group",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!1},expression:"{ grow: false }"}],style:{minWidth:"unset"},attrs:{grow:!1}},[n("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[n("translate",[t._v("Status:")])],1),t._v(" "),n("input-select",{attrs:{slot:"input",title:t.$gettext("Status"),options:{open:t.$gettext("Open"),closed:t.$gettext("Closed")}},slot:"input",model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),t._v(" "),n("ui-button",{style:{whiteSpace:"nowrap"},attrs:{slot:"additions:right",theme:"safe"},on:{click:t.postReply},slot:"additions:right"},[n("translate",[t._v("Post reply")])],1)],1)],1)],1)]),t._v(" "),n("ui-table",{attrs:{items:t.messages,hideHeaders:""}},[n("ui-column",{attrs:{id:"avatar",fit:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ui-round-badge",{staticClass:"messageAvatar",attrs:{theme:t.$state.app.user.name===e.from?"safe":"primary",size:48}},[t._v("\n                        "+t._s(t._f("firstLetter")(e.from))+"\n                    ")])]}}])}),t._v(" "),n("ui-column",{attrs:{id:"message"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ui-scrollable",{staticClass:"scrollArea"},[n("ui-grid",{attrs:{column:""}},[n("ui-grid",{attrs:{cross:"center"}},[n("span",{staticClass:"userName"},[t._v("\n                                    "+t._s({admin:t.$gettext("Admin"),reseller:t.$gettext("Reseller"),user:t.$gettext("User")}[e.level])+":\n                                    "+t._s(e.name)+"\n                                ")]),t._v(" "),n("span",{staticClass:"c:txt:neutral"},[t._v("\n                                    ("+t._s(e.time)+")\n                                ")])]),t._v(" "),n("p",{staticClass:"message scrollbar:tiny",domProps:{innerHTML:t._s(e.message)}})],1)],1)]}}])})],1)],1)],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))}}]);