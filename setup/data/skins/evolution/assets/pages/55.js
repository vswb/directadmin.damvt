(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1302:function(t,n,e){"use strict";e.r(n);var o=e(3041),a=e(1624);for(var r in a)"default"!==r&&function(t){e.d(n,t,(function(){return a[t]}))}(r);e(2510);var i=e(0),s=e(2512),l=e.n(s),u=Object(i.a)(a.default,o.a,o.b,!1,null,"83abd9a4",null);"function"==typeof l.a&&l()(u),n.default=u.exports},1468:function(t,n,e){"use strict";e.r(n);var o=e(1469),a=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,(function(){return o[t]}))}(r);n.default=a.a},1469:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{search:"",hideEmpty:!0}},props:{tokens:{type:Array,required:!0,default:function(){return[]}}},computed:{filtered:function(){var t=this,n=function(t,n){return t.toLowerCase().includes(n.toLowerCase())};return this.tokens.filter((function(n){return!t.hideEmpty||n.value})).filter((function(e){var o=e.value,a=e.token;return!t.search||(n(a,t.search)||n(o,t.search))}))}}};n.default=o},1484:function(t,n,e){"use strict";var o=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.getDiff=n.savePhpFpmTokens=n.getPhpFpmTokens=n.getPhpFpmConfiguration=n.saveDomainCustomization=n.getDomainCustomization=n.getDomainConfig=n.rewriteConfs=n.getDomains=void 0;var a=o(e(2)),r=o(e(17)),i=o(e(30)),s=e(14);function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}var u=s.fp.flow(s.fp.convert.toAppString,s.fp.convert.toLines),p=s.fp.flow((function(t){return t||""}),s.fp.convert.toAppString,s.fp.convert.toAppText),c="/CMD_CUSTOM_HTTPD",f=i.default.get({id:"CUSTOM_HTTPD_DOMAINS",url:c,pagination:!0,after:function(){return s.fp.flow(s.fp.mapProp("domains",s.fp.toTable()),s.fp.mapProp("file",s.fp.feedWith(1,(function(t){return["nginx","nginx_proxy","openlitespeed","httpd"].find((function(n){return"1"===t["have_".concat(n)]}))||"httpd"}))))}});n.getDomains=f;var m=i.default.post({url:c,params:{action:"all",rewrite_confs:!0}});n.rewriteConfs=m;var d=i.default.get({url:c,id:"CH_DOMAIN_CONFIG",schema:{domain:i.default.REQUIRED_STRING,proxy:i.default.OPTIONAL_BOOL},after:function(){return s.fp.flow((function(t){return{tokens:t.AVAILABLE_TOKENS,error:t.CONFIG_ERROR,test:t.CONFIG_TEST,data:t.HTTPD,templates:t}}),s.fp.mapProps({error:s.fp.isEqual("1"),nginx:s.fp.isEqual("1"),data:u,test:p,templates:s.fp.flow(s.fp.filter((function(t,n){return n.includes("VH")})),s.fp.filter(s.fp.getProp("data")),s.fp.toArray,s.fp.mapArrayProps({data:u,custom:s.fp.isEqual("1")})),tokens:s.fp.flow(s.fp.mapValues((function(t,n){return{token:n,value:t}})),s.fp.toArray)}))}});n.getDomainConfig=d;var g=i.default.get({url:c,id:"CH_DOMAIN_CUSTOMIZATION_VALUES",schema:{domain:i.default.REQUIRED_STRING,proxy:i.default.OPTIONAL_BOOL},after:function(){return s.fp.flow(s.fp.project({config:"CONFIG",custom1:"CUSTOM1",custom2:"CUSTOM2",custom3:"CUSTOM3",custom4:"CUSTOM4",custom5:"CUSTOM5",custom6:"CUSTOM6",custom7:"CUSTOM7",custom8:"CUSTOM8",tokens:"AVAILABLE_TOKENS",appendix:"VH1.custom_global_pre_post",tokensCount:"NUM_CUSTOM_TOKENS"}),s.fp.mapProps({config:p,custom1:p,custom2:p,custom3:p,custom4:p,custom5:p,custom6:p,custom7:p,custom8:p,nginx:s.fp.convert.toAppBoolean,tokensCount:s.fp.convert.toAppNumber,tokens:s.fp.flow(s.fp.mapValues((function(t,n){return{token:n,value:t}})),s.fp.toArray),appendix:s.fp.flow(s.fp.setDefault({}),s.fp.filter((function(t,n){return n.includes("CUSTOM")})),s.fp.mapValues(p),s.fp.transformObject((function(t,n){var e=n.match(/^.*(CUSTOM.*)$/),o=(0,r.default)(e,2)[1];return(0,a.default)({},o,{data:t,name:n})})))}))}});n.getDomainCustomization=g;var v=i.default.post({url:c,schema:{proxy:i.default.OPTIONAL_STRING,domain:i.default.REQUIRED_STRING,config:i.default.OPTIONAL_STRING,custom1:i.default.OPTIONAL_STRING,custom2:i.default.OPTIONAL_STRING,custom3:i.default.OPTIONAL_STRING,custom4:i.default.OPTIONAL_STRING,custom5:i.default.OPTIONAL_STRING,custom6:i.default.OPTIONAL_STRING,custom7:i.default.OPTIONAL_STRING,custom8:i.default.OPTIONAL_STRING}});n.saveDomainCustomization=v;var _=i.default.get({url:c,id:"CH_PHP_FPM_CONFIGURATION",schema:{user:i.default.REQUIRED_STRING,"php-fpm":i.default.REQUIRED_STRING},after:function(){return s.fp.flow(s.fp.project({error:"CONFIG_ERROR",test:"CONFIG_TEST",custom1:"CUSTOM1",custom2:"CUSTOM2",global_custom1:"GLOBAL_CUSTOM1",global_custom2:"GLOBAL_CUSTOM2","config.data":"FPM_CONFIG","config.file":"FPM_CONFIG_FILE","config.version":"FPM_VER","template.custom":"PHP_FPM_IS_CUSTOM_TEMPLATE","template.data":"PHP_FPM_TEMPLATE","template.name":"PHP_FPM_TEMPLATE_NAME","template.short":"PHP_FPM_TEMPLATE_NAME_SHORT"}),s.fp.mapProps({error:s.fp.isEqual("1"),test:p,custom1:p,custom2:p,config:s.fp.mapProp("data",u),template:s.fp.mapProps({custom:s.fp.isEqual("1"),data:u})}))}});n.getPhpFpmConfiguration=_;var A=i.default.get({id:"CH_PHP_FPM_TOKENS",url:c,schema:{user:i.default.REQUIRED_STRING,"php-fpm":i.default.REQUIRED_STRING},after:function(){return s.fp.flow(s.fp.getProp("AVAILABLE_TOKENS"),s.fp.mapValues((function(t,n){return{token:n,value:t}})),s.fp.toArray)}});n.getPhpFpmTokens=A;var h=i.default.post({url:c,schema:{user:i.default.REQUIRED_STRING,"php-fpm":i.default.REQUIRED_STRING,custom1:i.default.OPTIONAL_STRING,custom2:i.default.OPTIONAL_STRING,all_php_versions:i.default.OPTIONAL_BOOL}});n.savePhpFpmTokens=h;var b=i.default.get({id:"CH_DIFF",url:"/CMD_TEMPLATE_DIFF",schema:{name:i.default.REQUIRED_STRING},after:function(){return s.fp.flow(s.fp.deleteProp("lines"),s.fp.mapValues((function(t,n){return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){(0,a.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},t,{number:n})})),s.fp.toArray,s.fp.mapArray(s.fp.moveProp("line","content")),s.fp.mapArrayProps({number:s.fp.convert.toAppNumber,content:function(t){return t?t.replace(/\t/g,"    "):""}}),s.fp.sortBy("number"))}});n.getDiff=b},1543:function(t,n,e){"use strict";e.r(n);var o=e(1564),a=e(1468);for(var r in a)"default"!==r&&function(t){e.d(n,t,(function(){return a[t]}))}(r);var i=e(0),s=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);n.default=s.exports},1564:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ui-dialog",{attrs:{id:"VIEW_ALL_AVAILABLE_TOKENS",size:"normal"}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("View All Available Tokens")]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[e("ui-form-element",{attrs:{underline:!1}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Filter Tokens\n                    ")]),t._v(" "),e("ui-input-group",{attrs:{slot:"content"},slot:"content"},[e("input-text",{attrs:{slot:"input"},slot:"input",model:{value:t.search,callback:function(n){t.search=n},expression:"search"}}),t._v(" "),e("ui-button",{attrs:{slot:"additions:right",theme:"light"},on:{click:function(n){t.hideEmpty=!t.hideEmpty}},slot:"additions:right"},[e("input-checkbox",{model:{value:t.hideEmpty,callback:function(n){t.hideEmpty=n},expression:"hideEmpty"}},[e("translate",[t._v("Hide Empty")])],1)],1)],1)],1),t._v(" "),e("ui-r-table",t._b({attrs:{verticalLayout:t.$_Client.isPhone,disablePagination:"",hideBeforeControls:"",unstickHeaders:""}},"ui-r-table",{rows:t.filtered,columns:[{id:"token",label:t.$gettext("Token"),width:"200px"},{id:"value",label:t.$gettext("Value")}],isCheckable:!1},!1))],1)],1)},a=[];e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return a}))},1624:function(t,n,e){"use strict";e.r(n);var o=e(1625),a=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,(function(){return o[t]}))}(r);n.default=a.a},1625:function(t,n,e){"use strict";var o=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=o(e(15)),i=o(e(16)),s=e(1484),l=e(24),u={components:{AvailableTokensDialog:o(e(1543)).default},preload:[function(t){var n=t.user,e=t.version;return(0,s.getPhpFpmConfiguration)({user:n,"php-fpm":e})},function(t){var n=t.user,e=t.version;return(0,s.getPhpFpmTokens)({user:n,"php-fpm":e})}],api:[{command:s.getPhpFpmConfiguration,bind:"config"},{command:s.getPhpFpmTokens,bind:"tokens"}],mixins:[(0,l.$bindTab)({defaultTab:"global_custom1",param:"tab"})],props:{user:String,version:String},data:function(){return{global_custom1:"",global_custom2:"",custom1:"",custom2:"",tokensFilter:{search:"",hideEmpty:!0},allPHPVersions:!1}},methods:{save:(a=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.savePhpFpmTokens)({user:this.user,"php-fpm":this.version,custom1:this.custom1,custom2:this.custom2,global_custom1:this.global_custom1,global_custom2:this.global_custom2,all_php_versions:this.allPHPVersions});case 2:(0,s.getPhpFpmConfiguration)({user:this.user,"php-fpm":this.version});case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},created:function(){this.custom1=this.$api.config.custom1,this.custom2=this.$api.config.custom2,this.global_custom1=this.$api.config.global_custom1,this.global_custom2=this.$api.config.global_custom2}};n.default=u},1626:function(t,n,e){var o=e(2511);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,e(5).default)("76c810c9",o,!0,{})},2510:function(t,n,e){"use strict";var o=e(1626);e.n(o).a},2511:function(t,n,e){(t.exports=e(4)(!0)).push([t.i,"#custom-httpd-php-fpm textarea[data-v-83abd9a4]{margin-top:1rem;margin-bottom:3rem;display:block;width:100%;resize:vertical;max-height:unset;min-height:20rem;height:20rem}#custom-httpd-php-fpm .configuration-check[data-v-83abd9a4]{border:1px solid #ddd;padding:1rem;border-radius:4px;color:#333;font-family:monospace;overflow-y:auto}.config[data-v-83abd9a4]{list-style-type:decimal;list-style-position:outside;padding:2rem 0;background:#fff;margin:0;padding:0 0 0 55px;border:1px solid #ddd;border-bottom-left-radius:4px;border-bottom-right-radius:4px;color:#acacac;font-family:Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,monospace,serif}.config.limited[data-v-83abd9a4]{max-height:80vh;overflow-x:auto}.config .line[data-v-83abd9a4]{background:#fff;margin-left:-6px;white-space:nowrap;width:100%}.config .line-content[data-v-83abd9a4]{color:#333;margin:0 0 0 -13px;border-left:1px solid #ddd;vertical-align:top;padding:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:100%;min-height:20px}","",{version:3,sources:["/home/evo/evolution/src/js/pages/admin/custom-httpd/php-fpm.vue"],names:[],mappings:"AAkLA,gDAEQ,gBACA,mBACA,cACA,WACA,gBACA,iBACA,iBACA,YAAa,CATrB,4DAYQ,sBACA,aACA,kBACA,WACA,sBACA,eAAgB,CACnB,yBAGD,wBACA,4BACA,eAEA,gBACA,SACA,mBACA,sBACA,8BACA,+BACA,cACA,0HAA0I,CAZ9I,iCAcQ,gBACA,eAAgB,CAfxB,+BAkBQ,gBACA,iBACA,mBACA,UAAW,CArBnB,uCAuBY,WACA,mBACA,2BACA,mBACA,UACA,2BAAA,2BAAA,oBACA,YACA,eAAgB,CAAA",file:"php-fpm.vue?vue&type=style&index=0&id=83abd9a4&lang=scss&scoped=true&",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#custom-httpd-php-fpm {\n    textarea {\n        margin-top: 1rem;\n        margin-bottom: 3rem;\n        display:block;\n        width: 100%;\n        resize: vertical;\n        max-height: unset;\n        min-height: 20rem;\n        height: 20rem;\n    }\n    .configuration-check {\n        border: 1px solid #ddd;\n        padding: 1rem;\n        border-radius: 4px;\n        color: #333;\n        font-family: monospace;\n        overflow-y: auto;\n    }\n}\n.config {\n    list-style-type: decimal;\n    list-style-position: outside;\n    padding: 2rem 0;\n\n    background: #FFF;\n    margin: 0;\n    padding: 0px 0px 0px 55px;\n    border: 1px solid #ddd;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    color: #ACACAC;\n    font-family: Consolas, Menlo, Monaco, "Lucida Console","Liberation Mono", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace, serif;\n    &.limited {\n        max-height: 80vh;\n        overflow-x: auto;\n    }\n    .line {\n        background: white;\n        margin-left: -6px;\n        white-space: nowrap;\n        width: 100%;\n        &-content {\n            color: #333;\n            margin: 0 0 0 -13px;\n            border-left: 1px solid #ddd;\n            vertical-align: top;\n            padding: 0px;\n            display:inline-flex;\n            height: 100%;\n            min-height: 20px;\n        }\n    }\n}\n'],sourceRoot:""}])},2512:function(t,n){},3041:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-page",{attrs:{id:"custom-httpd-php-fpm"}},[e("ui-grid",{attrs:{slot:"page:title"},slot:"page:title"},[e("translate",{attrs:{"translate-params":{user:t.user,version:t.version}}},[t._v("\n            PHP-FPM config customization for %{ user } php-fpm %{ version }\n        ")]),t._v(" "),t.$api.config.error?e("ui-badge",{attrs:{theme:"danger",size:"big"}},[e("translate",[t._v("Syntax Error")])],1):t._e()],1),t._v(" "),e("app-page-section",[e("translate",[t._v("Add the code to be inserted into the CUSTOM tokens.")]),t._v(" "),e("ui-tabs",{attrs:{tabs:[{id:"global_custom1",label:t.$gettext("php-fpm Global |CUSTOM1|")},{id:"global_custom2",label:t.$gettext("php-fpm Global |CUSTOM2|")},{id:"custom1",label:"php-fpm "+t.version+" |CUSTOM1|"},{id:"custom2",label:"php-fpm "+t.version+" |CUSTOM2|"}],selected:t.tab},on:{"update:selected":function(n){t.tab=n}}},[e("div",{attrs:{slot:"tab:global_custom1"},slot:"tab:global_custom1"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.global_custom1,expression:"global_custom1"}],domProps:{value:t.global_custom1},on:{input:function(n){n.target.composing||(t.global_custom1=n.target.value)}}}),t._v(" "),e("translate",[t._v("Global custom tokens apply to all php version, but only for this User. Global is added before per-php tokens.")])],1),t._v(" "),e("div",{attrs:{slot:"tab:global_custom2"},slot:"tab:global_custom2"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.global_custom2,expression:"global_custom2"}],domProps:{value:t.global_custom2},on:{input:function(n){n.target.composing||(t.global_custom2=n.target.value)}}}),t._v(" "),e("translate",[t._v("Global custom tokens apply to all php version, but only for this User. Global is added before per-php tokens.")])],1),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom1,expression:"custom1"}],attrs:{slot:"tab:custom1"},domProps:{value:t.custom1},on:{input:function(n){n.target.composing||(t.custom1=n.target.value)}},slot:"tab:custom1"}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom2,expression:"custom2"}],attrs:{slot:"tab:custom2"},domProps:{value:t.custom2},on:{input:function(n){n.target.composing||(t.custom2=n.target.value)}},slot:"tab:custom2"})]),t._v(" "),e("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"end"},expression:"{ cross: 'center', main: 'end' }"},{name:"margin",rawName:"v-margin",value:[1,,,],expression:"[1,,,]"}]},[e("ui-tooltip",{attrs:{theme:"danger"}},[e("input-checkbox",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],attrs:{slot:"trigger"},slot:"trigger",model:{value:t.allPHPVersions,callback:function(n){t.allPHPVersions=n},expression:"allPHPVersions"}},[e("translate",[t._v("Save for all PHP versions")])],1),t._v(" "),e("translate",[t._v("\n                    This assumes your code is valid across all php versions. This will also overwrite any other custom code for other versions.\n                ")])],1),t._v(" "),e("ui-button",{attrs:{theme:"safe"},on:{click:t.save}},[e("translate",[t._v("Save")])],1)],1)],1),t._v(" "),e("app-page-section",[e("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v(t._s(t.$api.config.template.name))]),t._v(" "),e("ol",{staticClass:"config limited"},t._l(t.$api.config.template.data,(function(n){return e("li",{staticClass:"line"},[e("pre",{staticClass:"line-content",domProps:{textContent:t._s(n)}})])})),0)],1),t._v(" "),e("app-page-section",[e("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v(t._s(t.$api.config.config.file))]),t._v(" "),e("ol",{staticClass:"config limited"},t._l(t.$api.config.config.data,(function(n){return e("li",{staticClass:"line"},[e("pre",{staticClass:"line-content",domProps:{textContent:t._s(n)}})])})),0)],1),t._v(" "),t.$api.config.error?e("app-page-section",[e("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Configuration Check")]),t._v(" "),e("pre",{staticClass:"configuration-check",domProps:{textContent:t._s(t.$api.config.test)}})],1):t._e(),t._v(" "),e("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(n){t.$dialog("VIEW_ALL_AVAILABLE_TOKENS").open()}},slot:"bottom:links"},[e("translate",[t._v("Available Tokens")])],1),t._v(" "),e("available-tokens-dialog",{attrs:{tokens:t.$api.tokens}})],1)},a=[];e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return a}))}}]);