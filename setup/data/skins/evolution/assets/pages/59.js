(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1338:function(e,t,n){"use strict";n.r(t);var a=n(3075),r=n(1779);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n(2644);var o=n(0),l=n(2646),u=n.n(l),i=Object(o.a)(r.default,a.a,a.b,!1,null,"a655742a",null);"function"==typeof u.a&&u()(i),t.default=i.exports},1452:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.updateCron=t.getCron=t.restoreBackup=t.getRestoreFiles=t.scheduleBackup=t.getRestoreOptions=t.getScheduleOptions=t.getSettings=t.updateSettings=t.deleteCrons=t.duplicateCrons=t.getEncryptionStatus=t.getCrons=void 0;var r=a(n(2)),s=a(n(30));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u="/CMD_USER_BACKUP",i=s.default.get({id:"USER_BACKUPS",url:u,after:function(e){return e.flow((function(e){return{rows:e.crons,location:e.files_location}}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({where:e.flow(e.moveProp("encryption_password","encrypted"),e.mapProps({encrypted:e.flow(e.setDefault("0"),e.isEqual("1")),path:function(e){return e.replace("<span class='green_lock'>&#128274;</span>","").trim()}}))}))}))}});t.getCrons=i;var p=s.default.get({id:"BACKUP_ENCRYPTION_STATUS",url:u,after:function(e){return e.flow(e.project({enabled:"settings.allow_backup_encryption",password:"settings.encryption_password"}),e.mapProp("enabled",e.convert.toAppBoolean))}});t.getEncryptionStatus=p;var c=s.default.select({url:u,params:{duplicate:!0}});t.duplicateCrons=c;var f=s.default.select({url:u,params:{delete:!0}});t.deleteCrons=f;var d=s.default.post({url:u,params:{action:"setting"},schema:{message:s.default.REQUIRED_BOOL,local_ns:s.default.REQUIRED_BOOL,restore_spf:s.default.REQUIRED_BOOL}});t.updateSettings=d;var _=s.default.get({id:"USER_BACKUP_SETTINGS",url:u,after:function(e){return e.flow(e.project({local_ns:"settings.local_ns",message:"settings.message",restore_spf:"settings.restore_spf"}),e.mapValues(e.convert.toAppBoolean))}});t.getSettings=_;var v=s.default.get({id:"USER_BACKUP_SCHEDULE_OPTIONS",url:u,after:function(e){return e.flow(e.project({settings:"settings","settings.append":"append_to_path",where:"where",users:"users",location:"files_location"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),settings:e.flow(e.project({ip:"ftp_ip",password:"ftp_password",path:"ftp_path",port:"ftp_port",secure:"ftp_secure",username:"ftp_username",append:"append"}),e.mapProps({secure:e.convert.toAppBoolean,append:function(e){var t=Object.values(e),n=t.find((function(e){return e.selected})),a=t.reduce((function(e,t){return l({},e,(0,r.default)({},t.value,t.text))}),{});return{value:n.value,options:a}}}))}))}});t.getScheduleOptions=v;var m=s.default.get({id:"USER_BACKUP_RESTORE_OPTIONS",url:u,after:function(e){return e.flow(e.project({settings:"settings",where:"where",location:"files_location",ips:"ip_list",files:"files"}),e.mapProps({files:e.flow(e.deleteProp("info"),e.toArray),settings:e.flow(e.getProps(["ftp_ip","ftp_password","ftp_path","ftp_port","ftp_secure","ftp_username"]),e.mapProps({ftp_secure:e.convert.toAppBoolean})),ips:function(e){var t=Object.values(e),n=t.find((function(e){return e.selected})),a=t.reduce((function(e,t){return l({},e,(0,r.default)({},t.value,t.text))}),{});return{value:n.value,options:a}}}))}});t.getRestoreOptions=m;var O=s.default.post({url:u,params:{action:"create",form_version:"3"},schema:{who:s.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:s.default.OPTIONAL_BOOL,when:s.default.REQUIRED_STRING,minute:s.default.OPTIONAL_STRING,hour:s.default.OPTIONAL_STRING,dayofmonth:s.default.OPTIONAL_STRING,month:s.default.OPTIONAL_STRING,dayofweek:s.default.OPTIONAL_STRING,where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,append_to_path:s.default.OPTIONAL_STRING,custom_append:s.default.OPTIONAL_STRING,encryption_password:s.default.OPTIONAL_STRING}});t.scheduleBackup=O;var I=s.default.get({url:u,id:"USER_BACKUP_RESTORE_FILES",params:{action:"update_files"},schema:{where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING},after:function(e){return e.flow(e.getProp("files"),e.deleteProp("info"),e.toArray)}});t.getRestoreFiles=I;var R=s.default.post({url:u,params:{action:"restore"},schema:{where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,ip_choice:s.default.REQUIRED_STRING,ip:s.default.OPTIONAL_STRING,select:{type:Array,required:!0},encryption_password:s.default.OPTIONAL_STRING}});t.restoreBackup=R;var h=s.default.post({url:"/CMD_USER_BACKUP_MODIFY",id:"USER_BACKUP_CRON",schema:{id:s.default.REQUIRED_STRING},notifySuccess:!1,notifyError:!0,after:function(e){return e.flow(e.moveProp({append_to_path:"append","settings.where":"where"}),e.mapProps({settings:e.mapProp("ftp_secure",e.convert.toAppBoolean),who:e.mapProps({skip_suspended:e.convert.toAppBoolean,users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),select:e.feedWith(1,e.flow(e.getProp("users"),e.deleteProp("info"),e.filter(e.flow(e.getProp("checkbox"),e.isEqual("checked"))),e.mapValues(e.getProp("user")),e.toArray))}),append:e.flow(e.mapProps({options:e.feedWith(1,e.transformObject((function(e){var t=e.value,n=e.text;return(0,r.default)({},t,n)}))),value:e.feedWith(1,e.flow(e.find(e.getProp("selected")),e.getProp("value")))}),e.getProps(["value","options"])),custom_append:e.feedWith(1,e.getProp("append.custom_append"))}))}});t.getCron=h;var T=s.default.post({url:u,params:{action:"modify",when:"cron",form_version:"3"},schema:{id:s.default.REQUIRED_STRING,who:s.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:s.default.OPTIONAL_BOOL,minute:s.default.REQUIRED_STRING,hour:s.default.REQUIRED_STRING,dayofmonth:s.default.REQUIRED_STRING,month:s.default.REQUIRED_STRING,dayofweek:s.default.REQUIRED_STRING,where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,append_to_path:s.default.REQUIRED_STRING,custom_append:s.default.OPTIONAL_STRING}});t.updateCron=T},1779:function(e,t,n){"use strict";n.r(t);var a=n(1780),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},1780:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1452),s=a(n(2643)),o={preload:r.getCrons,commands:{getCrons:r.getCrons},api:[{command:r.getCrons,bind:"crons"}],components:{SettingsDialog:s.default},data:function(){return{select:[]}},methods:{duplicateCrons:function(){(0,r.duplicateCrons)({select:this.select}).then(this.$reloadApiTable)},deleteCrons:function(){(0,r.deleteCrons)({select:this.select}).then(this.$reloadApiTable)}}};t.default=o},1781:function(e,t,n){"use strict";n.r(t);var a=n(1782),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},1782:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=a(n(15)),o=a(n(16)),l=n(1452),u={data:function(){return{message:!1,local_ns:!1,restore_spf:!1}},created:(r=(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=this,e.next=4,(0,l.getSettings)();case 4:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),methods:{saveSettings:function(){(0,l.updateSettings)(this.$data)}}};t.default=u},1783:function(e,t,n){var a=n(2645);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5).default)("5c42a570",a,!0,{})},2643:function(e,t,n){"use strict";n.r(t);var a=n(3204),r=n(1781);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);var o=n(0),l=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);t.default=l.exports},2644:function(e,t,n){"use strict";var a=n(1783);n.n(a).a},2645:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"#reseller-user-backups li[data-v-a655742a]{list-style-type:none}","",{version:3,sources:["/home/evo/evolution/src/js/pages/reseller/backups/index.vue"],names:[],mappings:"AA4IA,2CACS,oBAAqB,CAAA",file:"index.vue?vue&type=style&index=0&id=a655742a&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#reseller-user-backups {\n    li { list-style-type: none; }\n}\n"],sourceRoot:""}])},2646:function(e,t){},3075:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{id:"reseller-user-backups"}},[n("template",{slot:"header:buttons"},[n("ui-button-link",{attrs:{theme:"safe",name:"reseller/backups/schedule"}},[n("translate",[e._v("Schedule Backup")])],1),e._v(" "),n("ui-button-link",{attrs:{theme:"primary",name:"reseller/backups/restore"}},[n("translate",[e._v("Restore Backup")])],1)],1),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({on:{"action:duplicate":e.duplicateCrons,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:when",fn:function(t){var a=t.when;return[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[n("translate",{attrs:{"translate-params":a}},[e._v("Minute: %{minute}")]),e._v(" "),n("translate",{attrs:{"translate-params":a}},[e._v("Hour: %{hour}")]),e._v(" "),n("translate",{attrs:{"translate-params":a}},[e._v("Day of Month: %{dayofmonth}")]),e._v(" "),n("translate",{attrs:{"translate-params":a}},[e._v("Month: %{month}")]),e._v(" "),n("translate",{attrs:{"translate-params":a}},[e._v("Day of Week: %{dayofweek}")])],1)]}},{key:"col:who",fn:function(t){var a=t.who;return["all"===a.who?n("translate",[e._v("All Users")]):"selected"===a.who?[n("translate",{attrs:{tag:"strong"}},[e._v("Selected Users:")]),e._v(" "),e._l(a.select,(function(t){return n("li",[e._v(e._s(t))])}))]:[n("translate",{attrs:{tag:"strong"}},[e._v("All Users Except:")]),e._v(" "),e._l(a.select,(function(t){return n("li",[e._v(e._s(t))])}))],e._v(" "),"yes"===a.skip_suspended?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Skip Suspended")])],1):e._e()]}},{key:"col:where",fn:function(t){var a=t.where,r=a.encrypted,s=a.path;return[r?n("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[n("translate",[e._v("Encrypted")])],1):e._e(),e._v(" "),s?[e._v("\n                    "+e._s(s)+"\n                ")]:[e._v("\n                    "+e._s(e.$api.crons.location)+"\n                ")]]}},{key:"row:actions",fn:function(t){var a=t.id;return n("ui-button-link",{attrs:{name:"reseller/backups/modify",params:{id:a},icon:"pencil",title:e.$gettext("Edit")}})}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getCrons,rowID:"id",columns:{when:e.$gettext("When"),who:e.$gettext("Who"),where:e.$gettext("Where")},actions:{duplicate:e.$gettext("Duplicate"),del:e.$gettext("Delete")},equalWidthLayout:!0,editable:!1,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("BACKUP_RESTORE_SETTINGS").open()}},slot:"bottom:links"},[n("translate",[e._v("Backup/Restore Settings")])],1),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("scheduled backup","scheduled backups",e.select.length)},on:{"click:confirm":e.deleteCrons}}),e._v(" "),n("settings-dialog")],2)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},3204:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"BACKUP_RESTORE_SETTINGS"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Backup/Restore Settings")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[n("translate",[e._v("Send a message when a backup has finished.")])],1)],1),e._v(" "),n("ui-form-element",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir:'column' }"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{type:"radio",value:!0},model:{value:e.local_ns,callback:function(t){e.local_ns=t},expression:"local_ns"}},[n("translate",[e._v("\n                        Restore with local NameServers.\n                    ")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:!1},model:{value:e.local_ns,callback:function(t){e.local_ns=t},expression:"local_ns"}},[n("translate",[e._v("\n                        Use NS values from backup.\n                    ")])],1)],1)]),e._v(" "),n("ui-form-element",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir:'column' }"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{type:"radio",value:!0},model:{value:e.restore_spf,callback:function(t){e.restore_spf=t},expression:"restore_spf"}},[n("translate",[e._v("\n                        Restore with SPF values from backup.\n                    ")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:!1},model:{value:e.restore_spf,callback:function(t){e.restore_spf=t},expression:"restore_spf"}},[n("translate",[e._v("\n                        Use local SPF values.\n                    ")])],1)],1)])],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.saveSettings},slot:"buttons"},[n("translate",[e._v("Save")])],1)],2)},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))}}]);