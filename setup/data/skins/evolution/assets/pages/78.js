(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1393:function(e,t,n){"use strict";n.r(t);var a=n(3129),o=n(2083);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var i=n(0),s=n(2857),l=n.n(s),c=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(c),t.default=c.exports},1490:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getIdInfo=t.loadSmtpLog=t.unblockBlockcrackerPaths=t.getUsage=t.getSendingScripts=t.getBlockCracking=void 0;var o=a(n(30)),r=o.default.get({id:"BLOCK_CRACKING",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!1,block_cracking_paths:!0},domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return e.block_cracking_paths?e:{block_cracking_paths:"no",block_cracking_paths_table:{info:{ipp:"10",total_pages:"1",current_page:"1",rows:"0"}}}}),e.moveProp({block_cracking_paths:"options.enabled",block_cracking_paths_table:"rows"}),e.processTableInfo("rows"),e.mapProps({options:e.mapProps({enabled:e.convert.toAppBoolean}),rows:e.flow(e.toArray,e.mapArray(e.flow(e.moveProp({date_blocked:"date",blocked_path:"path"}),e.mapProps({date:e.convert.toAppDate}))))}))}});t.getBlockCracking=r;var i=o.default.get({id:"SENDING_SCRIPTS",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!0,block_cracking_paths:!1,which:"both"},domain:!0,pagination:!0,after:function(e){return e.flow(e.moveProp({sending_php_scripts:"rows"}),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArray(e.flow(e.moveProp({script_name:"script",mail_line_number:"line",send_count:"send"}),e.mapProps({send:e.convert.toAppNumber,line:e.flow(e.convert.toAppString,e.convert.toAppNumber)}))))))}});t.getSendingScripts=i;var s=o.default.get({id:"EMAIL_USAGE",url:"/CMD_EMAIL_USAGE",params:{main_info:!0,sending_php_scripts:!1,block_cracking_paths:!1,which:"both"},schema:{direction:o.default.OPTIONAL_STRING},domain:!0,pagination:!0,after:function(e){return e.flow(e.project({rows:"deliveries",highest:"highest"}),e.processTableInfo("rows"),e.mapProp("rows",e.mapArrayProps({time:e.convert.toAppDate,size:e.convert.toAppNumber})))}});t.getUsage=s;var l=o.default.select({url:"/CMD_EMAIL_USAGE",params:{unblock:!0,action:"unblock"},domain:!0});t.unblockBlockcrackerPaths=l;var c=o.default.get({id:"SMTP_LOG",url:"/CMD_EMAIL_USAGE",params:{action:"smtp_log"},schema:{user:o.default.REQUIRED_STRING,method:o.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(e){return e.split("\n")}}});t.loadSmtpLog=c;var u=o.default.get({id:"EMAIL_USAGE_ID_INFO",url:"/CMD_EMAIL_USAGE",params:{action:"id_info"},schema:{id:o.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(e){return e.split("\n")}}});t.getIdInfo=u},2083:function(e,t,n){"use strict";n.r(t);var a=n(2084),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t.default=o.a},2084:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(15)),r=a(n(16)),i=a(n(2)),s=n(1490);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u,p={components:{IdInfoDialog:a(n(2856)).default},preload:[function(e){var t=e.direction,n=void 0===t?"outgoing":t;return(0,s.getUsage)({direction:n})},s.getBlockCracking],api:[{command:s.getUsage,bind:{"response.highest":"highest"}},{command:s.getBlockCracking,bind:{"response.options.enabled":"blockCracking"}}],props:{direction:{type:String,required:!1,default:"outgoing"}},commands:{getUsage:s.getUsage},data:function(){return{showFrom:"both"}},computed:{totalUsage:function(){return[c({label:this.$gettext("Sender"),tooltip:this.$gettext('The "From" value set in the email header. This value should not be considered as accurate, as a sender can specify any value they wish.')},this.$api.highest.sender),c({label:this.$gettext("Authentication"),tooltip:this.$gettext("If SMTP authentication is used, this will show the login name used. Scripts will show the owner of the script. Can be considered accurate.")},this.$api.highest.authenticated_id),c({label:this.$gettext("Sender Host"),tooltip:this.$gettext("If this is set, it will show the IP that connect to the server. If no IP is set, then the email was sent vie a local script.")},this.$api.highest.sender_host_address),c({label:this.$gettext("Path"),tooltip:this.$gettext('If the email was generated from a script, the path value will show the working directory the script was in. An email in the spool will have a path value of "retry" for each attempt.')},this.$api.highest.php_script)]}},methods:{toggleDirection:function(e){this.$router.push({name:"user/email/usage",params:{direction:e}})},showIdInfo:(u=(0,r.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getIdInfo)({id:t});case 2:this.$dialog("ID_INFO_DIALOG").open();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})}};t.default=p},2085:function(e,t,n){"use strict";n.r(t);var a=n(2086),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t.default=o.a},2086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={api:[{command:n(1490).getIdInfo,bind:"info"}]};t.default=a},2856:function(e,t,n){"use strict";n.r(t);var a=n(3249),o=n(2085);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var i=n(0),s=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);t.default=s.exports},2857:function(e,t){},3129:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row",cross:e.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[1,1],expression:"[1, 1]"}]},[n("translate",{staticClass:"txt:bold",style:{minWidth:"11rem"}},[e._v("\n                Show Usage From:\n            ")]),e._v(" "),n("input-check",{attrs:{type:"radio",value:"today"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[n("translate",[e._v("Today")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:"past"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[n("translate",[e._v("This Month (excluding today)")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:"both"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[n("translate",[e._v("This Month")])],1)],1),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row",cross:e.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[null,1],expression:"[null, 1]"}]},[n("translate",{directives:[{name:"margin",rawName:"v-margin",value:[1,0,0,0],expression:"[1, 0, 0, 0]"}],staticClass:"txt:bold",style:{minWidth:"11rem"}},[e._v("\n                Direction:\n            ")]),e._v(" "),n("input-check",{attrs:{type:"radio",value:"outgoing",model:e.direction},on:{change:e.toggleDirection}},[n("translate",[e._v("Outgoing")])],1),e._v(" "),n("input-check",{attrs:{type:"radio",value:"incoming",model:e.direction},on:{change:e.toggleDirection}},[n("translate",[e._v("Incoming")])],1)],1)]),e._v(" "),"outgoing"===e.direction?n("app-page-section",[n("ui-r-table",{attrs:{"is-checkable":!1,rows:e.totalUsage,"disable-pagination":"","is-sortable":!1,editable:!1,columns:[{id:"label",label:e.$gettext("Highest")},{id:"value",label:e.$gettext("Value")},{id:"count",label:e.$gettext("Count")},{id:"percent",label:e.$gettext("Percent")}],"vertical-layout":e.$_Client.isPhone},scopedSlots:e._u([{key:"col:label",fn:function(t){var a=t.label,o=t.tooltip;return n("ui-tooltip",{attrs:{theme:"safe"}},[n("span",{staticClass:"txt:bold cursor:pointer",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                    "+e._s(a)+"\n                    "),n("ui-icon",{attrs:{id:"question",theme:"safe",size:"medium"}})],1),e._v("\n                "+e._s(o)+"\n            ")])}}],null,!1,3406668854)},[e._v(" "),n("translate",{attrs:{slot:"table:after"},slot:"table:after"},[e._v("\n                Note: For older exim.pl files before version 13, each delivery attempt is counted, including retries.\n            ")])],1)],1):e._e(),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({ref:"table",attrs:{"disable-select":"","vertical-layout":e.$_Client.isPhone},scopedSlots:e._u([{key:"col:id",fn:function(t){var a=t.id;return n("ui-link",{on:{click:function(t){return e.showIdInfo(a)}}},[e._v("\n                "+e._s(a)+"\n            ")])}}])},"ui-api-table",{command:e.$commands.getUsage,columns:{time:{label:e.$gettext("Time"),filter:"date"},sender:{label:e.$gettext("Sender"),searchable:!0},authenticated_id:{label:e.$gettext("Authentication"),searchable:!0},sender_host_address:{label:e.$gettext("Sender Host"),searchable:!0},size:{label:e.$gettext("Size"),filter:"humanReadableSize"},destination:{label:e.$gettext("Destination"),searchable:!0},path:{label:e.$gettext("Path"),searchable:!0},id:e.$gettext("ID")},requestData:{which:e.showFrom},requestData:{direction:e.direction}},!1))],1),e._v(" "),n("template",{slot:"bottom:links"},[e.$api.blockCracking?n("ui-link",{attrs:{name:"user/email/usage/blockcracking",bullet:""}},[n("translate",[e._v("BlockCracking Blocked Paths")])],1):e._e(),e._v(" "),n("ui-link",{attrs:{name:"user/email/usage/php-scripts",bullet:""}},[n("translate",[e._v("PHP Scripts")])],1)],1),e._v(" "),n("id-info-dialog")],2)},o=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}))},3249:function(e,t,n){"use strict";var a=function(){var e=this.$createElement,t=this._self._c||e;return t("ui-dialog",{attrs:{id:"ID_INFO_DIALOG","no-close-btn":"",size:"normal"}},[t("translate",{attrs:{slot:"title"},slot:"title"},[this._v("\n        ID Info\n    ")]),this._v(" "),t("ui-pre",{attrs:{slot:"content","content-lines":this.$api.info},slot:"content"})],1)},o=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}))}}]);