(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1309:function(e,t,a){"use strict";a.r(t);var s=a(3048),n=a(1670);for(var l in n)"default"!==l&&function(e){a.d(t,e,(function(){return n[e]}))}(l);var r=a(0),i=a(2566),o=a.n(i),u=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);"function"==typeof o.a&&o()(u),t.default=u.exports},1505:function(e,t,a){"use strict";a.r(t);var s=a(1506),n=a.n(s);for(var l in s)"default"!==l&&function(e){a.d(t,e,(function(){return s[e]}))}(l);t.default=n.a},1506:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=s(a(17)),r=s(a(15)),i=s(a(16)),o=a(7),u=s(a(1533)),d=a(1534),c={components:{InputIp:u.default},data:function(){return{ip:"",netmask:"255.255.255.0",version:"v4",addToDevice:!0}},computed:(0,o.mapTokens)({haveIPv6:"HAVE_IPV6"}),methods:{submit:(n=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$emit("submit",{ip:this.ip,netmask:"v4"===this.version?this.netmask:"/".concat(this.netmask),add_to_device:this.addToDevice}),this.$reset();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),validateIP:function(e){if(!e)return!0;var t=e.split("-"),a=(0,l.default)(t,1)[0];return this.regexps.ip.test(a)},validateRange:function(e){if(!e)return!0;var t=e.split("-"),a=(0,l.default)(t,2),s=a[0],n=a[1],r=s.split("v4"===this.version?".":":").pop();if(!r||!n)return!0;var i="v4"===this.version?10:16;return parseInt(n,i)>parseInt(r,i)},validateUniqueness:function(e){var t=e.value;return this.validateIP(t)?(0,d.validateIP)({value:t}):{valid:!0}}},created:function(){this.validateUniqueness.id="VALIDATE_IP"}};t.default=c},1534:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobal=t.validateIP=t.addIp=t.deleteIps=t.clearNamespace=t.removeReseller=t.assignReseller=t.getIps=void 0;var n=s(a(30)),l="/CMD_IP_MANAGER",r=(new(s(a(12)).default)).$gettext,i=n.default.get({url:l,id:"IP_MANAGER",response:{ips:[],info:{}},pagination:!0,after:function(e){return e.flow(e.moveProp({ips:"rows"}),e.deleteProp("num_ips"),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArray(e.flow(e.moveProp("extra.creators","resellers"),e.mapProps({global:e.isEqual("yes")}))))}))}});t.getIps=i;var o=n.default.select({url:l,params:{assign:!0,json:!0},schema:{reseller:n.default.REQUIRED_STRING}});t.assignReseller=o;var u=n.default.select({url:l,params:{json:!0,remove:!0}});t.removeReseller=u;var d=n.default.select({url:l,params:{json:!0,clear:!0}});t.clearNamespace=d;var c=n.default.select({url:"".concat(l,"?json=yes"),params:{json:!0,delete:!0}});t.deleteIps=c;var v=n.default.post({url:l,params:{action:"add",json:!0,add_to_device_aware:!0},schema:{ip:n.default.REQUIRED_STRING,netmask:n.default.REQUIRED_STRING,add_to_device:n.default.REQUIRED_BOOL}});t.addIp=v;var f=n.default.get({url:l,id:"VALIDATE_IP",params:{comparison1:"equals"},schema:{value:n.default.REQUIRED_STRING},before:function(e){return{value1:e.value,value:null}},after:function(){return function(e){return"0"!==e.ips.info.rows?{valid:!1,message:r("You already have this IP on your system.")}:{valid:!0}}}});t.validateIP=f;var p=n.default.select({url:l,params:{set_global:!0},schema:{global:n.default.REQUIRED_BOOL}});t.setGlobal=p},1670:function(e,t,a){"use strict";a.r(t);var s=a(1671),n=a.n(s);for(var l in s)"default"!==l&&function(e){a.d(t,e,(function(){return s[e]}))}(l);t.default=n.a},1671:function(e,t,a){"use strict";var s=a(1),n=a(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(1534)),r=s(a(1672)),i=s(a(2565)),o={preload:l.getIps,commands:l,api:[{command:l.getIps,bind:"data"}],components:{AddIpDialog:r.default,AssignIpDialog:i.default},data:function(){return{select:[]}},computed:{rows:function(){return this.$api.data.rows},selectedRows:function(){var e=this;return this.rows.filter((function(t){return e.select.includes(t.ip)}))},enableAssign:function(){return 1===this.selectedRows.length&&"server"!==this.selectedRows[0].status},enableRemove:function(){return this.selectedRows.every((function(e){return e.reseller}))},enableDelete:function(){return this.selectedRows.every((function(e){return!e.reseller&&"free"===e.status}))},enableGlobal:function(){return{set:this.selectedRows.some((function(e){return!e.global})),disabled:this.selectedRows.some((function(e){return"server"===e.status}))}}},methods:{reloadTable:function(){this.$reloadApiTable(),this.select=[]},assignIp:function(e){l.assignReseller({select:this.select,reseller:e}).then(this.reloadTable)},removeIpReseller:function(){l.removeReseller({select:this.select}).then(this.reloadTable)},clearIpNamespace:function(){l.clearNamespace({select:this.select}).then(this.reloadTable)},deleteIps:function(){l.deleteIps({select:this.select}).then(this.reloadTable)},addIp:function(e){l.addIp(e).then(this.reloadTable)},setGlobal:function(){l.setGlobal({select:this.select,global:this.enableGlobal.set}).then(this.reloadTable)}}};t.default=o},1672:function(e,t,a){"use strict";a.r(t);var s=a(2315),n=a(1505);for(var l in n)"default"!==l&&function(e){a.d(t,e,(function(){return n[e]}))}(l);var r=a(0),i=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1673:function(e,t,a){"use strict";a.r(t);var s=a(1674),n=a.n(s);for(var l in s)"default"!==l&&function(e){a.d(t,e,(function(){return s[e]}))}(l);t.default=n.a},1674:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={api:[{command:a(1534).getIps,bind:{"response.creators":"creators"}}],props:{ipCount:{type:Number,required:!0}},data:function(){return{reseller:""}},methods:{submit:function(){this.$emit("assign",this.reseller)}}};t.default=s},2315:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"ADD_IP_DIALOG",theme:"primary"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add IP Address")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,validateIP:e.validateIP,validateRange:e.validateRange,api:e.validateUniqueness},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IP Address")]),e._v(" "),a("input-ip",{attrs:{slot:"content",version:e.version,netmask:e.netmask,disableVersionSelect:!e.haveIPv6,allowRange:""},on:{"update:version":function(t){e.version=t},"update:netmask":function(t){e.netmask=t}},slot:"content",model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}}),e._v(" "),a("translate",{attrs:{slot:"error:validateIP"},slot:"error:validateIP"},[e._v("Should be valid IP Address")]),e._v(" "),a("translate",{attrs:{slot:"error:validateRange"},slot:"error:validateRange"},[e._v("Range end should be larger than start")])],1),e._v(" "),a("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,regex:e.regexps.ip},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Netmask")]),e._v(" "),"v4"===e.version?a("input-ip",{attrs:{slot:"content",disableVersionSelect:""},slot:"content",model:{value:e.netmask,callback:function(t){e.netmask=t},expression:"netmask"}}):a("translate",{attrs:{slot:"content"},slot:"content"},[e._v("\n                For IPv6 IPs, use a /mask, eg: /64\n            ")]),e._v(" "),a("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("Should be valid netmask")])],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.addToDevice,callback:function(t){e.addToDevice=t},expression:"addToDevice"}},[a("translate",[e._v("Add to device")])],1)],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"addIp"},on:{click:e.submit},slot:"buttons"},[a("translate",[e._v("Add IP")])],1)],2)},n=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}))},2565:function(e,t,a){"use strict";a.r(t);var s=a(3189),n=a(1673);for(var l in n)"default"!==l&&function(e){a.d(t,e,(function(){return n[e]}))}(l);var r=a(0),i=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);t.default=i.exports},2566:function(e,t){},3048:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("template",{slot:"header:buttons"},[a("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("ADD_IP_DIALOG").open()}}},[a("translate",[e._v("Add IP")])],1)],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({attrs:{"equal-width-layout":""},on:{"action:assign":function(t){e.$dialog("ASSIGN_IP_DIALOG").open()},"action:remove":e.removeIpReseller,"action:clear":e.clearIpNamespace,"action:global":e.setGlobal,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:ip",fn:function(t){var s=t.ip,n=t.global;return[a("ui-link",{attrs:{name:"admin/ip-manager/details",params:{ip:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]),e._v(" "),n?a("ui-badge",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{theme:"safe",icon:!1}},[a("translate",[e._v("Global")])],1):e._e()]}},{key:"col:resellers",fn:function(t){var s=t.resellers,n=t.status,l=t.reseller;return["server"===n?a("span"):[e._v("\n                    "+e._s(s?s.join(", "):l)+"\n                ")]]}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getIps,endpoint:"GET_IPS",rowID:"ip",columns:{ip:e.$gettext("IP"),status:e.$gettext("Status"),resellers:e.$gettext("Reseller(s)"),users:e.$gettext("Users"),nameserver:{label:e.$gettext("Name Server"),filter:"p6eUnicode"},netmask:e.$gettext("Netmask")},actions:{assign:{label:e.$gettext("Assign"),disabled:!e.enableAssign},remove:{label:e.$gettext("Remove from reseller"),disabled:!e.enableRemove},clear:e.$gettext("Clear NS"),global:{label:e.enableGlobal.set?e.$gettext("Set Global"):e.$gettext("Un-Set Global"),disabled:e.enableGlobal.disabled},del:{label:e.$gettext("Delete"),disabled:!e.enableDelete}},verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),a("assign-ip-dialog",{attrs:{"ip-count":e.select.length},on:{assign:e.assignIp}}),e._v(" "),a("add-ip-dialog",{on:{submit:e.addIp}}),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("IP Address","IP Addresses",e.select.length)},on:{"click:confirm":e.deleteIps}})],2)},n=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}))},3189:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"ASSIGN_IP_DIALOG",theme:"safe"}},[a("translate",{attrs:{slot:"title","translate-n":e.ipCount,"translate-plural":"Assign IPs"},slot:"title"},[e._v("\n        Assign IP\n    ")]),e._v(" "),a("ui-form-element",{attrs:{slot:"content",group:"assignIp",validators:{required:!0}},slot:"content"},[a("translate",{attrs:{slot:"title","translate-n":e.ipCount,"translate-plural":"Assign IPs to:"},slot:"title"},[e._v("\n            Assign IP to:\n        ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.$api.creators},slot:"content",model:{value:e.reseller,callback:function(t){e.reseller=t},expression:"reseller"}})],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",validateGroup:"assignIp",theme:"safe"},on:{click:e.submit},slot:"buttons"},[a("translate",[e._v("Assign")])],1)],1)},n=[];a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}))}}]);