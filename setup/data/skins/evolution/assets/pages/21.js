(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1381:function(t,n,e){"use strict";e.r(n);var a=e(3117),i=e(2037);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);e(2825);var s=e(0),r=e(2827),l=e.n(r),u=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(u),n.default=u.exports},1442:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.validateIPRangeList=n.validateDomain=n.validatePassword=n.validateSubdomain=n.validateUsername=n.validateDBUser=n.validateDatabase=n.validateDNSName=n.validateMXValue=n.validateDNSValue=n.validateFTP=n.validateEmail=n.validateForwarder=void 0;var i=a(e(30)),o=a(e(36)),s=a(e(1443)),r=i.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:i.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:s.default.isValid,message:s.default.getMessage}}),l=r.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});n.validateForwarder=l;var u=r.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});n.validateEmail=u;var c=r.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});n.validateFTP=c;var d=r.extend({params:{type:"dns"},domain:!0,schema:{record:i.default.REQUIRED_STRING}}),m=d.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:i.default.REQUIRED_STRING}});n.validateDNSValue=m;var p=m.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(t){return{value:"10",mx_value:t.value}}});n.validateMXValue=p;var _=d.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:i.default.REQUIRED_STRING,value:null}});n.validateDNSName=_;var f=r.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});n.validateDatabase=f;var v=r.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});n.validateDBUser=v;var g=r.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});n.validateUsername=g;var h=r.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});n.validateSubdomain=h;var A=r.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});n.validatePassword=A;var b=r.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(t){var n=t.value;return{value:o.default.toASCII(n)}}});n.validateDomain=b;var w=r.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});n.validateIPRangeList=w},1443:function(t,n,e){"use strict";e.r(n);var a=e(35);n.default={isValid:function(t){return void 0===t.error},getMessage:function(t){return Object(a.toAppHtml)(t.error||"")}}},1480:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.getLoginsList=n.webmailSSO=n.changeDKIMStatus=n.changePassword=n.modifyAccount=n.createAccount=n.purgeAccounts=n.deleteAccounts=n.unsuspendAccounts=n.suspendAccounts=n.getAccounts=n.$processors=void 0;var i=a(e(2)),o=a(e(23)),s=a(e(30)),r=e(18),l=e(49),u=function(t){return r.Maybe.Some(t).map(Number).filter(Number.isFinite).orSome(1/0)},c={sent:function(t){return r.Maybe.fromNull(t).filter((function(t){return"object"===(0,o.default)(t)})).flatMap((function(t){var n=t.sent,e=t.send_limit;try{return r.Maybe.Some({usage:u(n),limit:u(e)})}catch(t){return r.Maybe.None()}})).orSome(!1)},lastChange:function(t){return r.Maybe.fromNull(t).map((function(t){var n=t.ip,e=t.when;return{ip:(0,r.Identity)(n).map(l.toAppString).map(l.toAppText).get(),when:(0,r.Identity)(e).map(l.toAppDate).get()}})).orSome(!1)}};n.$processors=c;var d=s.default.get({id:"EMAIL_ACCOUNTS",url:"/CMD_EMAIL_POP",domain:!0,pagination:!0,params:{bytes:!0},after:function(t){return t.flow(t.wrap("options"),t.moveProp({"options.emails":"emails","options.EMAIL_MESSAGE":"options.email_message"}),t.mapProps({emails:t.toTable(t.mapArray(t.flow(t.moveProp({"usage.last_login":"last_login","usage.last_password_change":"last_password_change"}),t.mapProps({login:function(t){return t.includes("@")?t.split("@")[0]:t},is_default:function(t,n){return!n.login.includes("@")},sent:c.sent,usage:t.mapValues(u),last_login:c.lastChange,last_password_change:c.lastChange})))),options:t.mapProps({DKIM:t.isEqual("1"),DKIM_ENABLED:t.isEqual("1"),block_cracking_unblock:t.convert.toAppNumber,clean_forwarders_on_email_delete:t.isEqual("1"),count_pop_usage:t.isEqual("1"),hide_outlook:t.isEqual("1"),pop_disk_usage_cache:t.isEqual("1"),pop_disk_usage_true_bytes:t.isEqual("1"),user_can_set_email_limit:t.isEqual("1"),purge_select:t.toSelect,when_select:t.toSelect,HAVE_ONE_CLICK_WEBMAIL_LOGIN:t.convert.toAppBoolean,system_user_to_virtual_passwd:t.isEqual("1")})}))}});n.getAccounts=d;var m=s.default.post({url:"/CMD_EMAIL_POP",params:{action:"delete"},domain:!0}),p=m.extend({params:{suspend:!0}});n.suspendAccounts=p;var _=m.extend({params:{unsuspend:!0}});n.unsuspendAccounts=_;var f=m.extend({params:{delete:!0},schema:{clean_forwarders:s.default.REQUIRED_BOOL}});n.deleteAccounts=f;var v=m.extend({params:{purge:!0},body:{file:s.default.REQUIRED_STRING,what:s.default.REQUIRED_STRING}});n.purgeAccounts=v;var g=s.default.post({url:"/CMD_EMAIL_POP",params:{action:"create"},domain:!0,schema:{user:s.default.USER,passwd2:s.default.PASSWORD,passwd:s.default.PASSWORD,quota:s.default.REQUIRED_STRING,limit:s.default.OPTIONAL_STRING},after:function(t){return t.mapProp("result",(function(t){return t.replace(/(\\n)+/g,"\n")}))}});n.createAccount=g;var h=s.default.post({url:"/CMD_EMAIL_POP",params:{action:"modify"},domain:!0,schema:{user:s.default.USER,newuser:s.default.USER,passwd2:s.default.OPTIONAL_STRING,passwd:s.default.OPTIONAL_STRING,quota:s.default.REQUIRED_STRING,limit:s.default.OPTIONAL_STRING}});n.modifyAccount=h;var A=s.default.post({url:"/CMD_CHANGE_EMAIL_PASSWORD",schema:{email:s.default.REQUIRED_STRING,oldpassword:s.default.REQUIRED_STRING,password1:s.default.REQUIRED_STRING,password2:s.default.REQUIRED_STRING}});n.changePassword=A;var b=s.default.post({url:"/CMD_EMAIL_POP",domain:!0,schema:{action:s.default.REQUIRED_STRING},before:function(t){var n=t.action;return(0,i.default)({action:"set_dkim"},n,!0)}});n.changeDKIMStatus=b;var w=s.default.post({url:"/CMD_WEBMAIL_LOGIN",notifySuccess:!1,schema:{email:s.default.REQUIRED_STRING}});n.webmailSSO=w;var S=s.default.get({id:"LOGINS_LIST",url:"/CMD_EMAIL_POP",domain:!0,response:[],params:{quick:!0},mapResponse:function(t){return t.emails}});n.getLoginsList=S},1490:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.getIdInfo=n.loadSmtpLog=n.unblockBlockcrackerPaths=n.getUsage=n.getSendingScripts=n.getBlockCracking=void 0;var i=a(e(30)),o=i.default.get({id:"BLOCK_CRACKING",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!1,block_cracking_paths:!0},domain:!0,pagination:!0,after:function(t){return t.flow((function(t){return t.block_cracking_paths?t:{block_cracking_paths:"no",block_cracking_paths_table:{info:{ipp:"10",total_pages:"1",current_page:"1",rows:"0"}}}}),t.moveProp({block_cracking_paths:"options.enabled",block_cracking_paths_table:"rows"}),t.processTableInfo("rows"),t.mapProps({options:t.mapProps({enabled:t.convert.toAppBoolean}),rows:t.flow(t.toArray,t.mapArray(t.flow(t.moveProp({date_blocked:"date",blocked_path:"path"}),t.mapProps({date:t.convert.toAppDate}))))}))}});n.getBlockCracking=o;var s=i.default.get({id:"SENDING_SCRIPTS",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!0,block_cracking_paths:!1,which:"both"},domain:!0,pagination:!0,after:function(t){return t.flow(t.moveProp({sending_php_scripts:"rows"}),t.processTableInfo("rows"),t.mapProp("rows",t.flow(t.toArray,t.mapArray(t.flow(t.moveProp({script_name:"script",mail_line_number:"line",send_count:"send"}),t.mapProps({send:t.convert.toAppNumber,line:t.flow(t.convert.toAppString,t.convert.toAppNumber)}))))))}});n.getSendingScripts=s;var r=i.default.get({id:"EMAIL_USAGE",url:"/CMD_EMAIL_USAGE",params:{main_info:!0,sending_php_scripts:!1,block_cracking_paths:!1,which:"both"},schema:{direction:i.default.OPTIONAL_STRING},domain:!0,pagination:!0,after:function(t){return t.flow(t.project({rows:"deliveries",highest:"highest"}),t.processTableInfo("rows"),t.mapProp("rows",t.mapArrayProps({time:t.convert.toAppDate,size:t.convert.toAppNumber})))}});n.getUsage=r;var l=i.default.select({url:"/CMD_EMAIL_USAGE",params:{unblock:!0,action:"unblock"},domain:!0});n.unblockBlockcrackerPaths=l;var u=i.default.get({id:"SMTP_LOG",url:"/CMD_EMAIL_USAGE",params:{action:"smtp_log"},schema:{user:i.default.REQUIRED_STRING,method:i.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(t){return t.split("\n")}}});n.loadSmtpLog=u;var c=i.default.get({id:"EMAIL_USAGE_ID_INFO",url:"/CMD_EMAIL_USAGE",params:{action:"id_info"},schema:{id:i.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(t){return t.split("\n")}}});n.getIdInfo=c},2037:function(t,n,e){"use strict";e.r(n);var a=e(2038),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n.default=i.a},2038:function(t,n,e){"use strict";var a=e(10),i=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s,r,l=i(e(15)),u=i(e(17)),c=i(e(16)),d=a(e(1480)),m=e(7),p=e(11),_=e(1490),f=i(e(2821)),v=i(e(2822)),g=i(e(2823)),h=i(e(2824)),A={preload:(r=(0,c.default)(l.default.mark((function t(n){var e,a,i,o;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.email&&(e=n.email.split("@"),a=(0,u.default)(e,2),i=a[0],o=a[1],p.Store.commit("app/SET_DOMAIN",o),n.comparison1="equals",n.value1=i,delete n.email),t.next=3,d.getAccounts(n);case 3:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)}),api:[{command:d.getAccounts,bind:{"response.emails":"emails","response.options":"options"}}],commands:d,components:{PurgeFolderDialog:f.default,ModifyAccountDialog:v.default,ModifyAccountQuotaDialog:g.default,ShowSmtpLogDialog:h.default},props:{email:{type:String,required:!1,default:""}},data:function(){return{select:[],cleanForwarders:!0,modifyAccount:""}},computed:{hasActions:function(){var t=this;return function(n){return n.account!==t.$state.app.user.name||(t.$_cmd("CMD_PASSWD")||!t.$api.options.hide_outlook)}}},mounted:function(){this.$watch("$domain",this.$refs.table.reloadTable)},methods:{showLog:(s=(0,c.default)(l.default.mark((function t(n,e){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.loadSmtpLog)({user:n,method:e});case 2:this.$dialog("SHOW_SMTP_LOG_DIALOG").open();case 3:case"end":return t.stop()}}),t,this)}))),function(t,n){return s.apply(this,arguments)}),downloadOutlookSettings:function(t){window.location.href="/CMD_EMAIL_REG/".concat(this.$domain,"/").concat(t.login,"@").concat(this.$domain,"/").concat(t.account,"@").concat(this.$domain,"/outlook_").concat(t.login,".reg")},suspendAccounts:function(){d.suspendAccounts(this.$get("select")).then(this.$reloadApiTable)},unsuspendAccounts:function(){d.unsuspendAccounts(this.$get("select")).then(this.$reloadApiTable)},deleteAccounts:function(){d.deleteAccounts({select:this.select,clean_forwarders:this.cleanForwarders}).then(this.$reloadApiTable)},getLimit:function(t){return t!==1/0?t:"0"!==this.$api.options.GLOBAL_PER_EMAIL_LIMIT?this.$api.options.GLOBAL_PER_EMAIL_LIMIT:this.$gettext("Unlimited")},toggleDKIMStatus:function(){var t=this.$api.options.DKIM_ENABLED?"disable":"enable";d.changeDKIMStatus({action:t}).then(this.$reloadApiTable)},webmailSSO:(o=(0,c.default)(l.default.mark((function t(n){var e,a,i,o;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("roundcube"!==(e=this.$state.app.tokens.WEBMAIL_LINK)){t.next=8;break}return t.next=4,d.webmailSSO({email:"".concat(n,"@").concat(this.$domain)});case 4:"yes"===(a=t.sent).success&&(0,m.openInNewTab)("".concat(a.url,"?token=").concat(a.token)),t.next=11;break;case 8:i=this.$gettext("Cannot Execute Your Request"),o=this.$gettextInterpolate(this.$gettext("One-Click login requires does not support webmail_link=%{ webmail_link }. Try webmail_link=roundcube"),{webmail_link:e}),this.$notifications.error({title:i,content:o,extended:!0});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),webmailSystemSSO:function(){this.webmailSSO(this.$state.app.user.name)}}};n.default=A},2039:function(t,n,e){"use strict";e.r(n);var a=e(2040),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n.default=i.a},2040:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=a(e(15)),s=a(e(16)),r=e(1480),l={data:function(){return{folder:"spambox",period:"all"}},api:[{command:r.getAccounts,bind:{"response.options.purge_select.options":"folders","response.options.when_select.options":"periods"}}],props:{select:{type:Array,required:!0,default:function(){return[]}}},methods:{purgeFile:(i=(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.purgeAccounts)({file:this.folder,what:this.period,select:this.select});case 2:this.$emit("requestReload");case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}};n.default=l},2041:function(t,n,e){"use strict";e.r(n);var a=e(2042),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n.default=i.a},2042:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=a(e(15)),r=a(e(16)),l=e(1480),u=e(1442),c={api:[{command:l.getAccounts,bind:{"response.emails.rows":"accounts","response.options":"options"}},{command:u.validateEmail,bind:"emailValidation"}],commands:{validatePassword:u.validatePassword},data:function(){return{username:"",password:""}},props:{account:{type:String,required:!0}},computed:{user:function(){var t=this;return this.$api.accounts.find((function(n){return n.account===t.account}))},options:function(){return this.$api.options},limit:function(){if(!this.options.user_can_set_email_limit)return null;var t=(this.user.sent||{}).limit,n=void 0===t?1/0:t;return n!==1/0?n.toString():this.options.GLOBAL_PER_EMAIL_LIMIT.toString()},quota:function(){if(this.user.usage.quota===1/0)return"0";var t=Math.floor(this.user.usage.quota/1048576);return t.toString()}},methods:{initData:function(){this.username=this.$p6e.toU(this.user.login)},modifyAccount:(o=(0,r.default)(s.default.mark((function t(){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.$p6e.toA(this.username),this.username!==n&&this.$notifications.info({title:this.$gettext("Username punycoded"),content:this.$gettext("Username has been automatically converted to punycode format. Punycode is used to encode internationalized domain names (IDN) by converting Unicode characters to ASCII.")}),t.next=4,(0,l.modifyAccount)({user:this.user.login,newuser:n,passwd:this.password,passwd2:this.password,quota:this.quota,limit:this.limit});case 4:this.$reset(),this.$emit("reload");case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),validateUser:(i=(0,r.default)(s.default.mark((function t(n){var e,a;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&n!==this.user.login){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,(0,u.validateEmail)({value:"".concat(this.$p6e.toA(n),"@").concat(this.$domain)});case 4:return e=t.sent,a=e.valid,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}};n.default=c},2043:function(t,n,e){"use strict";e.r(n);var a=e(2044),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n.default=i.a},2044:function(t,n,e){"use strict";var a=e(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=a(e(15)),s=a(e(16)),r=e(1480),l={api:[{command:r.getAccounts,bind:{"response.options.user_can_set_email_limit":"setLimit","response.options.GLOBAL_PER_EMAIL_LIMIT":"globalSendLimit","response.options.DEFAULT_POP_QUOTA":"defaultQuota","response.options.MAX_PER_EMAIL_SEND_LIMIT":"maxPerEmailSendLimit","response.emails.rows":"accounts","response.options.user_email_quota_max":"emailQuotaMax"}}],data:function(){return{quota:"0",limit:"",limitUnlimited:!1,quotaUnlimited:!1}},props:{account:{type:String,required:!0}},computed:{user:function(){var t=this;return this.$api.accounts.find((function(n){return n.account===t.account}))},canSetUnlimited:function(){return"0"===this.maxLimit},maxLimit:function(){return"-1"===this.$api.maxPerEmailSendLimit?this.$api.globalSendLimit:this.$api.maxPerEmailSendLimit},showUnlimitedQuotaCheckbox:function(){return"0"===this.$api.emailQuotaMax||"-1"===this.$api.emailQuotaMax||void 0===this.$api.emailQuotaMax}},watch:{quotaUnlimited:"revalidate",limitUnlimited:"revalidate"},methods:{revalidate:function(){this.$store.dispatch("validation/REVALIDATE_GROUP","modifyAccountQuota")},initData:function(){this.$api.setLimit&&(this.limit=this.user.sent.limit===1/0?"0":this.user.sent.limit.toString()||this.$api.globalSendLimit,this.limitUnlimited="0"===this.limit,this.limitUnlimited&&!this.canSetUnlimited&&(this.limitUnlimited=!1,this.limit=this.$api.globalSendLimit)),this.quota=this.user.usage.quota===1/0?"0":String(this.user.usage.quota/1048576),this.quotaUnlimited="0"===this.quota},modifyAccount:(i=(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.modifyAccount)({user:this.user.login,newuser:this.user.login,passwd:"",passwd2:"",quota:this.quota||"0",limit:this.limit||this.maxLimit});case 2:this.$reset(),this.$emit("reload");case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),toggleLimit:function(){this.limitUnlimited=!this.limitUnlimited,this.limit=this.limitUnlimited?"0":""},toggleQuota:function(){var t="0"===this.$api.defaultQuota?"":this.$api.defaultQuota;this.quotaUnlimited=!this.quotaUnlimited,this.quota=this.quotaUnlimited?"0":t},validateQuota:function(t){return!t||Number(t)<=100*Math.pow(2,20)},validateQuotaRequired:function(t){return!!this.quotaUnlimited||!!t},validateUnlimited:function(t){return!(t&&!this.limitUnlimited)||Number(t)},validateLimit:function(t){return"0"===this.maxLimit||Number(t||0)<=Number(this.maxLimit)},validateLimitRequired:function(t){return!!this.limitUnlimited||!!t}}};n.default=l},2045:function(t,n,e){"use strict";e.r(n);var a=e(2046),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);n.default=i.a},2046:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={api:[{command:e(1490).loadSmtpLog,bind:"log"}],computed:{log:function(){return this.$api.log}}};n.default=a},2047:function(t,n,e){var a=e(2826);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(5).default)("550dbdbc",a,!0,{})},2821:function(t,n,e){"use strict";e.r(n);var a=e(3241),i=e(2039);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);var s=e(0),r=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);n.default=r.exports},2822:function(t,n,e){"use strict";e.r(n);var a=e(3242),i=e(2041);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);var s=e(0),r=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);n.default=r.exports},2823:function(t,n,e){"use strict";e.r(n);var a=e(3243),i=e(2043);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);var s=e(0),r=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);n.default=r.exports},2824:function(t,n,e){"use strict";e.r(n);var a=e(3244),i=e(2045);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);var s=e(0),r=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);n.default=r.exports},2825:function(t,n,e){"use strict";var a=e(2047);e.n(a).a},2826:function(t,n,e){(t.exports=e(4)(!0)).push([t.i,".emailStats{border-radius:4px;border:1px solid #e5e5e5;padding:0 1rem;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:auto}.emailStats .badge{font-weight:600;font-size:1.2rem;margin:1rem 0}.emailStats .badge .number{background:var(--neutral-a-80);min-width:70px;font-weight:500;display:inline-block;text-align:center;margin-right:1rem}.emailStats .badge:not(:last-child){margin-right:2rem}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/email/accounts/index.vue"],names:[],mappings:"AAsgBA,YAiBI,kBACA,yBACA,eACA,2BAAA,2BAAA,oBACA,yBAAA,sBAAA,mBACA,UAAW,CAtBf,mBAEQ,gBACA,iBACA,aAAc,CAJtB,2BAMY,+BACA,eACA,gBACA,qBACA,kBACA,iBAAkB,CAX9B,oCAcY,iBAAkB,CAAA",file:"index.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import 'framework';\n.emailStats {\n    .badge {\n        font-weight: 600;\n        font-size: 1.2rem;\n        margin: 1rem 0;\n        .number {\n            background: -theme-color('neutral', 'a-80');\n            min-width: 70px;\n            font-weight: 500;\n            display: inline-block;\n            text-align: center;\n            margin-right: 1rem;\n        }\n        &:not(:last-child) {\n            margin-right: 2rem;\n        }\n    }\n    border-radius: 4px;\n    border: 1px solid #e5e5e5;\n    padding: 0 1rem;\n    display: inline-flex;\n    align-items: center;\n    width: auto;\n}\n"],sourceRoot:""}])},2827:function(t,n){},3117:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-page",[e("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",link:"",theme:"primary",name:"user/email/accounts/create",usage:t.$api.emails.rowsCount,token:"USEREMAILMAX"},slot:"header:buttons"},[e("translate",[t._v("Create Account")]),t._v(" "),e("translate",{attrs:{slot:"limitText"},slot:"limitText"},[t._v("\n            E-mail accounts limit reached\n        ")])],1),t._v(" "),t.$api.options.DKIM?e("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:t.toggleDKIMStatus},slot:"header:buttons"},[t._v("\n        "+t._s(t.$api.options.DKIM_ENABLED?t.$gettext("Disable DKIM"):t.$gettext("Enable DKIM"))+"\n    ")]):t._e(),t._v(" "),t.$_Client.isPhone?e("app-page-section",[e("ui-stats-summary",{attrs:{badges:[{value:t.$api.emails.rowsCount,label:t.$gettext("E-mail accounts")},{value:t.$options.filters.humanReadableSize(t.$api.options.total_usage_bytes),label:t.$gettext("Total Usage")},{value:t.$api.options.EMAIL_SENDS,label:t.$gettext("Sends")}]}})],1):t._e(),t._v(" "),e("app-page-section",[e("ui-api-table",t._b({ref:"table",on:{"action:suspend":t.suspendAccounts,"action:unsuspend":t.unsuspendAccounts,"action:del":function(n){t.$dialog("DELETE_ITEMS_DIALOG").open()},"action:purge":function(n){t.$dialog("PURGE_DIALOG").open()}},scopedSlots:t._u([{key:"col:login",fn:function(n){var a=n.account,i=n.suspended,o=n.is_default;return e("span",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}],staticClass:"wrap:nowrap"},[o?e("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}]},[e("ui-tooltip",[e("span",{attrs:{slot:"trigger"},slot:"trigger"},[t._v("\n                            "+t._s(a)+"@"+t._s(t.$domainUnicode)+"\n                        ")]),t._v(" "),e("translate",{attrs:{"translate-params":{login:a}}},[t._v("\n                            Login: %{ login }\n                        ")])],1),t._v(" "),e("ui-badge",{directives:[{name:"margin",rawName:"v-margin",value:[,,,1],expression:"[,,,1]"}],attrs:{size:"small",theme:"safe"}},[e("translate",[t._v("Default")])],1),t._v(" "),t.$api.options.system_user_to_virtual_passwd&&t.$api.options.HAVE_ONE_CLICK_WEBMAIL_LOGIN?e("ui-link",{directives:[{name:"margin",rawName:"v-margin",value:[,,,1],expression:"[,,,1]"}],attrs:{title:t.$gettext("Sign In to Webmail")},on:{click:t.webmailSystemSSO}},[e("ui-icon",{attrs:{id:"webmail-sso",theme:"primary",size:"medium4"}})],1):t._e()],1):[e("span",[t._v("\n                        "+t._s(a)+"@"+t._s(t.$domainUnicode)+"\n                    ")]),t._v(" "),t.$api.options.HAVE_ONE_CLICK_WEBMAIL_LOGIN?e("ui-link",{directives:[{name:"margin",rawName:"v-margin",value:[,1,,1],expression:"[,1,,1]"}],attrs:{title:t.$gettext("Sign In to Webmail")},on:{click:function(n){return t.webmailSSO(a)}}},[e("ui-icon",{attrs:{id:"webmail-sso",theme:"primary",size:"medium4"}})],1):t._e()],t._v(" "),"no"!==i?e("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},["yes"===i?e("translate",[t._v("Suspended")]):t._e(),t._v(" "),"no:blockcracking:change_pass"===i?e("translate",[t._v("Blocked")]):t._e(),t._v(" "),"no:blockcracking:no_unblock"===i?e("translate",[t._v("Blocked Permanently")]):t._e()],1):t._e()],2)}},{key:"col:login2",fn:function(n){var a=n.login,i=n.last_login,o=n.last_password_change;return[t._v("\n                "+t._s(a)),a!==t.$state.app.user.name?[t._v("\n                    @"+t._s(t.$domainUnicode)+"\n                ")]:t._e(),t._v(" "),i||o?e("ui-tooltip",{attrs:{theme:"primary"}},[i?e("div",{directives:[{name:"translate",rawName:"v-translate",value:{ip:i.ip,date:t.$options.filters.date(i.when)},expression:"{\n                            ip: last_login.ip,\n                            date: $options.filters.date(last_login.when),\n                        }"}]},[e("strong",[t._v("Last Login: ")]),t._v(" on %{ date } from %{ ip }\n                    ")]):t._e(),t._v(" "),o?e("div",{directives:[{name:"translate",rawName:"v-translate",value:{ip:o.ip,date:t.$options.filters.date(o.when)},expression:"{\n                            ip: last_password_change.ip,\n                            date: $options.filters.date(last_password_change.when),\n                        }"}]},[e("strong",[t._v("Last Password Change: ")]),t._v(" on %{ date } from %{ ip }\n                    ")]):t._e()]):t._e()]}},{key:"col:usage",fn:function(n){var a=n.item,i=n.usage;return e("ui-grid",{attrs:{main:"between"}},[e("span",[t.$api.options.pop_disk_usage_true_bytes?[t._v("\n                        "+t._s(t._f("humanReadableSize")(i.apparent_usage))+"\n                    ")]:[t._v("\n                        "+t._s(t._f("humanReadableSize")(i.usage))+"\n                    ")],t._v(" "),i.quota!==1/0&&a.login!==t.$state.app.user.name?[t._v("\n                        / "+t._s(t._f("humanReadableSize")(i.quota))+"\n                    ")]:t._e()],2),t._v(" "),i.apparent_usage||i.imap_bytes||i.webmail_bytes?e("ui-tooltip",{attrs:{theme:"primary"}},[i.apparent_usage?e("div",[e("translate",{attrs:{tag:"strong"}},[t._v("\n                            Apparent Usage:\n                        ")]),t._v("\n                        "+t._s(t._f("humanReadableSize")(i.apparent_usage))+"\n                    ")],1):t._e(),t._v(" "),i.imap_bytes?e("div",[e("translate",{attrs:{tag:"strong"}},[t._v("\n                            IMAP:\n                        ")]),t._v("\n                        "+t._s(t._f("humanReadableSize")(i.imap_bytes))+"\n                    ")],1):t._e(),t._v(" "),i.webmail_bytes?e("div",[e("translate",{attrs:{tag:"strong"}},[t._v("\n                            Webmail:\n                        ")]),t._v("\n                        "+t._s(t._f("humanReadableSize")(i.webmail_bytes))+"\n                    ")],1):t._e()]):t._e()],1)}},{key:"col:sent",fn:function(n){var a=n.sent;return[a?[t._v("\n                    "+t._s(a.usage)+" /\n                    "+t._s(t.getLimit(a.limit))+"\n                ")]:e("span")]}},{key:"col:smtplog",fn:function(n){var a=n.login;return[e("ui-link",{on:{click:function(n){return t.showLog(a,"incoming")}}},[e("translate",[t._v("In")])],1),t._v("\n                â‡„\n                "),e("ui-link",{on:{click:function(n){return t.showLog(a,"outgoing")}}},[e("translate",[t._v("Out")])],1)]}},{key:"row:actions",fn:function(n){var a=n.item;return[t.hasActions(a)?e("ui-actions",{attrs:{position:"left"}},[a.account===t.$state.app.user.name?[t.$_cmd("CMD_PASSWD")?e("ui-link",{attrs:{name:"user/password"}},[e("translate",[t._v("Change Password")])],1):t._e()]:[e("ui-link",{on:{click:function(n){t.modifyAccount=a.account,t.$dialog("MODIFY_ACCOUNT_DIALOG").open()}}},[e("translate",[t._v("Change Password/Username")])],1),t._v(" "),e("ui-link",{on:{click:function(n){t.modifyAccount=a.account,t.$dialog("MODIFY_ACCOUNT_QUOTA_DIALOG").open()}}},[e("translate",[t._v("Change Limits")])],1)],t._v(" "),t.$api.options.hide_outlook?t._e():e("ui-link",{on:{click:function(n){return t.downloadOutlookSettings(a)}}},[e("translate",[t._v("Download Outlook Configuration")])],1)],2):t._e()]}}]),model:{value:t.select,callback:function(n){t.select=n},expression:"select"}},"ui-api-table",{command:t.$commands.getAccounts,property:"emails",rowID:"login",columns:{login:{label:t.$gettext("Account"),grow:!0},usage:t.$gettext("Usage"),sent:{label:t.$gettext("Sent"),hide:!t.$api.options.user_can_set_email_limit},smtplog:t.$gettext("SMTP Log")},actions:{suspend:{label:t.$gettext("Suspend"),disabled:t.select.includes(t.$state.app.user.name)},unsuspend:{label:t.$gettext("Unsuspend"),disabled:t.select.includes(t.$state.app.user.name)},del:{label:t.$gettext("Delete"),disabled:t.select.includes(t.$state.app.user.name)},purge:t.$gettext("Purge")},verticalLayout:t.$_Client.isPhone},!1),[t.$_Client.isPhone?t._e():e("ui-stats-summary",{attrs:{slot:"buttons:before",badges:[{value:t.$api.emails.rowsCount,label:t.$gettext("E-mail accounts")},{value:t.$options.filters.humanReadableSize(t.$api.options.total_usage_bytes),label:t.$gettext("Total Usage")},{value:t.$api.options.EMAIL_SENDS,label:t.$gettext("Sends")}]},slot:"buttons:before"})],1)],1),t._v(" "),t.$api.options.email_message?e("div",{attrs:{slot:"footer:text"},domProps:{innerHTML:t._s(t.$api.options.email_message)},slot:"footer:text"}):t._e(),t._v(" "),e("template",{slot:"bottom:links"},[t.email?e("ui-link",{attrs:{name:"user/email/accounts",bullet:""}},[e("translate",[t._v("Show all accounts")])],1):t._e(),t._v(" "),e("ui-link",{attrs:{name:"user/email/usage",bullet:""}},[e("translate",[t._v("E-mail Usage")])],1)],1),t._v(" "),e("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("account","accounts",t.select.length)},on:{"click:confirm":t.deleteAccounts}},[e("ui-form-element",{attrs:{underline:!1,"feature-i-d":"1398",vertical:""}},[e("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:t.cleanForwarders,callback:function(n){t.cleanForwarders=n},expression:"cleanForwarders"}},[e("translate",[t._v("Clean Forwarders")])],1)],1)],1),t._v(" "),e("purge-folder-dialog",t._b({on:{requestReload:t.$reloadApiTable}},"purge-folder-dialog",{select:t.select},!1)),t._v(" "),e("modify-account-dialog",{attrs:{account:t.modifyAccount},on:{reload:t.$reloadApiTable}}),t._v(" "),e("modify-account-quota-dialog",{attrs:{account:t.modifyAccount},on:{reload:t.$reloadApiTable}}),t._v(" "),e("show-smtp-log-dialog")],2)},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))},3241:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ui-dialog",{attrs:{id:"PURGE_DIALOG",theme:"primary"}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Purge Folder")]),t._v(" "),e("template",{slot:"content"},[e("ui-form-element",{attrs:{validators:{required:!0}}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Folder:\n            ")]),t._v(" "),e("template",{slot:"content"},[e("input-select",{attrs:{options:t.$api.folders},model:{value:t.folder,callback:function(n){t.folder=n},expression:"folder"}})],1)],2),t._v(" "),e("ui-form-element",{attrs:{validators:{required:!0},underline:!1}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Period:\n            ")]),t._v(" "),e("template",{slot:"content"},[e("input-select",{attrs:{options:t.$api.periods},model:{value:t.period,callback:function(n){t.period=n},expression:"period"}})],1)],2)],1),t._v(" "),e("ui-button",{attrs:{slot:"buttons",validateGroup:"default",theme:"primary"},on:{click:t.purgeFile},slot:"buttons"},[e("translate",[t._v("Purge")])],1)],2)},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))},3242:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ui-dialog",{attrs:{id:"MODIFY_ACCOUNT_DIALOG",size:"normal"},on:{"dialog:open":t.initData}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Change Password/Username\n    ")]),t._v(" "),e("template",{slot:"content"},[e("ui-form-element",{attrs:{group:"modifyAccount",vertical:"",validators:{required:!0,validateUser:t.validateUser}}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Username")]),t._v(" "),e("input-text",{attrs:{slot:"content",suffix:"@"+t.$domainUnicode},slot:"content",model:{value:t.username,callback:function(n){t.username=n},expression:"username"}}),t._v(" "),e("span",{attrs:{slot:"error:validateUser"},domProps:{innerHTML:t._s(t.$api.emailValidation.message)},slot:"error:validateUser"})],1),t._v(" "),e("ui-form-element",{attrs:{group:"modifyAccount",validators:{required:!0,api:t.$commands.validatePassword},vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Password")]),t._v(" "),e("input-password",{attrs:{slot:"content",showGenerator:""},slot:"content",model:{value:t.password,callback:function(n){t.password=n},expression:"password"}})],1)],1),t._v(" "),e("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"modifyAccount"},on:{click:t.modifyAccount},slot:"buttons"},[e("translate",[t._v("Save")])],1)],2)},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))},3243:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ui-dialog",{attrs:{id:"MODIFY_ACCOUNT_QUOTA_DIALOG",size:"normal"},on:{"dialog:open":t.initData}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Change Limit/Quota\n    ")]),t._v(" "),e("template",{slot:"content"},[e("ui-form-element",{attrs:{group:"modifyAccountQuota",validators:{validateQuotaRequired:t.validateQuotaRequired,validateQuota:t.validateQuota,notEqual:"0"},vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                E-mail Quota (MB)\n            ")]),t._v(" "),e("input-text",{attrs:{slot:"content",value:t.quotaUnlimited?"":t.quota,number:"",disabled:t.quotaUnlimited},on:{input:function(n){t.quota=n}},slot:"content"},[t.showUnlimitedQuotaCheckbox?e("ui-button",{attrs:{slot:"additions:right"},on:{click:t.toggleQuota},slot:"additions:right"},[e("input-checkbox",{attrs:{model:t.quotaUnlimited}},[e("translate",[t._v("Unlimited")])],1)],1):t._e()],1),t._v(" "),e("translate",{attrs:{slot:"error:validateQuotaRequired"},slot:"error:validateQuotaRequired"},[t._v("\n                Required field\n            ")]),t._v(" "),e("translate",{attrs:{slot:"error:validateQuota"},slot:"error:validateQuota"},[t._v("\n                Quota can't be larger than 100TB\n            ")]),t._v(" "),e("translate",{attrs:{slot:"error:notEqual"},slot:"error:notEqual"},[t._v("\n                Should be larger than zero\n            ")])],1),t._v(" "),t.$api.setLimit?e("ui-form-element",{attrs:{group:"modifyAccountQuota",validators:{validateLimitRequired:t.validateLimitRequired,validateLimit:t.validateLimit,validateUnlimited:t.validateUnlimited},vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Send Limit\n            ")]),t._v(" "),"0"!==t.maxLimit?e("translate",{attrs:{slot:"tooltip","translate-params":{limit:t.maxLimit}},slot:"tooltip"},[t._v("\n                Blank will default to %{ limit }\n            ")]):e("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Blank will default to unlimited\n            ")]),t._v(" "),e("input-text",{attrs:{slot:"content",number:"",value:t.limitUnlimited?"":t.limit,placeholder:"0"===t.maxLimit?"":t.maxLimit,disabled:t.limitUnlimited},on:{input:function(n){t.limit=n}},slot:"content"},[e("ui-button",{attrs:{slot:"additions:right",disabled:!t.canSetUnlimited},on:{click:t.toggleLimit},slot:"additions:right"},[e("input-checkbox",{attrs:{model:t.limitUnlimited}},[e("translate",[t._v("Unlimited")])],1)],1)],1),t._v(" "),e("translate",{attrs:{slot:"error:validateLimitRequired"},slot:"error:validateLimitRequired"},[t._v("\n                Required field\n            ")]),t._v(" "),e("translate",{attrs:{slot:"error:validateLimit","translate-params":{limit:t.maxLimit}},slot:"error:validateLimit"},[t._v("\n                Limit can't be larger than %{ limit }\n            ")]),t._v(" "),e("translate",{attrs:{slot:"error:validateUnlimited"},slot:"error:validateUnlimited"},[t._v("\n                Limit should be larger than 0\n            ")])],1):t._e()],1),t._v(" "),e("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"modifyAccountQuota"},on:{click:t.modifyAccount},slot:"buttons"},[e("translate",[t._v("Save")])],1)],2)},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))},3244:function(t,n,e){"use strict";var a=function(){var t=this.$createElement,n=this._self._c||t;return n("ui-dialog",{attrs:{id:"SHOW_SMTP_LOG_DIALOG",size:"normal",expandable:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[this._v("\n        SMTP Log\n    ")]),this._v(" "),n("ui-pre",{style:{minHeight:"10rem"},attrs:{slot:"content","content-lines":this.log},slot:"content"})],1)},i=[];e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}))}}]);