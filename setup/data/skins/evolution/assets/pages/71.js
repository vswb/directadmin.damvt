(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1432:function(n,e,t){"use strict";t.r(e);var o=t(3168),a=t(2290);for(var i in a)"default"!==i&&function(n){t.d(e,n,(function(){return a[n]}))}(i);t(2999);var r=t(0),s=t(3001),l=t.n(s),d=Object(r.a)(a.default,o.a,o.b,!1,null,"27ca13dd",null);"function"==typeof l.a&&l()(d),e.default=d.exports},1482:function(n,e,t){"use strict";var o=t(10),a=t(1);Object.defineProperty(e,"__esModule",{value:!0}),e.getPhpDocrootOptions=e.phpOverride=e.docrootOverride=e.getSubdomainLog=e.deleteSubdomains=e.createSubdomain=e.getSubdomains=void 0;var i=a(t(2)),r=a(t(30));o(t(6));function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}var l=r.default.get({id:"GET_SUBDOMAINS",url:"/CMD_SUBDOMAIN",schema:function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){(0,i.default)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({domain:r.default.DOMAIN},r.default.PAGINATION),after:function(n){return n.flow(n.moveProp("subdomains","rows"),n.moveProp("allow_subdomain_docroot_override","docroot"),n.processTableInfo("rows"),n.mapProps({awstats:n.isEqual("1"),webalizer:n.isEqual("1"),docroot:n.isEqual("1"),has_php_selector:n.isEqual("yes"),rows:n.flow(n.toArray,n.mapArray(n.moveProp("subdomain_docroot_override","docroot")),n.mapArrayProps({bandwidth:n.convert.toAppNumber,stats:n.mapProps({webalizer_only:n.convert.toAppBoolean}),docroot:function(e){if(e&&Object.keys(e).length){if(void 0!==e.php1_select){var t=n.toSelect(e.php1_select),o=t.options,a=t.value;return{public_html:e.public_html,private_html:e.private_html,php_labels:o,php1_select:a}}return e}return!1}}))}))}});e.getSubdomains=l;var d=r.default.post({url:"/CMD_SUBDOMAIN",params:{action:"create"},schema:{domain:r.default.DOMAIN,subdomain:r.default.REQUIRED_STRING}});e.createSubdomain=d;var u=r.default.select({url:"/CMD_SUBDOMAIN",params:{action:"delete"},domain:!0,body:{contents:r.default.REQUIRED_BOOL}});e.deleteSubdomains=u;var c=r.default.get({id:"GET_SUBDOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accept:"text/plain",schema:{domain:r.default.DOMAIN,type:r.default.REQUIRED_STRING,subdomain:r.default.REQUIRED_STRING,lines:r.default.OPTIONAL_STRING},after:function(n){return n.flow(n.convert.toLines,(function(n){return n.slice(0,-1)}))}});e.getSubdomainLog=c;var p=r.default.post({url:"/CMD_SUBDOMAIN",params:{action:"document_root_override"},domain:!0,schema:{subdomain:r.default.REQUIRED_STRING,private_html:r.default.OPTIONAL_STRING,public_html:r.default.OPTIONAL_STRING}});e.docrootOverride=p;var m=r.default.post({url:"/CMD_SUBDOMAIN",domain:!0,params:{action:"php_selector"},schema:{subdomain:r.default.REQUIRED_STRING,php1_select:r.default.REQUIRED_STRING}});e.phpOverride=m;var f=r.default.get({url:"/CMD_SUBDOMAIN",id:"SUBDOMAIN_DATA",domain:!0,params:{action:"show_docroot_override"},schema:{subdomain:r.default.REQUIRED_STRING},after:function(n){return n.flow(n.project({has_php_selector:"has_php_selector",http:"public_html",https:"private_html",php:"php1_select"}),n.mapProps({php:n.toSelect,has_php_selector:n.isEqual("yes")}))}});e.getPhpDocrootOptions=f},2290:function(n,e,t){"use strict";t.r(e);var o=t(2291),a=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e.default=a.a},2291:function(n,e,t){"use strict";var o=t(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(t(2998)),i=t(1482),r={components:{InputTextEditor:o(t(1485)).default},preload:function(n){var e=n.subdomain,t=n.type,o=e.split("."),r=(0,a.default)(o),s=r[0],l=r.slice(1);return(0,i.getSubdomainLog)({subdomain:s,domain:l.join("."),type:"usage"===t?"log":"error",lines:"100"})},api:[{command:i.getSubdomainLog,bind:"log"}],props:{subdomain:{type:String,required:!0},type:{type:String,required:!0}},data:function(){return{lines:100,show:"lines"}},computed:{domain:function(){return this.subdomain.split(".").slice(1).join(".")},subName:function(){return this.subdomain.split(".").shift()},rawLink:function(){var n="usage"===this.type?"log":"error",e="/CMD_SHOW_LOG?domain=".concat(this.domain,"&type=").concat(n,"&subdomain=").concat(this.subName);return"lines"===this.show?"".concat(e,"&lines=").concat(this.lines):e},log:function(){return this.$api.log.join("\n")}},methods:{loadLog:function(){var n="usage"===this.type?"log":"error";(0,i.getSubdomainLog)({domain:this.domain,subdomain:this.subName,type:n,lines:"lines"===this.show?String(this.lines):null})}}};e.default=r},2292:function(n,e,t){var o=t(3e3);"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);(0,t(5).default)("26c71cbd",o,!0,{})},2998:function(n,e,t){var o=t(660),a=t(662),i=t(661);n.exports=function(n){return o(n)||a(n)||i()}},2999:function(n,e,t){"use strict";var o=t(2292);t.n(o).a},3e3:function(n,e,t){(n.exports=t(4)(!0)).push([n.i,"#domain-log h2.domain[data-v-27ca13dd]{color:#333;font-size:14px;background:#f7f7f7;text-align:left;padding:1rem;border-top-left-radius:4px;border-top-right-radius:4px;border:1px solid #ddd;border-bottom-width:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}#domain-log .log[data-v-27ca13dd],#domain-log h2.domain[data-v-27ca13dd]{margin:0;font-family:Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,monospace,serif}#domain-log .log[data-v-27ca13dd]{list-style-type:decimal;list-style-position:outside;padding:2rem 0;background:#fff;padding:0 0 0 55px;border:1px solid #ddd;border-bottom-left-radius:4px;border-bottom-right-radius:4px;overflow-x:auto;color:#acacac}#domain-log .log .line[data-v-27ca13dd]{background:#fff;margin-left:-6px;white-space:nowrap;width:100%}#domain-log .log .line-content[data-v-27ca13dd]{color:#333;margin:0 0 0 -13px;border-left:1px solid #ddd;vertical-align:top;padding:0;position:relative;white-space:nowrap;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:100%;min-height:20px}","",{version:3,sources:["/home/evo/evolution/src/js/pages/user/stats/subdomain-log.vue"],names:[],mappings:"AAiLA,uCAEQ,WACA,AAIA,eACA,mBACA,gBACA,aACA,2BACA,4BACA,sBACA,sBACA,oBAAA,oBAAA,aACA,yBAAA,sBAAA,8BACA,yBAAA,sBAAA,kBAAmB,CAjB3B,yEAGQ,SACA,0HAGA,CAPR,kCAoBQ,wBACA,4BACA,eACA,gBACA,AACA,mBACA,sBACA,8BACA,+BACA,gBACA,aACA,CA/BR,wCAmCY,gBACA,iBACA,mBACA,UAAW,CAtCvB,gDAwCgB,WACA,mBACA,2BACA,mBACA,UACA,kBACA,mBACA,2BAAA,2BAAA,oBACA,YACA,eAAgB,CAAA",file:"subdomain-log.vue?vue&type=style&index=0&id=27ca13dd&lang=scss&scoped=true&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#domain-log {\n    h2.domain {\n        color: #333;\n        margin: 0;\n        font-family: Consolas, Menlo, Monaco, 'Lucida Console',\n            'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono',\n            monospace, serif;\n        font-size: 14px;\n        background: #f7f7f7;\n        text-align: left;\n        padding: 1rem;\n        border-top-left-radius: 4px;\n        border-top-right-radius: 4px;\n        border: 1px solid #ddd;\n        border-bottom-width: 0;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n    .log {\n        list-style-type: decimal;\n        list-style-position: outside;\n        padding: 2rem 0;\n        background: #fff;\n        margin: 0;\n        padding: 0px 0px 0px 55px;\n        border: 1px solid #ddd;\n        border-bottom-left-radius: 4px;\n        border-bottom-right-radius: 4px;\n        overflow-x: auto;\n        color: #acacac;\n        font-family: Consolas, Menlo, Monaco, 'Lucida Console',\n            'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono',\n            monospace, serif;\n        .line {\n            background: white;\n            margin-left: -6px;\n            white-space: nowrap;\n            width: 100%;\n            &-content {\n                color: #333;\n                margin: 0 0 0 -13px;\n                border-left: 1px solid #ddd;\n                vertical-align: top;\n                padding: 0px;\n                position: relative;\n                white-space: nowrap;\n                display: inline-flex;\n                height: 100%;\n                min-height: 20px;\n            }\n        }\n    }\n}\n"],sourceRoot:""}])},3001:function(n,e){},3168:function(n,e,t){"use strict";var o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("app-page",{attrs:{id:"domain-log"}},[t("template",{slot:"page:title"},["usage"===n.type?t("translate",{attrs:{"translate-params":{domain:n.domain}}},[n._v("\n            View Usage Log for %{ domain }\n        ")]):t("translate",{attrs:{"translate-params":{domain:n.domain}}},[n._v("\n            View Error Log for %{ domain }\n        ")])],1),n._v(" "),t("app-page-section",[t("div",{directives:[{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],staticClass:"filters"},[t("ui-form-element",{attrs:{underline:"lines"===n.show}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                    Show\n                ")]),n._v(" "),t("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[0,2],expression:"[0, 2]"}],attrs:{slot:"content"},slot:"content"},[t("input-check",{attrs:{type:"radio",value:"full"},on:{change:n.loadLog},model:{value:n.show,callback:function(e){n.show=e},expression:"show"}},[t("translate",[n._v("Full Log")])],1),n._v(" "),t("input-check",{attrs:{type:"radio",value:"lines"},on:{change:n.loadLog},model:{value:n.show,callback:function(e){n.show=e},expression:"show"}},[t("translate",[n._v("Tail")])],1)],1)],1),n._v(" "),t("transition",{attrs:{name:"fade"}},["lines"===n.show?t("ui-form-element",{attrs:{underline:!1}},[t("translate",{attrs:{slot:"title"},slot:"title"},[n._v("\n                        Number of lines to show\n                    ")]),n._v(" "),t("div",{attrs:{slot:"content"},slot:"content"},[t("input-text",{attrs:{number:""},on:{keyup:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.loadLog(e)}},model:{value:n.lines,callback:function(e){n.lines=e},expression:"lines"}}),n._v(" "),t("ui-button",{attrs:{theme:"safe",size:"normal",disabled:!Number(n.lines)},on:{click:n.loadLog}},[t("translate",[n._v("Reload Log")])],1)],1)],1):n._e()],1)],1),n._v(" "),t("input-text-editor",{attrs:{value:n.log,"read-only":"","disable-modes":""}},[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:"{\n                    cross: 'center',\n                    main: 'between',\n                }"}],attrs:{slot:"header"},slot:"header"},[n._v("\n                "+n._s(n.domain)+"\n                "),t("ui-button-link",{attrs:{size:"small",theme:"light",href:n.rawLink,target:"_blank"}},[t("translate",[n._v("raw")])],1)],1)])],1)],2)},a=[];t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return a}))}}]);