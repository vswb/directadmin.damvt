(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1291:function(e,t,n){"use strict";n.r(t);var r=n(3030),a=n(1585);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n(2479);var o=n(0),i=n(2481),l=n.n(i),p=Object(o.a)(a.default,r.a,r.b,!1,null,"f31fcdca",null);"function"==typeof l.a&&l()(p),t.default=p.exports},1452:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.updateCron=t.getCron=t.restoreBackup=t.getRestoreFiles=t.scheduleBackup=t.getRestoreOptions=t.getScheduleOptions=t.getSettings=t.updateSettings=t.deleteCrons=t.duplicateCrons=t.getEncryptionStatus=t.getCrons=void 0;var a=r(n(2)),s=r(n(30));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l="/CMD_USER_BACKUP",p=s.default.get({id:"USER_BACKUPS",url:l,after:function(e){return e.flow((function(e){return{rows:e.crons,location:e.files_location}}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({where:e.flow(e.moveProp("encryption_password","encrypted"),e.mapProps({encrypted:e.flow(e.setDefault("0"),e.isEqual("1")),path:function(e){return e.replace("<span class='green_lock'>&#128274;</span>","").trim()}}))}))}))}});t.getCrons=p;var u=s.default.get({id:"BACKUP_ENCRYPTION_STATUS",url:l,after:function(e){return e.flow(e.project({enabled:"settings.allow_backup_encryption",password:"settings.encryption_password"}),e.mapProp("enabled",e.convert.toAppBoolean))}});t.getEncryptionStatus=u;var c=s.default.select({url:l,params:{duplicate:!0}});t.duplicateCrons=c;var f=s.default.select({url:l,params:{delete:!0}});t.deleteCrons=f;var d=s.default.post({url:l,params:{action:"setting"},schema:{message:s.default.REQUIRED_BOOL,local_ns:s.default.REQUIRED_BOOL,restore_spf:s.default.REQUIRED_BOOL}});t.updateSettings=d;var _=s.default.get({id:"USER_BACKUP_SETTINGS",url:l,after:function(e){return e.flow(e.project({local_ns:"settings.local_ns",message:"settings.message",restore_spf:"settings.restore_spf"}),e.mapValues(e.convert.toAppBoolean))}});t.getSettings=_;var h=s.default.get({id:"USER_BACKUP_SCHEDULE_OPTIONS",url:l,after:function(e){return e.flow(e.project({settings:"settings","settings.append":"append_to_path",where:"where",users:"users",location:"files_location"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),settings:e.flow(e.project({ip:"ftp_ip",password:"ftp_password",path:"ftp_path",port:"ftp_port",secure:"ftp_secure",username:"ftp_username",append:"append"}),e.mapProps({secure:e.convert.toAppBoolean,append:function(e){var t=Object.values(e),n=t.find((function(e){return e.selected})),r=t.reduce((function(e,t){return i({},e,(0,a.default)({},t.value,t.text))}),{});return{value:n.value,options:r}}}))}))}});t.getScheduleOptions=h;var m=s.default.get({id:"USER_BACKUP_RESTORE_OPTIONS",url:l,after:function(e){return e.flow(e.project({settings:"settings",where:"where",location:"files_location",ips:"ip_list",files:"files"}),e.mapProps({files:e.flow(e.deleteProp("info"),e.toArray),settings:e.flow(e.getProps(["ftp_ip","ftp_password","ftp_path","ftp_port","ftp_secure","ftp_username"]),e.mapProps({ftp_secure:e.convert.toAppBoolean})),ips:function(e){var t=Object.values(e),n=t.find((function(e){return e.selected})),r=t.reduce((function(e,t){return i({},e,(0,a.default)({},t.value,t.text))}),{});return{value:n.value,options:r}}}))}});t.getRestoreOptions=m;var w=s.default.post({url:l,params:{action:"create",form_version:"3"},schema:{who:s.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:s.default.OPTIONAL_BOOL,when:s.default.REQUIRED_STRING,minute:s.default.OPTIONAL_STRING,hour:s.default.OPTIONAL_STRING,dayofmonth:s.default.OPTIONAL_STRING,month:s.default.OPTIONAL_STRING,dayofweek:s.default.OPTIONAL_STRING,where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,append_to_path:s.default.OPTIONAL_STRING,custom_append:s.default.OPTIONAL_STRING,encryption_password:s.default.OPTIONAL_STRING}});t.scheduleBackup=w;var O=s.default.get({url:l,id:"USER_BACKUP_RESTORE_FILES",params:{action:"update_files"},schema:{where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING},after:function(e){return e.flow(e.getProp("files"),e.deleteProp("info"),e.toArray)}});t.getRestoreFiles=O;var v=s.default.post({url:l,params:{action:"restore"},schema:{where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,ip_choice:s.default.REQUIRED_STRING,ip:s.default.OPTIONAL_STRING,select:{type:Array,required:!0},encryption_password:s.default.OPTIONAL_STRING}});t.restoreBackup=v;var I=s.default.post({url:"/CMD_USER_BACKUP_MODIFY",id:"USER_BACKUP_CRON",schema:{id:s.default.REQUIRED_STRING},notifySuccess:!1,notifyError:!0,after:function(e){return e.flow(e.moveProp({append_to_path:"append","settings.where":"where"}),e.mapProps({settings:e.mapProp("ftp_secure",e.convert.toAppBoolean),who:e.mapProps({skip_suspended:e.convert.toAppBoolean,users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),select:e.feedWith(1,e.flow(e.getProp("users"),e.deleteProp("info"),e.filter(e.flow(e.getProp("checkbox"),e.isEqual("checked"))),e.mapValues(e.getProp("user")),e.toArray))}),append:e.flow(e.mapProps({options:e.feedWith(1,e.transformObject((function(e){var t=e.value,n=e.text;return(0,a.default)({},t,n)}))),value:e.feedWith(1,e.flow(e.find(e.getProp("selected")),e.getProp("value")))}),e.getProps(["value","options"])),custom_append:e.feedWith(1,e.getProp("append.custom_append"))}))}});t.getCron=I;var R=s.default.post({url:l,params:{action:"modify",when:"cron",form_version:"3"},schema:{id:s.default.REQUIRED_STRING,who:s.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:s.default.OPTIONAL_BOOL,minute:s.default.REQUIRED_STRING,hour:s.default.REQUIRED_STRING,dayofmonth:s.default.REQUIRED_STRING,month:s.default.REQUIRED_STRING,dayofweek:s.default.REQUIRED_STRING,where:s.default.REQUIRED_STRING,ftp_ip:s.default.OPTIONAL_STRING,ftp_username:s.default.OPTIONAL_STRING,ftp_password:s.default.OPTIONAL_STRING,ftp_path:s.default.OPTIONAL_STRING,ftp_port:s.default.OPTIONAL_STRING,ftp_secure:s.default.OPTIONAL_STRING,append_to_path:s.default.REQUIRED_STRING,custom_append:s.default.OPTIONAL_STRING}});t.updateCron=R},1464:function(e,t,n){"use strict";var r=n(10),a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.modifyBackup=t.runCrons=t.deleteCrons=t.duplicateCrons=t.restoreBackup=t.scheduleBackup=t.updateSettings=t.killBackup=t.getCronDetails=t.getRestoreFiles=t.getRestoreOptions=t.getScheduleOptions=t.getBackupSettings=t.getCurrentBackup=t.getCurrentBackups=t.getCrons=t.getEncryptionStatus=void 0;var s=a(n(2)),o=a(n(30)),i=n(1452),l=a(n(1495)),p=r(n(1496));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e,t){return o.default.get(c({url:"/CMD_ADMIN_BACKUP",id:e},t))},d=i.getEncryptionStatus.extend({url:"/CMD_ADMIN_BACKUP"});t.getEncryptionStatus=d;var _=f("ADMIN_CRONS",{after:function(e){return e.flow(e.getProp("crons"),e.toTable(e.mapArrayProps({where:e.flow(e.moveProp("encryption_password","encrypted"),e.mapProps({encrypted:e.flow(e.setDefault("0"),e.isEqual("1")),path:function(e){return e.replace("<span class='green_lock'>&#128274;</span>","").trim()}}))})))}});t.getCrons=_;var h=f("ADMIN_CURRENT_BACKUPS",{after:function(e){return e.flow(e.getProp("current_backups"),e.toTable(e.mapArray(e.flow(e.deleteProp("details"),e.mapProps({progress:function(e){return Number(e.slice(0,-1))}})))))},silent:!0});t.getCurrentBackups=h;var m=f("ADMIN_CURRENT_BACKUP",{params:{action:"monitor"},schema:{pid:o.default.REQUIRED_STRING},after:function(e){return e.flow(e.getProp("backup_info.0"),e.mapProp("start",e.convert.toAppDate))}});t.getCurrentBackup=m;var w=f("ADMIN_BACKUP_SETTINGS",{mapResponse:p.getBackupSettings});t.getBackupSettings=w;var O=f("ADMIN_SCHEDULE_OPTIONS",{after:function(e){return e.flow(e.project({who:"who.who","whoData.users":"data_list","whoData.skip_suspended":"who.skip_suspended",where:"where","whereData.append_to_path":"settings.append_to_path","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path",appendOptions:"append_to_path",usertypes:"who.users"}),e.mapProps({whoData:e.mapProps({skip_suspended:e.convert.toAppBoolean}),whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean}),appendOptions:e.transformObject((function(e){var t=e.value,n=e.text;return(0,s.default)({},t,n)})),usertypes:e.flow(e.deleteProp("info"),e.transformObject((function(e){var t=e.user,n=e.type;return(0,s.default)({},t,n.toLowerCase()||"user")})))}))}});t.getScheduleOptions=O;var v=f("ADMIN_RESTORE_OPTIONS",{after:function(e){return e.flow(e.project({where:"where","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path",ips:"ip_list","filesData.list":"files","filesData.location":"files_location","filesData.home_override":"create_user_home_override"}),e.mapProps({whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean}),ips:e.toSelect,filesData:e.mapProps({list:e.flow(e.deleteProp("info"),e.toArray,e.mapArray((function(e){var t=e.file,n=e.info,r={file:t};return n.issues&&n.issues.length&&(r.issues=n.issues),"yes"===n.hide_checkbox&&(r.disabled=!0),r}))),home_override:function(t){return!!t&&e.toSelect(t)}})}))}});t.getRestoreOptions=v;var I=o.default.post({id:"ADMIN_RESTORE_FILES",url:"/CMD_ADMIN_BACKUP",params:{action:"update_files",json:!0},schema:{where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_BOOL,local_path:o.default.OPTIONAL_STRING},mapResponse:{location:l.default.location,list:l.default.filesList},notifySuccess:!1});t.getRestoreFiles=I;var R=o.default.get({id:"ADMIN_CRON_DETAILS",url:"/CMD_ADMIN_BACKUP_MODIFY",schema:{id:o.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({who:"who.who","whoData.users":"data_list","whoData.select":"who.users","whoData.skip_suspended":"who.skip_suspended",where:"where","whereData.append_to_path":"append_to_path","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path","whereData.custom_append":"append_to_path.custom_append",whenData:"when",what:"what.what","whatData.select":"what.select",appendOptions:"append_to_path",usertypes:"who.users"}),e.mapProps({whoData:e.mapProps({skip_suspended:e.convert.toAppBoolean,select:e.flow(e.toArray,(function(e){return e.filter((function(e){return"checked"===e.checkbox}))}),e.mapArray(e.getProp("user")))}),whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean,append_to_path:e.flow((function(e){return Object.values(e).find((function(e){return e.selected}))}),e.getProp("value"))}),appendOptions:e.transformObject((function(e){var t=e.value,n=e.text;return(0,s.default)({},t,n)})),usertypes:e.flow(e.deleteProp("info"),e.transformObject((function(e){var t=e.user,n=e.type;return(0,s.default)({},t,n.toLowerCase()||"user")})))}))}});t.getCronDetails=R;var N=function(e){return o.default.post(c({url:"/CMD_ADMIN_BACKUP"},e))},P=N({params:{action:"kill",kill:!0},schema:{select:o.default.ROWS}});t.killBackup=P;var T=N({url:"/CMD_ADMIN_BACKUP",params:{action:"setting"},schema:{message:o.default.REQUIRED_BOOL,local_ns:o.default.REQUIRED_BOOL,restore_spf:o.default.REQUIRED_BOOL,confirm_with_domainowners:o.default.REQUIRED_BOOL},before:function(e){return c({},e,{message:e.message||null,local_ns:e.local_ns||null,restore_spf:e.restore_spf||null,confirm_with_domainowners:e.confirm_with_domainowners||null})}});t.updateSettings=T;var g=N({params:{action:"create",form_version:"3"},schema:{who:o.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:o.default.OPTIONAL_BOOL,when:o.default.REQUIRED_STRING,minute:o.default.OPTIONAL_STRING,hour:o.default.OPTIONAL_STRING,dayofmonth:o.default.OPTIONAL_STRING,month:o.default.OPTIONAL_STRING,dayofweek:o.default.OPTIONAL_STRING,where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,append_to_path:o.default.OPTIONAL_STRING,custom_append:o.default.OPTIONAL_STRING,what:o.default.REQUIRED_STRING,option:{type:Array,required:!1}}});t.scheduleBackup=g;var S=N({params:{action:"restore"},schema:{where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,local_path:o.default.OPTIONAL_STRING,ip_choice:o.default.REQUIRED_STRING,ip:o.default.OPTIONAL_STRING,select:{type:Array,required:!0}}});t.restoreBackup=S;var D=function(e){return o.default.select({url:"/CMD_ADMIN_BACKUP",params:(0,s.default)({},e,!0)})},A=D("duplicate");t.duplicateCrons=A;var y=D("delete");t.deleteCrons=y;var b=D("run");t.runCrons=b;var E=N({params:{action:"modify",form_version:"3"},schema:{id:o.default.REQUIRED_STRING,who:o.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:o.default.OPTIONAL_BOOL,minute:o.default.OPTIONAL_STRING,hour:o.default.OPTIONAL_STRING,dayofmonth:o.default.OPTIONAL_STRING,month:o.default.OPTIONAL_STRING,dayofweek:o.default.OPTIONAL_STRING,where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,append_to_path:o.default.OPTIONAL_STRING,custom_append:o.default.OPTIONAL_STRING,what:o.default.REQUIRED_STRING,option:{type:Array,required:!1}}});t.modifyBackup=E},1495:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(23)),s=n(18),o=n(14),i=function(e,t){return s.Maybe.fromNull(e).filter((function(e){return"object"===(0,a.default)(e)})).flatMap((function(e){return s.Maybe.fromNull(e[t])}))},l={location:function(e){return i(e,"files_location").map((function(e){return o.fp.convert.toAppString(e)})).orSome("")},filesList:function(e){return i(e,"files").map((function(e){return delete e.info,Object.values(e).map((function(e){var t=e.file,n=e.info,r={file:t};return n.issues&&n.issues.length&&(r.issues=n.issues),"yes"===n.hide_checkbox&&(r.disabled=!0),r}))})).orSome([])}};t.default=l},1496:function(e,t,n){"use strict";n.r(t),n.d(t,"getEncryptionStatus",(function(){return o})),n.d(t,"getIssues",(function(){return i})),n.d(t,"getFiles",(function(){return l})),n.d(t,"getSkipSuspendedValue",(function(){return p})),n.d(t,"getUsers",(function(){return u})),n.d(t,"getUsertypes",(function(){return c})),n.d(t,"getBackupSettings",(function(){return f}));var r=n(6),a=n(35),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e){return"yes"===e.settings.allow_backup_encryption},i=function(e){return r.map(a.toAppHtml,e.file_issues)},l=function(e){var t=r.omit(["info"],e.files);return r.map(r.prop("file"),t)},p=function(e){return"yes"===e.who.skip_suspended},u=function(e){return e.data_list},c=function(e){return r.pipe(r.omit(["info"]),r.values)(e.who.users).reduce((function(e,t){var n,r=t.user,a=t.type;return s(s({},e),((n={})[r]=a||"User",n))}),{})},f=function(e){var t={local_ns:"yes"===e.settings.local_ns,message:"yes"===e.settings.message,confirm_with_domainowners:"yes"===e.settings.confirm_with_domainowners,restore_spf:"yes"===e.settings.restore_spf};return e.settings.directadmin_conf&&(t.directadmin_conf=r.pipe(r.pick(["backup_ftp_pre_test","backup_ftp_md5","allow_backup_encryption","restore_database_as_admin","tally_after_restore","backup_hard_link_check","strict_backup_permissions"]),r.map(r.pipe(r.prop("value"),r.equals("1"))))(e.settings.directadmin_conf)),t}},1585:function(e,t,n){"use strict";n.r(t);var r=n(1586),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t.default=a.a},1586:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(15)),s=r(n(16)),o=r(n(2)),i=n(1464),l=n(24);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c,f={preload:[i.getRestoreOptions,i.getEncryptionStatus],mixins:[(0,l.$bindTab)({defaultTab:"where",param:"step"})],data:function(){return{where:"local",whereData:{local_path:"",ftp_ip:"",ftp_username:"",ftp_password:"",ftp_path:"",ftp_port:"",ftp_secure:""},ip_choice:"select",ipSelectData:{ip:"",create_user_home_override:""},checkedRows:[],decrypt:!1,password:"",selectedFiles:[]}},api:[{command:i.getRestoreOptions,bind:"options"},{command:i.getRestoreFiles,bind:{response:"files",isDone:"filesLoaded"}},{command:i.getEncryptionStatus,bind:"encryption"}],computed:{validWhere:function(){return"local"===this.where&&!!this.whereData.local_path||"ftp"===this.where&&!!this.whereData.ftp_ip&&!!this.whereData.ftp_username&&!!this.whereData.ftp_password&&!!this.whereData.ftp_path&&!!this.whereData.ftp_port},validFiles:function(){if(this.decrypt&&!this.password)return!1;if(this.selectedFiles.length){var e=this.files.issues,t=void 0===e?{}:e;return this.selectedFiles.every((function(e){return!t[e]}))}return!1},options:function(){return this.$api.options},files:function(){return this.$api.filesLoaded?this.$api.files:this.$api.options.filesData},encryptionEnabled:function(){return this.$api.encryption.enabled},issues:function(){return this.files.list.filter((function(e){return e.issues}))},checkedFiles:function(){return this.checkedRows.map((function(e){return e.file}))},requestData:function(){return u({where:this.where},this.whereData,{ip_choice:this.ip_choice},this.ipSelectData,{select:this.selectedFiles,encryption_password:this.password,ftp_secure:this.whereData.ftp_secure?"ftps":"no"})},filesList:function(){return this.files.list.map((function(e){return e.file}))},disabledFiles:function(){return this.files.list.filter((function(e){return e.disabled})).map((function(e){return e.file}))}},methods:{reloadFiles:function(){(0,i.getRestoreFiles)(u({where:this.where},this.whereData))},restoreBackup:(c=(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.restoreBackup)(this.requestData);case 2:e.sent&&this.$router.push({name:"admin/backups"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},created:function(){this.where=this.options.where,Object.assign(this.whereData,this.options.whereData),this.ipSelectData.ip=this.options.ips.value,this.$api.options.filesData.home_override&&(this.ipSelectData.create_user_home_override=this.$api.options.filesData.home_override.value)},watch:{step:function(e,t){"where"===t&&this.reloadFiles()}}};t.default=f},1587:function(e,t,n){var r=n(2480);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(5).default)("d65bb35a",r,!0,{})},2479:function(e,t,n){"use strict";var r=n(1587);n.n(r).a},2480:function(e,t,n){(e.exports=n(4)(!0)).push([e.i,"#restore-admin-backup .ui-steps-content>div>.formElement[data-v-f31fcdca]{margin-left:0!important}#restore-admin-backup .formElement .formElement[data-v-f31fcdca]:last-child{border-bottom-width:0}#restore-admin-backup .select[data-v-f31fcdca],#restore-admin-backup input[type=text][data-v-f31fcdca]{width:240px}","",{version:3,sources:["/home/evo/evolution/src/js/pages/admin/backups/restore.vue"],names:[],mappings:"AAwbA,0EAEQ,uBAA4B,CAFpC,4EAKQ,qBAAwB,CALhC,uGAQQ,WAAY,CAAA",file:"restore.vue?vue&type=style&index=0&id=f31fcdca&lang=scss&scoped=true&",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#restore-admin-backup {\n    .ui-steps-content > div > .formElement {\n        margin-left: 0rem !important;\n    }\n    .formElement .formElement:last-child {\n        border-bottom-width: 0px;\n    }\n    input[type="text"], .select {\n        width: 240px;\n    }\n}\n'],sourceRoot:""}])},2481:function(e,t){},3030:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{id:"restore-admin-backup"}},[n("app-page-section",[n("ui-steps",{attrs:{steps:[{id:"where",label:e.$gettext("Step 1: From Where"),desc:e.$gettext("Select directory for restore."),completed:e.validWhere},{id:"ip_select",label:e.$gettext("Step 2: Select IP"),desc:e.$gettext("Select IP address used for restore.")},{id:"files",label:e.$gettext("Step 3: Select File(s)"),desc:e.$gettext("Select backup files to restore."),completed:e.validFiles}],current:e.step},on:{"update:current":function(t){e.step=t}}},["where"===e.step?n("ui-button",{key:"reloadFiles",attrs:{slot:"buttons",theme:"primary"},on:{click:e.reloadFiles},slot:"buttons"},[n("translate",[e._v("Reload Files")])],1):e._e(),e._v(" "),"files"===e.step?n("ui-button",{key:"restoreBackup",attrs:{slot:"buttons",theme:"safe",disabled:!(e.validFiles&&e.validWhere)},on:{click:e.restoreBackup},slot:"buttons"},[n("translate",[e._v("Restore")])],1):e._e(),e._v(" "),n("div",{key:"where",attrs:{slot:"step:where"},slot:"step:where"},[n("ui-form-element",{attrs:{verticalOnPhone:!1,reverse:e.$_Client.isPhone}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Local")]),e._v(" "),n("input-check",{attrs:{slot:"content",type:"radio",value:"local"},slot:"content",model:{value:e.where,callback:function(t){e.where=t},expression:"where"}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},["local"===e.where?n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Path")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.local_path,callback:function(t){e.$set(e.whereData,"local_path",t)},expression:"whereData.local_path"}})],1):e._e()],1),e._v(" "),n("ui-form-element",{attrs:{underline:"ftp"===e.where,verticalOnPhone:!1,reverse:e.$_Client.isPhone}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("FTP")]),e._v(" "),n("input-check",{attrs:{slot:"content",type:"radio",value:"ftp"},slot:"content",model:{value:e.where,callback:function(t){e.where=t},expression:"where"}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},["ftp"===e.where?n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("FTP Settings")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IP")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_ip,callback:function(t){e.$set(e.whereData,"ftp_ip",t)},expression:"whereData.ftp_ip"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Username")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_username,callback:function(t){e.$set(e.whereData,"ftp_username",t)},expression:"whereData.ftp_username"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Password")]),e._v(" "),n("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_password,callback:function(t){e.$set(e.whereData,"ftp_password",t)},expression:"whereData.ftp_password"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Remote Path")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_path,callback:function(t){e.$set(e.whereData,"ftp_path",t)},expression:"whereData.ftp_path"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Port")]),e._v(" "),n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.whereData.ftp_port,callback:function(t){e.$set(e.whereData,"ftp_port",t)},expression:"whereData.ftp_port"}})],1),e._v(" "),n("ui-form-element",{attrs:{verticalOnPhone:!1,reverse:e.$_Client.isPhone}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Secure FTP")]),e._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_secure,callback:function(t){e.$set(e.whereData,"ftp_secure",t)},expression:"whereData.ftp_secure"}})],1)],1)],1):e._e()],1)],1),e._v(" "),n("div",{key:"ip_select",attrs:{slot:"step:ip_select"},slot:"step:ip_select"},[n("ui-form-element",{attrs:{underline:"select"===e.ip_choice}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Use the IP")]),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row"},expression:"{\n                            dir: $_Client.isPhone\n                                ? 'column'\n                                : 'row'\n                        }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{slot:"content",type:"radio",value:"file"},slot:"content",model:{value:e.ip_choice,callback:function(t){e.ip_choice=t},expression:"ip_choice"}},[n("translate",[e._v("stored in the backup")])],1),e._v(" "),n("input-check",{attrs:{slot:"content",type:"radio",value:"select"},slot:"content",model:{value:e.ip_choice,callback:function(t){e.ip_choice=t},expression:"ip_choice"}},[n("translate",[e._v("from the list")])],1)],1)],1),e._v(" "),n("transition",{attrs:{name:"fade"}},["select"===e.ip_choice?n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IP")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.options.ips.options},slot:"content",model:{value:e.ipSelectData.ip,callback:function(t){e.$set(e.ipSelectData,"ip",t)},expression:"ipSelectData.ip"}})],1):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.$api.options.filesData.home_override?n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Restore to partition")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.$api.options.filesData.home_override.options},slot:"content",model:{value:e.ipSelectData.create_user_home_override,callback:function(t){e.$set(e.ipSelectData,"create_user_home_override",t)},expression:"ipSelectData.create_user_home_override"}})],1):e._e()],1),e._v(" "),n("ul",[n("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        Note that you must set the IP to be shared if you want to add multiple users to it. If you select a non-shared IP, you can only restore 1 user to it.\n                    ")]),e._v(" "),n("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        If the user already exists, this setting will have no effect.\n                    ")]),e._v(" "),n("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        When restoring a Reseller or Admin, if you select an IP from the list, that Reseller will only receive the single IP.\n                        You would need to add extra IPs to that accounts IP list after he's created.\n                    ")]),e._v(" "),n("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        If using the IPs from within the backup, any IPs that don't exist on this system will not be included. If there no IPs to be used, a Reseller or Admin will be restored to the server IP.\n                    ")])])],1),e._v(" "),n("div",{key:"files",attrs:{slot:"step:files"},slot:"step:files"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Location\n                    ")]),e._v(" "),n("input-text",{attrs:{slot:"content",disabled:"",value:e.files.location},slot:"content"})],1),e._v(" "),n("ui-form-element",{attrs:{underline:e.encryptionEnabled}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Files")]),e._v(" "),n("input-select-multiple",{staticClass:"width:100%",attrs:{slot:"content",options:e.filesList,disabledEntries:e.disabledFiles},slot:"content",model:{value:e.selectedFiles,callback:function(t){e.selectedFiles=t},expression:"selectedFiles"}},e._l(e.issues,(function(t){return n("ui-tooltip",{key:t.file,attrs:{slot:"option:"+t.file,theme:"danger"},slot:"option:"+t.file},[n("span",{staticClass:"c:txt:danger",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                                "+e._s(t.file)+"\n                            ")]),e._v(" "),e._l(t.issues,(function(t){return n("li",{key:t,attrs:{theme:"danger"},domProps:{innerHTML:e._s(t)}})}))],2)})),1)],1),e._v(" "),e.encryptionEnabled?[n("ui-form-element",{attrs:{underline:e.decrypt,verticalOnPhone:!1,reverse:e.$_Client.isPhone}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Backup Decryption")]),e._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.decrypt,callback:function(t){e.decrypt=t},expression:"decrypt"}})],1),e._v(" "),n("transition",{attrs:{name:"fadeBounce"}},[e.decrypt?n("ui-form-element",{attrs:{underline:!1,group:"scheduleBackup",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Password")]),e._v(" "),n("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)]:e._e()],2)],1)],1)],1)},a=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))}}]);