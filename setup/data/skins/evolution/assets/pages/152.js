(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{1317:function(t,a,e){"use strict";e.r(a);var n=e(3056),i=e(1697);for(var l in i)"default"!==l&&function(t){e.d(a,t,(function(){return i[t]}))}(l);var r=e(0),s=e(2588),u=e.n(s),o=Object(r.a)(i.default,n.a,n.b,!1,null,null,null);"function"==typeof u.a&&u()(o),a.default=o.exports},1697:function(t,a,e){"use strict";e.r(a);var n=e(1698),i=e.n(n);for(var l in n)"default"!==l&&function(t){e.d(a,t,(function(){return n[t]}))}(l);a.default=i.a},1698:function(t,a,e){"use strict";var n=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,l,r,s,u=n(e(2)),o=n(e(15)),c=n(e(16)),d=e(51),p={preload:d.getPluginsList,api:[{command:d.getPluginsList,bind:"plugins"}],computed:{plugins:function(){return this.$api.plugins}},data:function(){return{addPluginData:{method:"url",url:"",file:null,passwd:"",install:!0},currentActionData:{action:"",id:""}}},methods:{getPluginName:function(t){var a=this.plugins.find((function(a){return a.id===t}));return a?a.name:""},addPlugin:(s=(0,c.default)(o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={url:d.installPlugin,file:d.uploadPlugin}[this.addPluginData.method],t.prev=1,t.next=4,a(this.addPluginData);case 4:this.reloadPlugins(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.prev=9,(0,d.getPluginsList)(),t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,7,9,12]])}))),function(){return s.apply(this,arguments)}),pluginAction:(r=(0,c.default)(o.default.mark((function t(a,e){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.currentActionData={action:a,id:e},this.$dialog("CONFIRMATION_DIALOG").open();case 2:case"end":return t.stop()}}),t,this)}))),function(t,a){return r.apply(this,arguments)}),reloadPlugins:(l=(0,c.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.commit("navigation/RESET_PLUGINS"),this.$store.dispatch("navigation/LOAD_PLUGINS",{level:this.$state.app.user.accessLevel});case 2:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),doAction:(i=(0,c.default)(o.default.mark((function t(){var a,e,n,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.currentActionData,n=e.action,i=e.id,t.next=3,(0,d.pluginAction)((a={},(0,u.default)(a,n,!0),(0,u.default)(a,"select",[i]),(0,u.default)(a,"passwd",this.addPluginData.passwd),a));case 3:t.sent&&(this.reloadPlugins(),this.currentActionData={id:"",action:""},(0,d.getPluginsList)());case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}};a.default=p},2588:function(t,a){},3056:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("app-page",[e("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(a){t.$dialog("ADD_PLUGIN_DIALOG").open()}},slot:"header:buttons"},[e("translate",[t._v("Add")])],1),t._v(" "),e("app-page-section",[e("ui-r-table",{attrs:{isCheckable:!1,rows:t.plugins,columns:[{id:"name",label:t.$gettext("Plugin"),grow:!0,editable:!1},{id:"version",label:t.$gettext("Version")},{id:"available_version",label:t.$gettext("Available Version")},{id:"active",label:t.$gettext("Active")},{id:"can_update",label:t.$gettext("Can Update")},{id:"installed",label:t.$gettext("Installed")},{id:"author",label:t.$gettext("Author"),grow:!0}],verticalLayout:t.$_Client.isPhone,disablePagination:""},scopedSlots:t._u([{key:"col:name",fn:function(a){var n=a.name,i=a.id;return e("ui-grid",{attrs:{cross:"center"}},[e("span",{domProps:{textContent:t._s(n||i)}}),t._v(" "),n?t._e():e("ui-tooltip",{attrs:{theme:"danger"}},[e("translate",[t._v("Corrupted Plugin")])],1)],1)}},{key:"col:active",fn:function(a){var n=a.active;return e("ui-badge",{attrs:{theme:n?"safe":"danger",size:"small"}},[t._v("\n                "+t._s(n?t.$gettext("Yes"):t.$gettext("No"))+"\n            ")])}},{key:"col:can_update",fn:function(a){var n=a.available_version;return e("ui-badge",{attrs:{theme:n?"safe":"danger",size:"small"}},[t._v("\n                "+t._s(n?t.$gettext("Yes"):t.$gettext("No"))+"\n            ")])}},{key:"col:installed",fn:function(a){var n=a.installed;return e("ui-badge",{attrs:{theme:n?"safe":"danger",size:"small"}},[t._v("\n                "+t._s(n?t.$gettext("Yes"):t.$gettext("No"))+"\n            ")])}},{key:"row:actions",fn:function(a){var n=a.name,i=a.id,l=a.active,r=a.available_version,s=a.installed;return e("ui-actions",{attrs:{position:"left"}},[s?[l?e("ui-link",{key:"deactivate-link",on:{click:function(a){return t.pluginAction("deactivate",i)}}},[e("translate",[t._v("Deactivate")])],1):e("ui-link",{key:"activate-link",on:{click:function(a){return t.pluginAction("activate",i)}}},[e("translate",[t._v("Activate")])],1)]:t._e(),t._v(" "),r?e("ui-link",{key:"update-link",on:{click:function(a){return t.pluginAction("update",i)}}},[e("translate",[t._v("Update")])],1):t._e(),t._v(" "),!s&&n?e("ui-link",{key:"install-link",on:{click:function(a){return t.pluginAction("install",i)}}},[e("translate",[t._v("Install")])],1):e("ui-link",{key:"uninstall-link",on:{click:function(a){return t.pluginAction("uninstall",i)}}},[e("translate",[t._v("Un-Install")])],1),t._v(" "),e("ui-link",{key:"delete-link",on:{click:function(a){return t.pluginAction("delete",i)}}},[e("translate",[t._v("Delete")])],1)],2)}}])})],1),t._v(" "),e("ui-dialog",{attrs:{id:"ADD_PLUGIN_DIALOG"}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Add Plugin")]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[e("ui-form-element",[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Upload Method:")]),t._v(" "),e("template",{slot:"content"},[e("input-check",{attrs:{type:"radio",value:"url"},model:{value:t.addPluginData.method,callback:function(a){t.$set(t.addPluginData,"method",a)},expression:"addPluginData.method"}},[e("translate",[t._v("URL")])],1),t._v(" "),e("input-check",{attrs:{type:"radio",value:"file"},model:{value:t.addPluginData.method,callback:function(a){t.$set(t.addPluginData,"method",a)},expression:"addPluginData.method"}},[e("translate",[t._v("File")])],1)],1)],2),t._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},["url"===t.addPluginData.method?e("ui-form-element",{key:"url",attrs:{vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("URL")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addPluginData.url,expression:"addPluginData.url"}],attrs:{slot:"content",type:"text"},domProps:{value:t.addPluginData.url},on:{input:function(a){a.target.composing||t.$set(t.addPluginData,"url",a.target.value)}},slot:"content"})],1):e("ui-form-element",{key:"file",attrs:{vertical:""}},[e("translate",{attrs:{slot:"title",vertical:""},slot:"title"},[t._v("File")]),t._v(" "),e("input-dropzone",{attrs:{slot:"content",accept:["application/gzip"]},slot:"content",model:{value:t.addPluginData.file,callback:function(a){t.$set(t.addPluginData,"file",a)},expression:"addPluginData.file"}})],1)],1),t._v(" "),e("ui-form-element",{attrs:{vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Password")]),t._v(" "),e("input-password",{attrs:{slot:"content"},slot:"content",model:{value:t.addPluginData.passwd,callback:function(a){t.$set(t.addPluginData,"passwd",a)},expression:"addPluginData.passwd"}})],1),t._v(" "),e("ui-form-element",[e("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.addPluginData.install,callback:function(a){t.$set(t.addPluginData,"install",a)},expression:"addPluginData.install"}},[e("translate",[t._v("Install after upload")])],1)],1)],1),t._v(" "),e("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.addPlugin},slot:"buttons"},["url"===t.addPluginData.method?e("translate",[t._v("\n                Install\n            ")]):e("translate",[t._v("\n                Upload\n            ")])],1)],1),t._v(" "),e("ui-dialog-confirm",{attrs:{id:"CONFIRMATION_DIALOG"},on:{"click:confirm":t.doAction,"dialog:close":function(a){t.addPluginData.passwd=""}}},["deactivate"===t.currentActionData.action?e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to deactivate “%{ name }” plugin?\n        ")]):"activate"===t.currentActionData.action?e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to activate “%{ name }” plugin?\n        ")]):"update"===t.currentActionData.action?e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to update “%{ name }” plugin?\n        ")]):"install"===t.currentActionData.action?e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to install “%{ name }” plugin?\n        ")]):"uninstall"===t.currentActionData.action?e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to uninstall “%{ name }” plugin?\n        ")]):e("translate",{attrs:{"translate-params":{name:t.getPluginName(t.currentActionData.id)}}},[t._v("\n            Are you sure you want to delete “%{ name }” plugin?\n        ")]),t._v(" "),e("ui-form-element",{attrs:{vertical:""}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Password")]),t._v(" "),e("input-password",{attrs:{slot:"content"},slot:"content",model:{value:t.addPluginData.passwd,callback:function(a){t.$set(t.addPluginData,"passwd",a)},expression:"addPluginData.passwd"}})],1)],1)],1)},i=[];e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return i}))}}]);